<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>51单片机开发入门（5）-定时器/计数器</title>
      <link href="post/bfbcdcd.html"/>
      <url>post/bfbcdcd.html</url>
      
        <content type="html"><![CDATA[<h1>定时器/计数器阐述</h1><p>AT89S51单片机有**<font color=#FF3030>两个16位</font>**内部定时/计数器，记作T0、T1。</p><p><font color=#FF0880>（AT89S52有3个定时/计数器，比AT89S51多了个T2。）</font></p><p>本质上，定时/计数器就是一个可以通过编程控制计数脉冲源、计数初值，并具有溢出标志和中断响应机制的**<font color=#FF3030>硬件加法计数器</font>**。</p><p>定时/计数器在计数值**<font color=#FF3030>溢出</font><strong>时置位一个</strong><font color=#FF3030>标志位TF</font>**，可以供中断或者查询使用。</p><p>定时/计数器的计数脉冲源可以通过编程进行设置，从而起到**<font color=#FF3030>定时</font><strong>或者</strong><font color=#FF3030>计数</font>**的作用。</p><h1>定时/计数器的结构</h1><p>定时/计数器为16位硬件加法计数器，由高8位TH和低8位TL两个计数寄存器组成。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613164157169.png" alt="image-20210613164157169"></p><p><strong>定时/计数器具有可选的两个计数脉冲源：</strong></p><p><strong>1、外部输入脉冲</strong></p><p><strong>2、内部机器周期脉冲</strong></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613164305419.png" alt="image-20210613164305419"></p><ul><li>定时器模式</li></ul><p>加法计数器对**<font color=#FF3030>内部机器周期</font>**进行计数。</p><p>机器周期**<font color=#FF3030>T</font>**已知</p><p>通过设置计数值**<font color=#FF3030>N</font><strong>确定定时时间</strong><font color=#FF3030>t</font>**。</p><p><strong><font color=#FF3030>t=NxT</font></strong></p><ul><li>计数器模式</li></ul><p>加法计数器对**<font color=#FF3030>外部输入脉冲</font>**进行计数，实现计数或频率测量功能。</p><p>外部计数脉冲由T0（P3.4）或T1（P3.5）引脚输入到计数器。计数器在检测到**<font color=#FF3030>外部输入脉冲下降沿</font><strong>时计数值加1，由于检测一个从1到0的下降沿需要2个机器周期，因此可以计数的外部脉冲最高频率为</strong><font color=#FF3030>fosc/24</font>**。</p><p>例：晶振频率12MHz时，最高外部计数频率500KHz。<br>12MHz / 24 = 500KHz</p><ul><li><strong>定时/计数器具有两个设置寄存器：</strong></li></ul><p><font color=#FF3030>TMOD</font>**，确定工作方式和功能；<br>**<font color=#FF3030>TCON</font>，控制T0、T1的启停，且包含溢出标志。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613165023779.png" alt="image-20210613165023779"></p><h2 id="定时-计数器有关的SFR">定时/计数器有关的SFR</h2><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613165742980.png" alt="image-20210613165742980"></p><h3 id="定时-计数器0计数值寄存器（16位）：">定时/计数器0计数值寄存器（16位）：</h3><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613165358451.png" alt="image-20210613165358451"><strong>共16位，分为高8位和低8位进行存储；</strong><br><strong>根据工作方式的不同可以使用其中的13位、8位、16位；</strong><br><strong>计数值范围根据使用位数而发生变化；</strong><br><strong>只能加法计数；</strong><br><strong>用户在编程时可以向TH和TL写入定时/计数器的计数初始值，在启动定时/计数器后，定时/计数器将从设置的初始值开始加法计数。</strong><br>📌<font color=#FF3030>当计数到最大值时，产生溢出标志。</font></p><ul><li>TMOD（T/C方式控制寄存器）      SFR地址：0x89</li></ul><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613165853435.png" alt="image-20210613165853435"></p><p><strong>GATE：门控信号</strong><br>1 – T/C启动要求TR和INT同时为‘1’；<br>0 – T/C启动仅受TR控制</p><p><strong>C/T：计数器/定时器选择位</strong><br>0 – 定时器模式；内部时钟<br>1 – 计数器模式；外部脉冲</p><p><strong>M1和M0：T/C工作方式选择</strong><br>可以选择工作方式0、1、2、3。</p><ul><li>TCON（T/C控制寄存器）         SFR地址：0x88</li></ul><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613170025906.png" alt="image-20210613170025906"></p><p><strong>TR0：T/C0启动控制位；</strong><br><strong>TF0：T/C0溢出标志位，用于中断响应；</strong><br><strong>TR1：T/C1启动控制位；</strong><br><strong>TF1：T/C1溢出标志位，用于中断响应；</strong></p><p><code>TR：1--启动计数；0--停止计数；</code></p><p><code>TF：计数值溢出时由硬件置1；CPU转入中断响应程</code><br><code>序时由硬件自动清零，也可以软件清零。</code></p><h3 id="定时-计数器的工作方式">定时/计数器的工作方式</h3><p>8051单片机的定时/计数器具有**<font color=#FF3030>四种</font>**工作方式，可以使用TMOD中的M1和M0进行选择：</p><table><thead><tr><th><strong>M1</strong></th><th><strong>M0</strong></th><th><strong>方式</strong></th><th><strong>功   能</strong></th></tr></thead><tbody><tr><td><strong>0</strong></td><td><strong>0</strong></td><td><strong>0</strong></td><td><strong>13</strong>位定时器/计数器</td></tr><tr><td><strong>0</strong></td><td><strong>1</strong></td><td><strong>1</strong></td><td><strong>16位定时器/计数器</strong></td></tr><tr><td><strong>1</strong></td><td><strong>0</strong></td><td><strong>2</strong></td><td>自动重载的<strong>8</strong>位定时器/计数器</td></tr><tr><td><strong>1</strong></td><td><strong>1</strong></td><td><strong>3</strong></td><td>仅适用于<strong>T0</strong>，两个<strong>8</strong>位定时器/计数器</td></tr></tbody></table><h4 id="工作方式0（定时-计数器0和1均可）">工作方式0（定时/计数器0和1均可）</h4><p>方式0为**<font color=#FF3030>13位</font>**计数，由TL0的低5位（高3位未用）和TH0的8位组成。TL0的低5位溢出时向TH0进位，TH0溢出时，置位TCON中的TF0标志，向CPU发出中断请求。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613170738280.png" alt="image-20210613170738280"></p><h4 id="工作方式1-（定时-计数器0和1均可）">工作方式1 （定时/计数器0和1均可）</h4><p>方式1的计数位数是**<font color=#FF3030>16位</font>**，由TL0作为低8位、TH0作为高8位，组成了16位加1计数器 。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613170840171.png" alt="image-20210613170840171"></p><h4 id="工作方式2-（定时-计数器0和1均可）">工作方式2 （定时/计数器0和1均可）</h4><p>方式2为自动重装初值的8位计数方式。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613170932587.png" alt="image-20210613170932587"></p><p>🎯**<font color=#FF3030>工作方式2特别适合于用作较精确的脉冲信号发生器。 </font>**</p><h4 id="定时器时间的设置（定时期初值的计算）">定时器时间的设置（定时期初值的计算）</h4><p>在内部定时方式下， T0、T1对内部机器周期计数，若fosc=6MHz，一个机器周期为12/fosc=2us,所以<br>✔ 方式0  13位定时器最大定时间隔=2^13×2us=16.384ms<br>✔ 方式1  16位定时器最大定时间隔=2^16×2us=131.072ms<br>✔ 方式2  8位定时器最大定时间隔 =2^8 ×2us=512us</p><p>例：若使T0工作在方式0，要求定时1ms，求计数初值。设计数初值为x，则有：<br>(2^13－x)×2us= 1000us<br>x = 2^13－500 = 0x1E0C<br>因此，TH，TL可置 8192－500<br><strong><font color=#FF3030>TH0 = 0xF0;TL0 = 0x0C;</font></strong></p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613171201627.png" alt="image-20210613171201627" style="zoom:50%;" /><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613171208244.png" alt="image-20210613171208244" style="zoom:50%;" /><h4 id="工作方式3（仅适用于定时-计数器0）">工作方式3（仅适用于定时/计数器0）</h4><p>方式3只适用于T/C0。当方式3时，TH0和TL0成为两个独立的计数器。   <strong><font color=#FF3030>此时，TL0可用作定时/计数器，占用TR0和TF0；TH0只能用作定时器，占用TR1和TF1；T/C1仍可用于方式0、1、2，但不能使用中断。</font></strong></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613171418526.png" alt="image-20210613171418526"></p><p>📡<font color=#FF0880>只有在T/C1被串口占用时，T/C0才使用方式3</font></p><h1>定时/计数器的使用</h1><h2 id="定时器／计数器的初始化及其步骤">定时器／计数器的初始化及其步骤</h2><p>使用8051的T0、T1前，应对它进行编程初始化，主要是对TCON和TMOD编程；计算和装载计数初值（TH、TL）。</p><p>一般完成以下几个步骤：<br>○确定定时/计数器的工作方式（编程TMOD寄存器）；<br>○计算计数初始值，并赋予TH、TL；<br>○如果在中断方式工作，需使能中断；<br>○启动定时器／计数器（编程TR0或TR1位）。</p><h2 id="数码管显示实验">数码管显示实验</h2><ul><li>“实现数值0～65535的变化显示”</li></ul><p><strong>问题：如何使数值变化的速度减慢？（如每隔1秒数值加1）</strong></p><h3 id="一般方法（延时函数）">一般方法（延时函数）</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span> i,j; </span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span>  uiTemp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>) </span><br><span class="line">    &#123; </span><br><span class="line">        convert(uiTemp); </span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++) </span><br><span class="line">        &#123; </span><br><span class="line">            P2=LED_seg[i];   <span class="comment">//送段码 </span></span><br><span class="line">            P0=LED_bit[i];     <span class="comment">//送位码 </span></span><br><span class="line">            delay1ms(<span class="number">5</span>);       <span class="comment">//5ms延迟 </span></span><br><span class="line">        &#125; </span><br><span class="line">        j ++;</span><br><span class="line">        <span class="keyword">if</span> ( j == <span class="number">33</span> )<span class="comment">//约1秒</span></span><br><span class="line">        &#123;          </span><br><span class="line">            uiTemp++;</span><br><span class="line">            j = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><ul><li>定时/计数器方法</li></ul><p>实现数值0～65535的变化显示，每隔50ms数值加1。( 设晶振频率为12MHz)</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt; reg51.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> gluiTemp ;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer0</span><span class="params">( )</span> interrupt 1 <span class="keyword">using</span> 1</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">TH0 = (<span class="number">65536</span> – <span class="number">50000</span>) / <span class="number">256</span>;</span><br><span class="line">TL0 = (<span class="number">65536</span> – <span class="number">50000</span>) % <span class="number">256</span>;</span><br><span class="line">gluiTemp ++ ；</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">     <span class="keyword">unsigned</span> <span class="keyword">char</span> i,j; </span><br><span class="line">     gluiTemp = <span class="number">0</span>;</span><br><span class="line">     </span><br><span class="line">     TMOD = <span class="number">0x01</span>;</span><br><span class="line">     TH0 = (<span class="number">65536</span> – <span class="number">50000</span>) / <span class="number">256</span>;</span><br><span class="line">     TL0 = (<span class="number">65536</span> – <span class="number">50000</span>) % <span class="number">256</span>;</span><br><span class="line">     ET0 = <span class="number">1</span>;</span><br><span class="line">     EA = <span class="number">1</span>;</span><br><span class="line">     TR0 = <span class="number">1</span>;</span><br><span class="line">     <span class="keyword">while</span>(<span class="number">1</span>) </span><br><span class="line">     &#123; </span><br><span class="line">          convert(gluiTemp); </span><br><span class="line">          <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++) </span><br><span class="line">          &#123; </span><br><span class="line">P2=LED_seg[i];   <span class="comment">//送段码 </span></span><br><span class="line">P0=LED_bit[i];     <span class="comment">//送位码 </span></span><br><span class="line">delay1ms(<span class="number">5</span>);       <span class="comment">//5ms延迟 </span></span><br><span class="line">P0=<span class="number">0</span>;</span><br><span class="line">          &#125; </span><br><span class="line">     &#125; </span><br><span class="line">&#125; </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>实现数值0～65535的变化显示，每隔1s数值加1。( 设晶振频率为12MHz)</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt; reg51.h&gt;</span></span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> glucCounter ;<span class="comment">//定义一个全局变量，实现计数功能</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> gluiTemp ;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer0</span><span class="params">( )</span> interrupt 1 <span class="keyword">using</span> 1</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">TH0 = (<span class="number">65536</span> – <span class="number">50000</span>) / <span class="number">256</span>;</span><br><span class="line">TL0 = (<span class="number">65536</span> – <span class="number">50000</span>) % <span class="number">256</span>;</span><br><span class="line">glucCounter ++ ;</span><br><span class="line"><span class="keyword">if</span> ( glucCounter == <span class="number">20</span> )</span><br><span class="line">&#123;</span><br><span class="line">gluiTemp ++ ；</span><br><span class="line">glucCounter = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">     <span class="keyword">unsigned</span> <span class="keyword">char</span> i,j; </span><br><span class="line">     gluiTemp = <span class="number">0</span>;</span><br><span class="line">     glucCounter = <span class="number">0</span>;</span><br><span class="line">     TMOD = <span class="number">0x01</span>;</span><br><span class="line">     TH = (<span class="number">65536</span> – <span class="number">50000</span>) / <span class="number">256</span>;</span><br><span class="line">     TL = (<span class="number">65536</span> – <span class="number">50000</span>) % <span class="number">256</span>;</span><br><span class="line">     ET0 = <span class="number">1</span>;</span><br><span class="line">     EA = <span class="number">1</span>;</span><br><span class="line">     TR0 = <span class="number">1</span>;</span><br><span class="line">     <span class="keyword">while</span>(<span class="number">1</span>) </span><br><span class="line">     &#123; </span><br><span class="line">          convert(gluiTemp); </span><br><span class="line">          <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++) </span><br><span class="line">          &#123; </span><br><span class="line">P2=LED_seg[i];   <span class="comment">//送段码 </span></span><br><span class="line">P0=LED_bit[i];     <span class="comment">//送位码 </span></span><br><span class="line">delay1ms(<span class="number">5</span>);       <span class="comment">//5ms延迟 </span></span><br><span class="line">P0=<span class="number">0</span>;</span><br><span class="line">          &#125; </span><br><span class="line">     &#125; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h2 id="单片机输出-1">单片机输出(1)</h2><p>例1：设晶振频率fosc=6MHz，要求在P2.0脚上输出周期为2ms的方波。</p><p>解：采用定时器T0的方式1进行编程</p><p>思路：采用定时间隔1ms，每次时间到P2.0取反并且启动下一次定时，从而实现2ms周期的方波。<br>定时所需计数次数n=1000us／2us＝500</p><p>由于计数器递增计数，为得到500个计数之后的定时器溢出，必须给定时器置初值65536－500。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613172419400.png" alt="image-20210613172419400"></p><h3 id="中断方式">中断方式</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;reg51.h&gt;</span></span></span><br><span class="line">sbit P2_0=P2^<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">T0_ISR</span><span class="params">()</span> interrupt 1 <span class="keyword">using</span> 1     <span class="comment">//T0中断服务程序入口</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    TH0= （<span class="number">65536</span>－<span class="number">500</span>）/ <span class="number">256</span>;   <span class="comment">//计数初值重载</span></span><br><span class="line">    TL0=（<span class="number">65536</span>－<span class="number">500</span>）％ <span class="number">256</span>; </span><br><span class="line">    P2_0=!P2_0;               <span class="comment">//P2.0取反</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    TMOD=<span class="number">0x01</span>;                 <span class="comment">//T0工作在定时器方式l</span></span><br><span class="line">    TH0=（<span class="number">65536</span>－<span class="number">500</span>）/<span class="number">256</span>;     <span class="comment">//计数初值</span></span><br><span class="line">    TL0=（<span class="number">65536</span>－<span class="number">500</span>）％<span class="number">256</span>; </span><br><span class="line">    ET0=<span class="number">1</span>; EA=<span class="number">1</span>;               <span class="comment">//中断使能</span></span><br><span class="line">    TR0=<span class="number">1</span>;                     <span class="comment">//启动T0</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是这里精度还有待考究</p><h3 id="中断方式-2">中断方式</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;reg51.h&gt;</span></span></span><br><span class="line">sbit P2_0=P2^<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    TMOD=<span class="number">0x01</span>;                <span class="comment">//T0工作在定时器方式l</span></span><br><span class="line">    TH0= （<span class="number">65536</span>－<span class="number">500</span>）/<span class="number">256</span>;   <span class="comment">//计数初值</span></span><br><span class="line">    TL0=（<span class="number">65536</span>－<span class="number">500</span>）％<span class="number">256</span>; </span><br><span class="line">    TR0=<span class="number">1</span>;                    <span class="comment">//启动T0</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        TH0= （<span class="number">65536</span>－<span class="number">500</span>）/<span class="number">256</span>;   <span class="comment">//计数初值</span></span><br><span class="line">        TL0=（<span class="number">65536</span>－<span class="number">500</span>）％<span class="number">256</span>; </span><br><span class="line">  <span class="comment">/*查询TF0是否为‘1’，如果为‘1’则说明溢出（定时时间到）*/</span></span><br><span class="line">        <span class="keyword">while</span> (!TF0);</span><br><span class="line">        P2_0 = ! P2_0;</span><br><span class="line">        TF0 = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="单片机输出-2">单片机输出(2)</h2><p>例2：设单片机fosc=6MHz，要求在P2.0引脚上输出周期为2ms，占空比为75％的矩形波。在例2基础上应作何修改？</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613172908702.png" alt="image-20210613172908702"></p><p>解：采用定时器T0的方式1进行编程</p><p>思路：采用定时间隔0.5ms，并设置一个全局变量i对定时器的中断次数进行计数，小于等于3时输出高电平，等于4时输出低电平，以此循环。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613173023643.png" alt="image-20210613173023643"></p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;reg51.h&quot;</span></span></span><br><span class="line">sbit P1_0=P1^<span class="number">0</span>;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> i;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TIMER0_ISR</span> <span class="params">(<span class="keyword">void</span>)</span> interrupt 1 </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    TH0=(<span class="number">65536</span><span class="number">-250</span>)/<span class="number">256</span>;</span><br><span class="line">    TL0=(<span class="number">65536</span>- <span class="number">250</span>)%<span class="number">256</span>;</span><br><span class="line">    i++;</span><br><span class="line">    <span class="keyword">if</span>(i = = <span class="number">3</span>)   &#123; P1_0=<span class="number">0</span>; &#125;</span><br><span class="line">    <span class="keyword">if</span>(I = = <span class="number">4</span>)   &#123; P1_0=<span class="number">1</span>; i=<span class="number">0</span>;  &#125;    </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span> <span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    TMOD=<span class="number">0x01</span>;</span><br><span class="line">    TH0=(<span class="number">65536</span>- <span class="number">250</span>)/<span class="number">256</span>;</span><br><span class="line">    TL0=(<span class="number">65536</span>- <span class="number">250</span>)%<span class="number">256</span>;</span><br><span class="line">    ET0=<span class="number">1</span>; EA=<span class="number">1</span>;</span><br><span class="line">    TR0=<span class="number">1</span>;</span><br><span class="line">    i = <span class="number">0</span>;</span><br><span class="line">    P1_0 = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123; ; &#125;               </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="小思考">小思考</h3><p>如果周期2ms占空比要求是35%，可以采用采用定时间隔0.5ms吗？</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613173311653.png" alt="image-20210613173311653"></p><p>思路：高电平持续时间35%，低电平持续时间65%，应考虑取其公约数。一般取最大公约数。</p><p>所以可取时间间隔为0.1ms。</p><p>高电平持续7个定时间隔，低电平持续13个时间间隔。</p><h2 id="单片机输出-3">单片机输出(3)</h2><p>例3：设单片机fosc=6MHz，要求在P2.0引脚上输出周期为2ms，占空比为65％的矩形波。在例2基础上应作何修改？</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;reg51.h&quot;</span></span></span><br><span class="line">sbit P1_0=P1^<span class="number">0</span>;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> i;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TIMER0_ISR</span> <span class="params">(<span class="keyword">void</span>)</span> interrupt 1 </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    TH0=(<span class="number">65536</span><span class="number">-50</span>)/<span class="number">256</span>;</span><br><span class="line">    TL0=(<span class="number">65536</span>- <span class="number">50</span>)%<span class="number">256</span>;</span><br><span class="line">    i++;</span><br><span class="line">    <span class="keyword">if</span>(i = = <span class="number">7</span>)   &#123; P1_0=<span class="number">0</span>; &#125;</span><br><span class="line">    <span class="keyword">if</span>(I = = <span class="number">20</span>)   &#123; P1_0=<span class="number">1</span>; i=<span class="number">0</span>;  &#125;    </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span> <span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    TMOD=<span class="number">0x01</span>;</span><br><span class="line">    TH0=(<span class="number">65536</span>- <span class="number">50</span>)/<span class="number">256</span>;</span><br><span class="line">    TL0=(<span class="number">65536</span>- <span class="number">50</span>)%<span class="number">256</span>;</span><br><span class="line">    ET0=<span class="number">1</span>; EA=<span class="number">1</span>;</span><br><span class="line">    TR0=<span class="number">1</span>;</span><br><span class="line">    i = <span class="number">0</span>;</span><br><span class="line">    P1_0 = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123; ; &#125;               </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="单片机输出-4">单片机输出(4)</h3><p>例4：设晶振频率fosc=6MHz，要求在P2.0脚上输出周期为2s的方波。</p><p>长定时的实现</p><p>思路：定时间隔为1秒，使用T0无法直接得到1秒的定时。因此，需要使用多次定时复合的方法来得到较长时间的定时。</p><h3 id="方法一-使用两个定时-计数器实现1秒定时：">方法一 使用两个定时/计数器实现1秒定时：</h3><p>T0工作在定时方式1，定时100ms，从而控制P1.0输出周期为200ms的方波；将这个方波输入到T1，T1工作在计数方式2，计数5次后溢出，控制P2.0反向，从而实现周期为2秒的方波输出。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613173706504.png" alt="image-20210613173706504"></p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;reg51.h&gt;</span></span></span><br><span class="line">sbit P1_0 = P1^<span class="number">0</span>;</span><br><span class="line">sbit P1_7 = P1^<span class="number">7</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer0</span><span class="params">( )</span> interrupt 1 <span class="keyword">using</span> 1 </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">TH0 = (<span class="number">65536</span> – <span class="number">50000</span>)  /  <span class="number">256</span>;</span><br><span class="line">TL0 = (<span class="number">65536</span> – <span class="number">50000</span>) % <span class="number">256</span>;</span><br><span class="line">P1_0 = ! P1_0;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer1</span><span class="params">( )</span> interrupt 3 <span class="keyword">using</span> 2 </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">P1_7 = ! P1_7;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">( )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">P1_7 = <span class="number">0</span>;</span><br><span class="line">P1_0 = <span class="number">1</span>;</span><br><span class="line">    TMOD = <span class="number">0x61</span>;</span><br><span class="line">    TH0 = (<span class="number">65536</span> – <span class="number">50000</span>)  /  <span class="number">256</span>;</span><br><span class="line">    TL0 = (<span class="number">65536</span> – <span class="number">50000</span>) % <span class="number">256</span>;</span><br><span class="line">    TH1 = <span class="number">256</span> – <span class="number">5</span> ;</span><br><span class="line">    TL1 = <span class="number">256</span> – <span class="number">5</span>;</span><br><span class="line">    IP = <span class="number">0x08</span>;</span><br><span class="line">    EA = <span class="number">1</span>;</span><br><span class="line">    ET0 = <span class="number">1</span>;</span><br><span class="line">    ET1 = <span class="number">1</span>;</span><br><span class="line">    TR0 = <span class="number">1</span>;</span><br><span class="line">    TR1 = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>) &#123; ; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="方法二-仅使用一个定时-计数器实现">方法二 仅使用一个定时/计数器实现</h3><p>使用方法一时需要使用两个定时器和两个IO引脚，资源消耗比较多。如何使用较少的资源实现同样的定时功能</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt; reg51.h&gt;</span></span></span><br><span class="line">sbit WAVE = P1^<span class="number">7</span>;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> glucCounter;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer0</span><span class="params">( )</span> interrupt 1 <span class="keyword">using</span> 1</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    TH0 = (<span class="number">65536</span> – <span class="number">50000</span>) / <span class="number">256</span>;<span class="comment">//设定初值，100ms定时</span></span><br><span class="line">    TL0 = (<span class="number">65536</span> – <span class="number">50000</span>) % <span class="number">256</span>;</span><br><span class="line">    glucCounter ++ ;<span class="comment">//定义一个全局变量，实现计数功能</span></span><br><span class="line">    <span class="keyword">if</span> ( glucCounter == <span class="number">10</span> )</span><br><span class="line">    &#123;</span><br><span class="line">        WAVE = ! WAVE;</span><br><span class="line">        glucCounter = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">( )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    WAVE = <span class="number">0</span>;</span><br><span class="line">    TMOD = <span class="number">0x01</span>;</span><br><span class="line">    TH0 = (<span class="number">65536</span> – <span class="number">50000</span>)  /  <span class="number">256</span>;</span><br><span class="line">    TL0 = (<span class="number">65536</span> – <span class="number">50000</span>) % <span class="number">256</span>;</span><br><span class="line">    EA = <span class="number">1</span>;</span><br><span class="line">    ET0 = <span class="number">1</span>;</span><br><span class="line">    TR0 = <span class="number">1</span>;</span><br><span class="line">    glucCounter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>) &#123; ; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>8051 定时计数器工程应用</h1><h2 id="设计要求">设计要求</h2><p>航标灯控制(工程设计)</p><p>2位拨码开关：灯质设定(频率与占空比)</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613174114641.png" alt="image-20210613174114641"></p><p>光敏电阻：实现光照采集(光照强，电阻小；光照弱，电阻大)</p><p>灯驱动：发光二极管采用12V供电，要实验单片机驱动电路设计，三极管驱动</p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613174204721.png" alt="image-20210613174204721" style="zoom:80%;" /><h2 id="电路仿真图：">电路仿真图：</h2><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613174337712.png" alt="image-20210613174337712"></p><h2 id="软件程序">软件程序</h2><p>这里把相关函数先封装起来了，具体程序代码如下所示：</p><h3 id="main-c">main.c</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;reg51.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;timer.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*******变量类型宏定义*******/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> uchar unsigned char</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> uint unsigned int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*******引用结构变量*******/</span></span><br><span class="line"><span class="keyword">extern</span> <span class="class"><span class="keyword">struct</span> <span class="title">IALA</span> <span class="title">IALA4</span>[4];</span></span><br><span class="line"><span class="keyword">extern</span> <span class="class"><span class="keyword">struct</span> <span class="title">Turn</span> <span class="title">Counter50ms</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*******IO口定义*******/</span></span><br><span class="line">sbit D=P0^<span class="number">0</span>; <span class="comment">//灯输出控制，高电平有效</span></span><br><span class="line">sbit OPCON=P1^<span class="number">2</span>; <span class="comment">//光照检测，高电平(亮)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*******定时器0初始化*******/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span><span class="title">Timer0Init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">TMOD=(TMOD&amp;<span class="number">0xf0</span>)|<span class="number">0x01</span>;<span class="comment">//定时器0 方式1</span></span><br><span class="line">TR0=<span class="number">1</span>;<span class="comment">//开启定时器T0</span></span><br><span class="line">TH0=(<span class="number">65535</span>-COUNT_50MS)/<span class="number">256</span>;<span class="comment">//设定定时器初始值（高8位）</span></span><br><span class="line">TL0=(<span class="number">65535</span>-COUNT_50MS)%<span class="number">256</span>;<span class="comment">//设定定时器初始值（低8位）</span></span><br><span class="line"></span><br><span class="line">TF0=<span class="number">0</span>;<span class="comment">//中断标志位清零</span></span><br><span class="line">ET0=<span class="number">1</span>;<span class="comment">//允许定时器0中断</span></span><br><span class="line">EA=<span class="number">1</span>;<span class="comment">//打开总中断</span></span><br><span class="line">PT0=<span class="number">0</span>;<span class="comment">//中断优先级设置</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******主函数*******/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">uchar key,pre_key=<span class="number">0</span>,i;</span><br><span class="line">uint sum;</span><br><span class="line">Timer0Init();<span class="comment">//定时器0初始化</span></span><br><span class="line">D=<span class="number">0</span>;<span class="comment">//LED控制端初始化</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">key=key_scan(); <span class="comment">//获取拨码开关对应状态</span></span><br><span class="line"><span class="keyword">if</span>(key!=pre_key)<span class="comment">//拨码开关状态改变</span></span><br><span class="line">&#123;</span><br><span class="line">sum=<span class="number">0</span>;<span class="comment">//变量初始化</span></span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">sum=sum+IALA4[key].gcd*IALA4[key].state[i];<span class="comment">//结构体变量赋值且运算赋值给sum</span></span><br><span class="line">Counter50ms.state[i]=sum;<span class="comment">//确定定时时间</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">pre_key=key;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">T0_ISR</span><span class="params">(<span class="keyword">void</span>)</span> interrupt 1<span class="comment">//中断服务函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> uint i=<span class="number">0</span>;<span class="comment">//定义静态变量i</span></span><br><span class="line">    uchar j;</span><br><span class="line">    TH0=(<span class="number">65535</span>-COUNT_50MS)/<span class="number">256</span>;<span class="comment">//重新赋初值</span></span><br><span class="line">    TL0=(<span class="number">65535</span>-COUNT_50MS)%<span class="number">256</span>;</span><br><span class="line">    <span class="keyword">if</span>(OPCON==<span class="number">0</span>)<span class="comment">//如果是黑夜，对应灯质状态</span></span><br><span class="line">    &#123;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>; j&lt;<span class="number">2</span>; j++)<span class="comment">//循环闪烁</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(i==Counter50ms.state[<span class="number">2</span>*j])</span><br><span class="line">&#123;</span><br><span class="line">D=D_CLOSE;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(i==Counter50ms.state[<span class="number">2</span>*j+<span class="number">1</span>])</span><br><span class="line">&#123;</span><br><span class="line">D=D_OPEN;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(i==Counter50ms.state[<span class="number">4</span>])</span><br><span class="line">&#123;</span><br><span class="line">D=D_CLOSE;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(i&gt;=Counter50ms.state[<span class="number">5</span>])</span><br><span class="line">&#123;</span><br><span class="line">D=D_OPEN;</span><br><span class="line">i=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line"><span class="comment">//白天熄灯</span></span><br><span class="line">D=D_CLOSE;</span><br><span class="line">i=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="timer-c">timer.c</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;reg51.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;timer.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">sbit D=P0^<span class="number">0</span>; <span class="comment">//灯输出控制，高电平有效</span></span><br><span class="line">sbit OPCON=P1^<span class="number">2</span>; <span class="comment">//光照检测，高电平(亮)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//结构体全局变量定义,const：常数</span></span><br><span class="line"><span class="keyword">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">IALA</span> <span class="title">IALA4</span>[4]=</span>&#123;</span><br><span class="line"><span class="comment">//NUM gcd ON1 OFF1 ON2 OFF2 ON3 OFF3</span></span><br><span class="line">&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,<span class="comment">//全亮</span></span><br><span class="line">&#123;<span class="number">1</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,</span><br><span class="line">&#123;<span class="number">2</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">7</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,</span><br><span class="line">&#123;<span class="number">3</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//结构体全局变量定义</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Turn</span> <span class="title">Counter50ms</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span> <span class="title">key_scan</span><span class="params">(<span class="keyword">void</span>)</span><span class="comment">//拨码开关状态检测</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> key;</span><br><span class="line">key=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(P1&amp;<span class="number">0x01</span>)</span><br><span class="line">key=key|<span class="number">0x01</span>;</span><br><span class="line"><span class="keyword">if</span>(P1&amp;<span class="number">0x02</span>)</span><br><span class="line">key=key|<span class="number">0x02</span>;</span><br><span class="line"><span class="keyword">return</span>(key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="timer-h">timer.h</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _TIMER_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _TIMER_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> COUNT_50MS 500     <span class="comment">//50ms gcd:50ms的倍数</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> D_OPEN  1     <span class="comment">//开灯</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> D_CLOSE 0     <span class="comment">//关灯</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//结构体类型声明1</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">IALA</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> num;     <span class="comment">//拨码开关状态</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> gcd;     <span class="comment">//各时间间隔最大公约数</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> state[<span class="number">6</span>];<span class="comment">//无符号字符型时间常数</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//结构体类型声明2</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Turn</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> state[<span class="number">6</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span> <span class="title">key_scan</span><span class="params">(<span class="keyword">void</span>)</span></span>; <span class="comment">//函数声明</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 个人笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>51单片机开发（4）-中断系统</title>
      <link href="post/e65a9e57.html"/>
      <url>post/e65a9e57.html</url>
      
        <content type="html"><![CDATA[<h1>中断系统</h1><h2 id="中断的作用">中断的作用</h2><p><strong>所谓中断是指<strong><strong>CPU</strong></strong>对系统中或系统外发生的某个事件的一种响应过程，即<strong><strong>CPU</strong></strong>暂停现行程序的执行，而自动转去执行<strong><strong>预先安排好的</strong></strong>处理该事件的服务子程序（函数）。当处理完毕后，再返回被暂停程序的断点处，继续执行原来的程序。</strong></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613132920720.png" alt="image-20210613132920720"></p><h2 id="8051单片机的中断资源">8051单片机的中断资源</h2><ul><li><strong>AT89S51</strong>有<strong>5</strong>个中断源</li></ul><p>​<strong>外部中断请求</strong>0，<strong>P3.2</strong></p><p>​<strong>定时器计数器</strong>0<strong>溢出</strong></p><p>​<strong>外部中断请求1</strong>，<strong>P3.3</strong></p><p>​<strong>定时器计数器1溢出</strong></p><p>​<strong>串口发送接收</strong></p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613133923572.png" alt="image-20210613133923572" style="zoom:50%;" /><p>2个可编程软件中断优先级(2级中断嵌套)</p><ul><li><strong>IE（中断允许寄存器）</strong></li></ul><p>中断源的中断请求是否能得到响应，受IE的控制；</p><ul><li><strong>IP（中断优先级寄存器）</strong></li></ul><p>各个中断源的优先级可由IP的各位来确定。</p><h3 id="TCON：定时／计数器控制寄存器">TCON：定时／计数器控制寄存器</h3><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613134313362.png" alt="image-20210613134313362"></p><ul><li>定时计数器中断相关：</li></ul><p><strong><font color=#FF3030>TF1</font></strong> - 定时器1溢出中断标志</p><p><strong><font color=#FF3030>TF0</font></strong> - 定时器0溢出中断标志</p><ul><li>外部中断相关：</li></ul><p><strong><font color=#FF3030>IE1、IE0</font></strong> - 外部中断1、外部中断0中断标志</p><p><strong><font color=#FF3030> IT1、IT0</font></strong> - 外部中断1、外部中断0触发方式控制位<br>（IT=1: 下降沿触发）<br>（IT=0：低电平触发）</p><p>📢📢：TF1、TF0、IE1、IE0具有自动清零功能（进入中断响应程序时由**<font color=#FF3030>硬件</font>**清零）</p><h3 id="SCON：串行口控制寄存器">SCON：串行口控制寄存器</h3><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613134819206.png" alt="image-20210613134819206"></p><p>SM0 SM1串行模式选择</p><p>SM2 多机通讯允许位：方式0时,此位应该为0；模式1时,当接收到停止位时,该位将置位；方式2或方式3时,当接收的第9位数据为1时,将置位</p><p>REN 串行接收允许位</p><p>TB8 在模式2和模式3中,将被发送数据的第9位</p><p>RB8：在方式0中, 不起作用；在方式1中该位为接收数据的停止位；在方式2和方式3 中为接收数据的第9位。</p><p>📢📢：<strong><font color=#FF3030>TI</font></strong> 串行发送结束标志，只能由**<font color=#FF3030>软件</font>** 清零</p><p>​**<font color=#FF3030>RI </font><strong>串行接收结束标志，只能由</strong><font color=#FF3030>软件</font>**清零</p><h3 id="MCS-51的中断控制系统">MCS-51的中断控制系统</h3><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613135239736.png" alt="image-20210613135239736"></p><h1>中断的控制</h1><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613135415257.png" alt="image-20210613135415257"></p><p><strong><font color=#FF3030>EA – 全局使能</font></strong></p><p>EX0 – 外部中断0使能</p><p>ET0 – 定时计数器溢出中断0使能</p><p>EX1 – 外部中断1使能</p><p>ET1 – 定时计数器溢出中断1使能</p><p>ES  – 串口中断使能</p><p>📌记忆：</p><p><strong>记忆：</strong></p><p>X – E**<font color=#FF3030>x</font>** ternal <strong>外部中断</strong></p><p>T – **<font color=#FF3030>T</font>**ime <strong>定时器计数器中断</strong></p><p>S – **<font color=#FF3030>S</font>**erial Port <strong>串口中断</strong></p><p><strong><font color=#FF3030>1 – 使能； 0 – 禁止</font></strong></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613140442651.png" alt="image-20210613140442651"></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613143521508.png" alt="image-20210613143521508"></p><p><strong><font color=#FF3030>1 – 高优先级；0 – 低优先级</font></strong></p><h1>8051单片机中断的优先级</h1><p><strong>8051单片机有可编程的两个</strong><font color=#FF3030>中断优先级</font>**，即可实现二级中断服务嵌套。每个中断源的中断优先级都是由中断优先级寄存器IP中的相应位的状态来规定的。<br>**<font color=#FF0880>（软件优先级）</font></p><p>**同一时刻同一优先级中的中断申请不止一个时，则有<font color=#FF3030>中断优先权</font>排队问题。同一优先级的中断优先权排队，由中断系统硬件查询机制确定的自然优先级形成。<br>**<font color=#FF0880>（硬件查询排序）</font></p><h2 id="8051单片机的中断优先级控制的三条原则：">8051单片机的中断优先级控制的三条原则：</h2><p>1、正在进行的中断过程<font color=#FF3030>不能被新的同级或低优先级的中断请求所中断</font>。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613144218153.png" alt="image-20210613144218153"></p><p>2、正在进行的低优先级中断服务，能被<font color=#FF3030>较高优先级中断请求所中断</font>。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613144325453.png" alt="image-20210613144325453"></p><p>3、CPU同时接收到几个中断时，<font color=#FF3030>首先响应优先级别最高的中断请求</font>。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613144426677.png" alt="image-20210613144426677"></p><h2 id="中断的硬件排序">中断的硬件排序</h2><p>**<font color=#FF3030>硬件排序</font>**是由单片机内部硬件的中断查询机制确定的，它是固定不变的。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613144620508.png" alt="image-20210613144620508"></p><h1>8051单片机中断的响应过程</h1><p><strong>CPU在每个机器周期的S5P2时刻扫描中断标志</strong></p><p>阻止条件：</p><p>（1）CPU正在处理同级的或者高一级的中断；</p><p>（2）当前机器周期不是当前所执行指令的最后一个机器周期；</p><p>（3）当前正在执行的指令是RETI指令或是对IE或者IP的读写指令</p><p>中断标志扫描结果不保留，每个周期都重新扫描</p><p>保存断点  →  调用 →  恢复断点</p><h1>8051外部中断</h1><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613145017494.png" alt="image-20210613145017494"></p><p>如果外部中断输入引脚检测到如下信号：</p><p><strong><font color=#FF3030>下降沿</font></strong>（当IT0=1时）</p><p><strong><font color=#FF3030>低电平</font></strong>（当IT0=0时）</p><p>则相应中断标志将被自动置位，即IE0=1。CPU在S5P2时刻检测到中断标志位后，如果中断使能，并且没有阻止条件存在，将调用相应的中断服务函数，同时清除中断标志，执行完毕后返回原程序继续执行。</p><p><strong>1</strong>、<strong><font color=#FF3030>低电平触发方式</font></strong></p><p>外部中断申请触发器的状态随着CPU在每个机器周期采样到的外部中断输入引脚的电平变化而变化。</p><p>在<font color=#FF0880><strong>中断服务程序返回之前</strong>，<strong>外中断请求输入必须无效</strong></font>（即外部中断请求输入已由低电平变为高电平），否则会再次响应中断。</p><p>所以本方式<strong>适合于</strong>外部中断<strong>以低电平输入</strong>且中断服务程序能<strong>清除外部中断请求源</strong>（即外中断输入电平又变为高电平）的情况。</p><p><strong>2</strong>、<strong><font color=#FF3030>下降沿触发方式</font></strong></p><p>外部中断申请触发器能<font color=#FF0880>锁存外部中断输入线上的</font><strong>负跳变</strong>。即使不能响应，中断请求标志不丢失。</p><p>相继连续两次采样，一个机器周期为高，下一个机器周期采样为低，则中断申请触发器置1，直到CPU响应此中断时，才。</p><p>输入的负脉冲宽度至少保持12个时钟周期，才能被采样到。适合于以负脉冲形式输入的外部中断请求。</p><h2 id="中断标志的可靠产生">中断标志的可靠产生</h2><ul><li>下降沿（当IT0=1时）</li></ul><p>高电平持续时间 &gt;= 1个机器周期</p><p>低电平持续时间 &gt;= 1个机器周期</p><ul><li>低电平（当IT0=0时）</li></ul><p>低电平持续时间 &gt;= 1个机器周期</p><p>📢📢：针对**<font color=#FF3030>低电平触发</font>**方式，应当注意避免不必要的多次响应</p><h2 id="中断请求的撤销">中断请求的撤销</h2><ul><li>外部中断</li></ul><p>进入中断响应函数时**<font color=#FF3030>自动清除</font>**。（注意低电平方式）</p><ul><li>定时器中断</li></ul><p>进入中断响应函数时**<font color=#FF3030>自动清除</font>**。</p><ul><li>串口中断</li></ul><p>响应串行口的中断后，CPU无法知道是接收中断还是发送中断，还需测试这两个中断标志位，以<strong>判定是接收操作还是发送操作</strong>，然后才清除。所以串行口中断请求的撤销<strong>只能使用</strong><font color=#FF3030>软件</font>的方法，在中断服务程序中进行的。</p><h1>8051单片机的中断响应时间</h1><ul><li>最短响应时间</li></ul><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613150513979.png" alt="image-20210613150513979"></p><p>实际考虑阻止条件，中断响应时间总是在<font color=#FF3030>3~8</font>个机器周期<br><font color=#FF0880>（前提：不考虑中断嵌套）</font></p><h1>8051的中断响应函数与寄存器组</h1><p>为了满足在C语言源程序中直接编写中断服务程序的要求，C51编译器对函数的定义进行了扩展，增加了一个关键字**<font color=#FF3030>interrupt</font>** 。它是函数定义时的一个可选关键字，加上这个关键字即可将一个函数定义成中断服务函数。</p><p><strong>中断响应函数的定义格式为：</strong></p><p><strong><font color=#FF3030>返回值数据类型 函数名（形式参数表）[ interrupt n ]</font></strong></p><p>**关键字interrupt后面的n是<font color=#FF3030>中断号</font> <strong>。编译器根据中断号计算</strong><font color=#FF3030>中断号向量</font> <strong>，具体的中断号n和中断向量取决于单片机芯片型号，<strong>8051</strong>单片机中断向量为</strong><font color=#FF3030>8n+3</font> **。</p><table><thead><tr><th>中断号n</th><th>中断源</th><th>中断向量8n+3</th></tr></thead><tbody><tr><td>0</td><td>外部中断0</td><td>0003H</td></tr><tr><td>1</td><td>定时器0</td><td>000BH</td></tr><tr><td>2</td><td>外部中断1</td><td>0013H</td></tr><tr><td>3</td><td>定时器1</td><td>001BH</td></tr><tr><td>4</td><td>串行口</td><td>0023H</td></tr></tbody></table><p><strong>完整的中断响应函数的定义格式为：</strong></p><p><strong><font color=#FF3030>返回值数据类型 函数名（形式参数表）[ interrupt n ] [using n]</font></strong></p><p><strong>中断响应函数不需要返回值，因此返回值数据类型为void；</strong></p><p><strong>中断响应函数不能传递参数，因此形式参数表为空；</strong></p><p><strong><font color=#FF3030>中断响应函数一般不需要书写return语句</font>；</strong></p><p><strong><font color=#FF3030>中断响应函数一般使用第1~3组工作寄存器组，同一优先级的中断响应函数可以使用同一个工作寄存器组，不同优先级的中断响应函数最好使用不同的工作寄存器组</font>。</strong></p><p><strong>中断服务函数与寄存器的定义</strong></p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span>  <span class="title">INT0_ISR</span><span class="params">(<span class="keyword">void</span>)</span>     interrupt 0</span>&#123;   &#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span>  <span class="title">TIMER0_ISR</span><span class="params">(<span class="keyword">void</span>)</span>   interrupt 1    </span>&#123;   &#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span>  <span class="title">INT1_ISR</span><span class="params">(<span class="keyword">void</span>)</span>     interrupt 2  </span>&#123;   &#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span>  <span class="title">TIMER1_ISR</span><span class="params">(<span class="keyword">void</span>)</span>   interrupt 3    </span>&#123;   &#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span>  <span class="title">UART_ISR</span><span class="params">(<span class="keyword">void</span>)</span>     interrupt 4  </span>&#123;   &#125; </span><br></pre></td></tr></table></figure><p>例：</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">INT0_ISR</span> <span class="params">()</span> interrupt 0  <span class="keyword">using</span> 1 </span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>编程实例：</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;reg51.h&quot;</span></span></span><br><span class="line"><span class="comment">//C51 中断程序框架</span></span><br><span class="line"><span class="comment">/**********int0中断服务程序**********/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">INT0_ISR</span> <span class="params">(<span class="keyword">void</span>)</span> interrupt 0 <span class="keyword">using</span> 0</span></span><br><span class="line"><span class="function"></span>&#123;   <span class="comment">//中断服务程序 </span></span><br><span class="line">    <span class="comment">//……</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**********主函数*******************/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span> <span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;   IT0=<span class="number">1</span>;</span><br><span class="line">    EX0 = <span class="number">1</span>;     EA = <span class="number">1</span>;        <span class="comment">// 打开中断源</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)  ;                        <span class="comment">//等待中断</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1>中断资源的编程</h1><ul><li>中断方式</li></ul><p>使能中断，通过编写中断响应函数来完成对中断事件的处理。</p><p>中断标志的检查和中断响应函数的调用由硬件自动完成。</p><ul><li>查询方式</li></ul><p>不使能中断，通过编程查询中断标志位的方式来完成对中断事件的处理。</p><p>中断标志的检查有用户编程实现，中断事件的处理代码可以不书写在中断响应函数中。</p><h1>编程样例</h1><p>如图按下S0,对D0取反：查询方式、中断方式</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613160836556.png" alt="image-20210613160836556"></p><h2 id="查询方式">查询方式</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;reg51.h&quot;</span></span></span><br><span class="line">sbit S0=P3^<span class="number">2</span>;</span><br><span class="line">sbit D0=P0^<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    bit pre_S0=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">     <span class="keyword">if</span>(pre_S0==<span class="number">1</span>&amp;&amp;S0==<span class="number">0</span>)<span class="comment">//S0按下</span></span><br><span class="line">        &#123;</span><br><span class="line">            D0=~D0;</span><br><span class="line">        &#125;</span><br><span class="line">        pre_S0=S0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>查询方式存在的问题：实时性</p><h2 id="中断扩充1——定时器">中断扩充1——定时器</h2><ul><li>定时器中断作为外部中断使用</li></ul><p>把8051的T0 、T1用作对外部脉冲计数方式。每当P3.4（T0）或P3.5（T1）引脚上发生负跳变时， T0、T1计数器加1。利用这个特性，可以把P3.4和P3.5引脚作为外部中断请求输入线，而定时器的溢出中断作为外部中断请求标志。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613161828627.png" alt="image-20210613161828627"></p><ul><li>定时器中断作为外部中断使用（软件）</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*定时器T1对外部计数*/</span></span><br><span class="line"><span class="comment">/*TH1、TL1采用16进制赋值*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">T1_ISR</span><span class="params">(<span class="keyword">void</span>)</span> interrupt 3</span></span><br><span class="line">｛</span><br><span class="line">   <span class="comment">/*中断服务程序*/</span></span><br><span class="line"> ｝</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;  TMOD=（TMOD&amp;<span class="number">0x0f</span>)|<span class="number">0x60</span>;</span><br><span class="line">   ET1=<span class="number">1</span>;   EA=<span class="number">1</span>;   TR1=<span class="number">1</span>;</span><br><span class="line">   TH1=<span class="number">0xFF</span>;  </span><br><span class="line">   TL1=<span class="number">0xFF</span>;  </span><br><span class="line">   <span class="keyword">while</span>(<span class="number">1</span>);</span><br><span class="line">｝</span><br></pre></td></tr></table></figure><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613161947775.png" alt="image-20210613161947775"></p><h2 id="中断扩充2——中断查询">中断扩充2——中断查询</h2><ul><li>中断和查询结合的方式</li></ul><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613162040724.png" alt="image-20210613162040724"></p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;reg51.h&quot;</span></span></span><br><span class="line">sbit INA=P1^<span class="number">0</span>;</span><br><span class="line">sbit INB=P1^<span class="number">1</span>;</span><br><span class="line">sbit INC=P1^<span class="number">2</span>;</span><br><span class="line">sbit IND=P1^<span class="number">3</span>;</span><br><span class="line">sbit OUTA=P2^<span class="number">0</span>;</span><br><span class="line">sbit OUTB=P2^<span class="number">1</span>;</span><br><span class="line">sbit OUTC=P2^<span class="number">2</span>;</span><br><span class="line">sbit OUTD=P2^<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">OUTA=<span class="number">1</span>;OUTB=<span class="number">1</span>;OUTC=<span class="number">1</span>;OUTD=<span class="number">1</span>;</span><br><span class="line">IT0=<span class="number">1</span>;</span><br><span class="line">IT1=<span class="number">1</span>;</span><br><span class="line">EX0=<span class="number">1</span>;</span><br><span class="line">EX1=<span class="number">1</span>;</span><br><span class="line">EA=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//wait;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">INT0_ISR</span><span class="params">(<span class="keyword">void</span>)</span> interrupt 0</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">EX1=<span class="number">1</span>;</span><br><span class="line">IE1=<span class="number">0</span>;</span><br><span class="line">OUTA=<span class="number">1</span>;OUTB=<span class="number">1</span>;OUTC=<span class="number">1</span>;OUTD=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">INT1_ISR</span><span class="params">(<span class="keyword">void</span>)</span> interrupt 2</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">EX1=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(INA==<span class="number">0</span>)   &#123;OUTA=<span class="number">0</span>;OUTB=<span class="number">1</span>;OUTC=<span class="number">1</span>;OUTD=<span class="number">1</span>;&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(INB==<span class="number">0</span>)&#123;OUTA=<span class="number">1</span>;OUTB=<span class="number">0</span>;OUTC=<span class="number">1</span>;OUTD=<span class="number">1</span>;&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(INC==<span class="number">0</span>)&#123;OUTA=<span class="number">1</span>;OUTB=<span class="number">1</span>;OUTC=<span class="number">0</span>;OUTD=<span class="number">1</span>;&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(IND==<span class="number">0</span>)&#123;OUTA=<span class="number">1</span>;OUTB=<span class="number">1</span>;OUTC=<span class="number">1</span>;OUTD=<span class="number">0</span>;&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="中断扩充3——利用硬件扩充多个中断源">中断扩充3——利用硬件扩充多个中断源</h2><p><strong>采用一个8/3优先编码器74LS148，把多个中断源信号作为一个中断效果很好。</strong></p><p>I7-I0<strong>优先级逐步降低</strong></p><p>GS<strong>为标志位：判断是否有有效输入</strong></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210613162401987.png" alt="image-20210613162401987"></p><ul><li><strong>软件设计思路</strong></li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;reg51.h&gt;</span></span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> status;</span><br><span class="line">bit flag;</span><br><span class="line"><span class="keyword">void</span> int1（<span class="keyword">void</span>） interrupt <span class="number">2</span> <span class="keyword">using</span> <span class="number">2</span>  </span><br><span class="line">&#123;   </span><br><span class="line">    flag=<span class="number">1</span>;    <span class="comment">/*设置标志*/</span></span><br><span class="line">    status=P1; <span class="comment">/*存状态*/</span></span><br><span class="line"> &#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    PX1=<span class="number">1</span>;                     <span class="comment">/*置INT1高优先级中断*/</span></span><br><span class="line">    EX1=<span class="number">1</span>; EA=<span class="number">1</span>；              <span class="comment">/*INT1开中断，CPU开中断*/</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;   <span class="keyword">if</span>(flag)               <span class="comment">/*有中断*/</span></span><br><span class="line">        &#123; <span class="keyword">switch</span>(status)       <span class="comment">/*根据中断源分支*/</span></span><br><span class="line">          &#123;    </span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>: <span class="keyword">break</span>;  <span class="comment">/*处理0*/</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>: <span class="keyword">break</span>;  <span class="comment">/*处理1*/</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>: <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>: <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:;</span><br><span class="line">          &#125;</span><br><span class="line">         flag=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 个人笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Altium Designer新版本PCB电路板添加logo</title>
      <link href="post/3a110de8.html"/>
      <url>post/3a110de8.html</url>
      
        <content type="html"><![CDATA[<h1>前言</h1><p>这段时间可以说是不断的踩坑了，同时也有了不断进步的机会，这几天一直在完成学校老师布置的PCB实训任务，在完成原理图设计、封装管理、上次的边框定义以及电路布局连线全都完成后，就进入了收尾工作同时也是项目完美完成的终章，那么废话不多说，直接上干货。</p><h1>所需文件下载</h1><p>在老版本的Altium Designer 里有logo运行的脚本文件，那么新版本也想运用这个logo添加方法就需要进行下载，下面提供了脚本文件的下载链接：</p><p><a href="https://pan.baidu.com/s/1ee7laN8-j_pQrA2T8m3ZTA">点击此处即可下载</a>提取码：6666</p><h1>脚本文件下载及预览</h1><p>脚本文件我打包成了一个压缩包，下载解压下来文件夹具体内容如下：</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609222935336.png" alt="image-20210609222935336"></p><p>里面就包含了几个样例的logo图片以及.PRJSCR后缀的脚本文件。</p><p>注意📢📢📢：这里前情提要一下，Altium Designer 中需要用到logo的图片文件格式一定要bmp。</p><h1>添加PCB-LOGO</h1><ul><li>复制所下载下来的文件夹到软件所在安装目录</li></ul><p>这里以我的Altium Designer 16版本为例，将文件夹复制到Altium Designer 16安装目录里的Examples目录内</p><p>》》–Altium Designer 16》》–Examples</p><p>操作截图如下：</p><p>（1）、复制所要的文件夹</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609223836277.png" alt="image-20210609223836277"></p><p>（2）、黏贴到上面说的指定位置（这里以我的安装在D：盘里面的Altium Designer 16的Examples为例）</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609224025694.png" alt="image-20210609224025694"></p><ul><li>打开Altium Designer 16软件进行脚本运行</li></ul><p>（1）、首先点击软件左上角 <code>DXP</code>图标菜单</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609224258174.png" alt="image-20210609224258174"></p><p>（2）、点击运行 <code>Run Script</code>菜单</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609224528485.png" alt="image-20210609224528485"></p><p>（3）、出现操作对话框后点击<code>Browse</code></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609224634590.png" alt="image-20210609224634590"></p><p>（4）、找到刚刚放置脚本文件的位置，打开脚本文件</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609224735101.png" alt="image-20210609224735101"></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609224808563.png" alt="image-20210609224808563"></p><p>（5）、脚本文件打开，添加LOGO图片</p><p>这里鼠标左键双击下面图片所示的操作菜单栏</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609224931558.png" alt="image-20210609224931558"></p><p>这里软件会自动生成一个PcbDoc文件，同时这里用Load菜单添加对应LOGO文件</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609225016928.png" alt="image-20210609225016928"></p><p>这里利用测试用的bmp参考图片为例这里可以对应修改想要的比例，可以1：1，也可以调整放大</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609230254851.png" alt="image-20210609230254851"></p><p>（5）、这里可以通过所圈对话框进行生成LOGO所在的层面，这里以顶层丝印为例，</p><p>LOGO图片添加成功，等待加载生成</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609230059692.png" alt="image-20210609230059692"></p><p>这里可以看到已经生成了。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609230118352.png" alt="image-20210609230118352"></p><p>（6）、这里为了LOGO文件的整体移动可以将其生成一个“整体图标”，具体操作如下：</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609230159440.png" alt="image-20210609230159440"></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609230437248.png" alt="image-20210609230437248"></p><ul><li>这里可以将logo文件直接保存，在PCB电路板中直接添加了，但是要十分注意这里光标不要离丝印太远到时候移动不便。</li></ul><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609230745318.png" alt="image-20210609230745318"></p><h1>补充问题</h1><p>这里在添加LOGO的过程中，也踩了一些坑，老师提供的是jpg格式和png的格式，这里Altium Designer的软件只能识别BMP格式的图片文件，那么这里就需要用到画图软件，我们可以线用画图软件打开这个jpg或者png的格式文件。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609231045807.png" alt="image-20210609231045807"></p><p>通过另存为进行文件格式的修改，即可进行上面LOGO的添加步骤。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609231149733.png" alt="image-20210609231149733"></p><p>选择256位BMP或者24位BMP格式，保存即可。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210609231250462.png" alt="image-20210609231250462"></p>]]></content>
      
      
      
        <tags>
            
            <tag> Altium Design </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DXP 没有Redefine Board Shape的两种解决方法</title>
      <link href="post/6be88cef.html"/>
      <url>post/6be88cef.html</url>
      
        <content type="html"><![CDATA[<h1>前言</h1><p>昨儿在使用Altium Designer 16版本来进行电路CAD课程作业设计的时候，在画电路板的边框后进行重新定义板子形状的时候发现和老版本有些区别。</p><p>在DXP版本升级过程中，有些功能的使用发生了变化，尤其是本文主要介绍的redefine board shape功能。在新的版本里可能找不到重新定义板子形状的选项，并且和大家想象的也些出入。那么本篇文章主要介绍两种找不到redefine board shape的解决方法。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210608191316966.png" alt="image-20210608191316966"></p><h1>新版本找不到Redefine board Shape</h1><p>首先，创建一个新的PCBDOC文件，常见情况下新建后我们见到的都是黑色工作区。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210608191513799.png" alt="image-20210608191513799"></p><p>根据老版本软件的用法，我们通过：</p><p>设计（红框1）–板子形状（红框2）—Redefine Board Shape（红框3）；</p><p>但是显然我们没有在红框3中找到重新定义板子形状的选项。</p><p>注：这就是新版本的DXP的一种改变。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210608192418061.png" alt="image-20210608192418061"></p><h1>经典的解决办法</h1><p>第一步，在PCB绘制工作区内（黑色区域）内根据正常的画边框方法画好边框线后在工具栏中找到：查看（VIEW）（红框1）；点击其菜单下的：Board planning Mode（红框2）；</p><p>这里需要画上的边框线条为（Mechanical 1 Layer）同时为了电路元器件禁止布线层（Keep-Out Layer）也需要绘制上禁止布线边框。</p><p>🚧🚧注：这是最关键一步。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210608192718383.png" alt="image-20210608192718383"></p><p>第二步，此时板子颜色变成绿色。就会出现十字光标（红框1）；我们在所要的位置点选出恰当的点（红框2）；然后退出右键就可以重新定义板子形状。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210608193329167.png" alt="image-20210608193329167"></p><p>第三步，想要恢复到默认的PCB编辑界面也是很简单的；点击工具栏中的：VIEW（红框1）；进一步，点击其菜单下的切换到2维视图（红框2）；进一步，板子由绿色变成了常见的黑色（红框3）；</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210608194237475.png" alt="image-20210608194237475"></p><h1>快捷键法</h1><p>在Keep-Out-Layer层，做好了板子的外形，把外形都选中后，然后快捷键D-S-D即可.</p><p>注：快捷键法对于常用DXP的技术人员是好用的，但是偶尔用DXP的人很容易忘记快捷键。所以推荐经典方法。</p>]]></content>
      
      
      <categories>
          
          <category> 个人笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Altium Design </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>51单片机开发入门（3）-IO口应用</title>
      <link href="post/8d56968.html"/>
      <url>post/8d56968.html</url>
      
        <content type="html"><![CDATA[<h1>前言</h1><p>根据前面对51单片机的了解和基础理论知识的掌握，接下来就正式进入单片机开发——实践。引用最近几天追的电视剧《觉醒年代》里新文化领袖陈独秀、李大钊等革命前辈们一直在说的和在践行的马克思的一句话“实践是检验真理的唯一标准”。“理论基础决定上层建筑”这句话到哪儿都是适用的，同样在这里，在前续知识的了解和掌握就进入了程序编写以及电路调试等工程开展中，真正做到理论与实践结合，这里采用的是C语言来编写的51单片机开发程序，这里通篇可能出现一些不专业的话术和专业名词，这里希望看到文章的朋友仅把此文当作参考，对于存在错误的地方可在下方评论区进行留言或者私信博主允于指导和纠正。那么接下来进入我们的入门之旅。</p><h1>总体思维脑图</h1><p>这里我把这单片机入门具体应用分类绘制成了一张简易的思维脑图，可以通过预览这里的思维脑图建立大概的知识框架以及对应的整文目录预览以及后续的入门学习有个整体的学习思想，具体思维脑图如下：</p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530172238579.png" alt="image-20210530172238579" style="zoom: 80%;" /><h1>开发工具应用</h1><p>这里单片机的概念以及最小系统前面两篇文章已经介绍过了，这里就不再过多的赘述，这里在单片机实践开始之前，我们应该先想个事情，我们应该采用什么样的工具来辅助我们进行软件的开发，用上一款得心应手的工具软件对我们开发来说，那一定是事半功倍的。那么我先介绍一下几款要用的开发工具：</p><ul><li>编程开发工具——Keil</li><li>单片机电路仿真工具——Proteus</li><li>单片机电路原理图、PCB绘制工具——Altium Designer</li></ul><p>具体软件的安装包以及软件的安装教程这里可以在本博客进行搜索找到，对应的介绍也已经在文章中进行描述，可以自行前往了解，那么对于具体该怎么去操作利用，那么在接下来的时间以及文章篇幅允许下将进行具体的介绍，如果这篇文章没有，那么也不要灰心，对应软件的教程网络上一搜一大把，后期在我有时间的基础上我也将进行博文的描述或者进行录制视频来进行进一步的描述。</p><h1>IO控制应用</h1><p>从这里开始正式开始本篇博文的重点以及核心知识点。IO口在经过前面两张文章尤其第51单片机开发入门（2）的介绍已经比较完善，在51单片机里共计有四组单片机IO口，对应的功能、理论知识前面可以进行查阅。我们整篇文章将阐述怎么利用它，以及利用它来实现什么功能。</p><h1>一位输出：流水灯</h1><h2 id="电路功能分析">电路功能分析</h2><p>这里首先了解一位是指单片机指利用一组IO口进行操作，那么对应在最小系统基础上完成与8 个发光二极管的驱动电路设计；另外需要编写测试程序，实现循环点亮8 个灯，时间间隔约1 秒。</p><h3 id="硬件电路设计">硬件电路设计</h3><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210529194741874.png" alt="image-20210529194741874"></p><p>这里将每个LED发光二极管的阴极接到了对应的单片机P1端口上，同时每个LED发光二极管的阳极通过串联一个限流电阻连接到VCC（+5v）电源上。当P1端口输出为低电平时，LED点亮，反之LED熄灭。</p><h2 id="软件程序编写">软件程序编写</h2><p>在硬件电路完成的基础上，我们开始软件程序的编写，首先我们先梳理一下单片机是怎么工作的。单片机接通电源后，开始工作，P1端口依次输出低电平并且每次间隔1秒钟，轮流交替。那么程序编写方面该如何实现呢？我们接下来通过三种不同方法的程序来实现。</p><h3 id="第一种：位操作">第一种：位操作</h3><ul><li>第一步、确定LED的端口，定义单片机IO口</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*******LED位定义*********/</span></span><br><span class="line">sbit LED0=P1^<span class="number">0</span>;<span class="comment">//LED0位定义</span></span><br><span class="line">sbit LED1=P1^<span class="number">1</span>;<span class="comment">//LED1位定义</span></span><br><span class="line">sbit LED2=P1^<span class="number">2</span>;<span class="comment">//LED2位定义</span></span><br><span class="line">sbit LED3=P1^<span class="number">3</span>;<span class="comment">//LED3位定义</span></span><br><span class="line">sbit LED4=P1^<span class="number">4</span>;<span class="comment">//LED4位定义</span></span><br><span class="line">sbit LED5=P1^<span class="number">5</span>;<span class="comment">//LED5位定义</span></span><br><span class="line">sbit LED6=P1^<span class="number">6</span>;<span class="comment">//LED6位定义</span></span><br><span class="line">sbit LED7=P1^<span class="number">7</span>;<span class="comment">//LED7位定义</span></span><br></pre></td></tr></table></figure><ul><li>第二步、根据设计要求，编写延时函数</li></ul> <figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/******延时函数******/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> ms)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;ms;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">333</span>;j++);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里注意程序中编写的函数需要在程序中进行函数声明。</p><ul><li>第三步、根据设计要求，编写主函数程序</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/******位操作方式******/</span></span><br><span class="line"><span class="comment">/******主函数******/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">        LED0=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED0=<span class="number">1</span>;<span class="comment">//LED0点亮，其余熄灭</span></span><br><span class="line">        LED1=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED1=<span class="number">1</span>;<span class="comment">//LED1点亮，其余熄灭</span></span><br><span class="line">        LED2=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED2=<span class="number">1</span>;<span class="comment">//LED2点亮，其余熄灭</span></span><br><span class="line">        LED3=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED3=<span class="number">1</span>;<span class="comment">//LED3点亮，其余熄灭</span></span><br><span class="line">        LED4=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED4=<span class="number">1</span>;<span class="comment">//LED4点亮，其余熄灭</span></span><br><span class="line">        LED5=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED5=<span class="number">1</span>;<span class="comment">//LED5点亮，其余熄灭</span></span><br><span class="line">        LED6=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED6=<span class="number">1</span>;<span class="comment">//LED6点亮，其余熄灭</span></span><br><span class="line">        LED7=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED7=<span class="number">1</span>;<span class="comment">//LED7点亮，其余熄灭</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过while（1）{}死循环操作，使得单片机在一位一位的点亮和熄灭，但这里发现需要编写的变量比较多，虽然能够实现对应设计要求，但是看起来也比较复杂，可读性不强，程序在编写过程中也十分容易出错，所以我们在程序设计过程也要追求程序的简化，增强可读性，那么开始第二种方法。</p><h3 id="第二种：移位操作">第二种：移位操作</h3><ul><li>第一步、确定LED的端口，宏定义单片机的IO口</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span>LED P1;<span class="comment">//单片机LEDIO口宏定义</span></span></span><br></pre></td></tr></table></figure><p>这里也可以不用宏定义，直接在程序中写对应的IO号，但是最好养成习惯，在单片机程序编写过程中最好用宏定义，那么后期在更换IO口时只需要，在这里更改就可以了，而不用整个程序中去搜索更改对应的IO标号。</p><ul><li>第二步、根据设计要求，编写延时函数</li></ul><p>这里延时程序和上面第一种方法的函数一致，这里就不再重复，具体可以参考上面第一种方法的延时函数程序。</p><ul><li>第三步、根据设计要求，编写主函数程序</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/******移位操作方式******/</span></span><br><span class="line"><span class="comment">/******主函数******/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">char</span> temp=<span class="number">0xfe</span>,i;</span><br><span class="line">        temp=<span class="number">0xfe</span>;    <span class="comment">// 1111 1110</span></span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            LED=temp;</span><br><span class="line">            temp=(temp&lt;&lt;<span class="number">1</span>)+<span class="number">1</span>; <span class="comment">//1111 1101</span></span><br><span class="line">            delay_ms(<span class="number">1000</span>); <span class="comment">//延时1s    </span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里通过设定P0初始值为0xfe（1111 1110）通过每间隔1秒循环8次左移，完成程序设计要求。</p><h3 id="第三种：数组方式">第三种：数组方式</h3><ul><li>第一步、确定LED的端口，宏定义单片机的IO口</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span>LED P1;<span class="comment">//单片机LEDIO口宏定义</span></span></span><br></pre></td></tr></table></figure><p>这里也可以不用宏定义，直接在程序中写对应的IO号，但是最好养成习惯，在单片机程序编写过程中最好用宏定义，那么后期在更换IO口时只需要，在这里更改就可以了，而不用整个程序中去搜索更改对应的IO标号。</p><ul><li>第二步、变量定义</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****变量定义*****/</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> LED_DAT[<span class="number">8</span>]=&#123;<span class="number">0xfe</span>,<span class="number">0xfd</span>,<span class="number">0xfb</span>,<span class="number">0xf7</span>,<span class="number">0xef</span>,<span class="number">0xdf</span>,<span class="number">0xbf</span>,<span class="number">0x7f</span>&#125;;</span><br></pre></td></tr></table></figure><p>通过数组将8种状态所对应的字节归纳定义为数组变量。</p><ul><li>第三步、根据设计要求，编写延时函数</li></ul><p>这里延时程序和上面第一种方法的函数一致，这里就不再重复，具体可以参考上面第一种方法的延时函数程序。</p><ul><li>第四步、根据设计，要求编写主函数</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">char</span> i;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            LED=LED_DAT[I];</span><br><span class="line">            delay_ms(<span class="number">1000</span>); </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过数组种对应元素的变化，改变P1端口对应输出的字节，控制LED灯进行流水灯操作。</p><h2 id="烧录程序，仿真调试">烧录程序，仿真调试</h2><p>这里通过Proteus仿真工具根据电路原理图进行绘制对应的单片机最小系统以及所需要的外围电路，将前面编写的单片机程序编译生成的HEX文件烧录进单片机里，查看具体效果。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210529205911680.png" alt="image-20210529205911680"></p><p>整体程序整理：</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;reg51.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*****引脚定义*****/</span></span><br><span class="line">sbit LED0=P1^<span class="number">0</span>;</span><br><span class="line">sbit LED1=P1^<span class="number">1</span>;</span><br><span class="line">sbit LED2=P1^<span class="number">2</span>;</span><br><span class="line">sbit LED3=P1^<span class="number">3</span>;</span><br><span class="line">sbit LED4=P1^<span class="number">4</span>;</span><br><span class="line">sbit LED5=P1^<span class="number">5</span>;</span><br><span class="line">sbit LED6=P1^<span class="number">6</span>;</span><br><span class="line">sbit LED7=P1^<span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*****变量定义*****/</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> LED_DAT[<span class="number">8</span>]=&#123;<span class="number">0xfe</span>,<span class="number">0xfd</span>,<span class="number">0xfb</span>,<span class="number">0xf7</span>,<span class="number">0xef</span>,<span class="number">0xdf</span>,<span class="number">0xbf</span>,<span class="number">0x7f</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*****函数声明*****/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> ms)</span> </span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shagua</span><span class="params">()</span></span>;<span class="comment">//傻瓜方式</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shuzu</span><span class="params">()</span></span>;<span class="comment">//数组方式</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">yiwei</span><span class="params">()</span></span>;<span class="comment">//移位方式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*****主函数*****/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">shagua();</span><br><span class="line">yiwei();</span><br><span class="line">shuzu();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shagua</span><span class="params">()</span><span class="comment">//傻瓜方式</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LED0=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED0=<span class="number">1</span>;<span class="comment">//LED0点亮，其余熄灭</span></span><br><span class="line">    LED1=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED1=<span class="number">1</span>;<span class="comment">//LED1点亮，其余熄灭</span></span><br><span class="line">    LED2=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED2=<span class="number">1</span>;<span class="comment">//LED2点亮，其余熄灭</span></span><br><span class="line">    LED3=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED3=<span class="number">1</span>;<span class="comment">//LED3点亮，其余熄灭</span></span><br><span class="line">    LED4=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED4=<span class="number">1</span>;<span class="comment">//LED4点亮，其余熄灭</span></span><br><span class="line">    LED5=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED5=<span class="number">1</span>;<span class="comment">//LED5点亮，其余熄灭</span></span><br><span class="line">    LED6=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED6=<span class="number">1</span>;<span class="comment">//LED6点亮，其余熄灭</span></span><br><span class="line">    LED7=<span class="number">0</span>;delay_ms(<span class="number">1000</span>);LED7=<span class="number">1</span>;<span class="comment">//LED7点亮，其余熄灭</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shuzu</span><span class="params">()</span><span class="comment">//数组方式</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span> i;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">        P1=LED_DAT[i];</span><br><span class="line">        delay_ms(<span class="number">1000</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> yiwei()<span class="comment">//移位方式</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span> temp=<span class="number">0xfe</span>,i;</span><br><span class="line">    temp=<span class="number">0xfe</span>;    <span class="comment">// 1111 1110</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        P1=temp;</span><br><span class="line">        temp=(temp&lt;&lt;<span class="number">1</span>)+<span class="number">1</span>; <span class="comment">//1111 1101</span></span><br><span class="line">        delay_ms(<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******延时函数******/</span></span><br><span class="line"><span class="keyword">void</span> delay_ms(<span class="keyword">unsigned</span> <span class="keyword">char</span> ms)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;ms;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">333</span>;j++);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>一位输入：独立按键</h1><h2 id="电路功能分析-2">电路功能分析</h2><p>这里首先了解一位是指单片机指利用一组IO口进行操作，那么对应在最小系统基础上完成2个独立按键与8 个发光二极管的驱动电路设计；另外需要编写测试程序，实现实现按键控制循环点亮8 个灯，时间间隔约1 秒。</p><h2 id="硬件电路设计-2">硬件电路设计</h2><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210529223106503.png" alt="image-20210529223106503"></p><p>通过上图发现：这里将每个LED发光二极管的阴极接到了对应的单片机P1端口上，同时每个LED发光二极管的阳极通过串联一个限流电阻连接到VCC（+5v）电源上。当P1端口输出为低电平时，LED点亮，反之LED熄灭。</p><p>在上面LED流水灯的基础之上，引入添加了独立按键模块，根据电路设计要求，具体添加的按键模块，根据按键开关（非自锁开关）原理。当按键没有按下的时候，VCC（+5v）经过470欧姆限流电阻 输入进单片机的IO口，按键所对应的单片机IO口输入信号为高电平；当按键按下的时候，输入信号对地，这样子按键输入信号对地，即输入信号为低电平，单片机输入信号为低电平。通过高低电平检测，判断按键是否按下。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210529224040358.png" alt=""></p><h3 id="单独按键主要功能简化：">单独按键主要功能简化：</h3><p>按键K1按键时，P3.0输入为“0“；</p><p>按键K1松下时，P3.0输入为“1“。</p><p>图中，按键和电阻可以交换位置，交换后输入逻辑刚好相反。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210529225721797.png" alt="image-20210529225721797"></p><h3 id="按键抖动问题">按键抖动问题</h3><ul><li>按键抖动问题分析</li></ul><p>这里认识了解了按键单个按键的工作原理后，我们还需要了解<font color=#FF3030>按键抖动的影响 </font>：当用手按下一个按键时，往往所按按键在闭合位置和断开位置之间弹跳几下才会稳定到闭合状态；在释放一个按键时，也会出现类似的情况。这就是按键抖动。这是由机械结构的固有特性决定的，不可避免。</p><p>​     <strong>按键抖动的持续时间大小不一，一般在<font color=#FF3030>10ms </font>左右。</strong></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210529230310588.png" alt="image-20210529230310588"></p><ul><li><p>按键抖动问题举例</p><p>当存在按键抖动时，下面程序将**<font color=#FF3030>对抖动时的每一个下降沿进行计数</font>**，从而出错。因此应当采取一定的措施消除抖动的影响</p></li></ul><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210529230859768.png" alt="image-20210529230859768"></p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&lt;reg51.h&gt;</span></span></span><br><span class="line"><span class="meta"># <span class="meta-keyword">define</span>  uchar  unsigned char</span></span><br><span class="line">sbit  KEY = P2^<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">( )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">     uchar ucCounter；</span><br><span class="line">     uchar ucPreKey;</span><br><span class="line">     ucCounter = <span class="number">0x00</span>;<span class="comment">//计数初值</span></span><br><span class="line">     KEY = <span class="number">1</span>;<span class="comment">//准双向口</span></span><br><span class="line">     ucPreKey = <span class="number">1</span>;</span><br><span class="line">     <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="keyword">if</span> ((KEY==<span class="number">0</span>) &amp;&amp; (ucPreKey==<span class="number">1</span>))</span><br><span class="line">          &#123;</span><br><span class="line">             ucCounter++;<span class="comment">//计数值加一</span></span><br><span class="line">          &#125;</span><br><span class="line">          ucPreKey = KEY;<span class="comment">//存储前一状态</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>按键抖动问题消除方法</li></ul><p>要求消除按键抖动的影响，实现一次按键计数值只增加一次。</p><p><strong>实现方法：</strong></p><p>软件：延迟再扫描</p><p>硬件：外接额外电路 （触发器、滤波电路）</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&lt;reg51.h&gt;</span></span></span><br><span class="line"><span class="meta"># <span class="meta-keyword">define</span>  uchar  unsigned char</span></span><br><span class="line">sbit  KEY = P2^<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">( )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">     uchar ucCounter, ucPreKey ；</span><br><span class="line">     ucCounter = <span class="number">0x00</span>;<span class="comment">//计数初值</span></span><br><span class="line">     KEY = <span class="number">1</span>;<span class="comment">//准双向口</span></span><br><span class="line">     ucPreKey = <span class="number">1</span>;</span><br><span class="line">     <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="keyword">if</span> ((KEY==<span class="number">0</span>) &amp;&amp; (ucPreKey==<span class="number">1</span>))</span><br><span class="line">         &#123;</span><br><span class="line">             delay(<span class="number">2</span>);<span class="comment">//延时20ms</span></span><br><span class="line">             <span class="keyword">if</span>(KEY == <span class="number">0</span>)</span><br><span class="line">             &#123;</span><br><span class="line">                 ucCounter++;<span class="comment">//计数值加一</span></span><br><span class="line">             &#125; </span><br><span class="line">         &#125;</span><br><span class="line">         ucPreKey = KEY;<span class="comment">//存储前一状态</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="软件程序编写-2">软件程序编写</h2><p>在硬件电路完成的基础上，我们开始软件程序的编写，首先我们先梳理一下单片机是怎么工作的。单片机接通电源后，开始工作，两个独立按键在这里，一个按键按下时控制P1口所接的LED灯进行左移，另一个按键按下时控制P1口所接的LED灯右移，那么程序编写方面该如何实现呢？</p><ul><li>第一步、确定LED的端口，宏定义单片机的IO口以及确定两个独立按键的端口，位定义两个按键</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//独立按键管脚IO口定义</span></span><br><span class="line">sbit KEY1=P3^<span class="number">0</span>;</span><br><span class="line">sbit KEY2=P3^<span class="number">1</span>;</span><br><span class="line"><span class="comment">//8个LED灯端口宏定义</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LED P1</span></span><br></pre></td></tr></table></figure><ul><li>第二步、变量定义</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****变量定义*****/</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> LED_DAT[<span class="number">8</span>]=&#123;<span class="number">0xfe</span>,<span class="number">0xfd</span>,<span class="number">0xfb</span>,<span class="number">0xf7</span>,<span class="number">0xef</span>,<span class="number">0xdf</span>,<span class="number">0xbf</span>,<span class="number">0x7f</span>&#125;;</span><br></pre></td></tr></table></figure><p>通过数组将8种状态所对应的字节归纳定义为数组变量。</p><ul><li>第三步、根据设计要求，编写延时函数</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> ms)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;ms;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">333</span>;j++);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>第四步、根据设计要求，编写按键扫描函数</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span> <span class="title">key_scan</span><span class="params">()</span>    <span class="comment">//按键扫描函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> keynum;</span><br><span class="line">keynum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(KEY1==<span class="number">0</span>)<span class="comment">//按键1按下</span></span><br><span class="line">    &#123;</span><br><span class="line">        delay_ms(<span class="number">10</span>);     <span class="comment">//软件消除按键抖动</span></span><br><span class="line">        <span class="keyword">if</span>(KEY1==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(KEY1==<span class="number">1</span>);</span><br><span class="line">            keynum=<span class="number">1</span>;  <span class="comment">//按键1按下输出变量为1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(KEY2==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        delay_ms(<span class="number">10</span>);<span class="comment">//软件消除按键抖动</span></span><br><span class="line">        <span class="keyword">if</span>(KEY2==<span class="number">0</span>)<span class="comment">//按键2按下</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(KEY2==<span class="number">1</span>);</span><br><span class="line">            keynum=<span class="number">2</span>;  <span class="comment">//按键2按下输出变量为2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>(keynum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过按键扫描函数，当没有按键按下时，输出按键变量<font color=#FF3030>keynum=0</font>；当按键1按下时，输出按键变量<font color=#FF3030>keynum=1</font>；当按键2按下时，输出按键变量<font color=#FF3030>keynum=2</font>；这里按键进行延时消抖。</p><ul><li>第五步、根据设计要求，编写数组左移以及右移函数</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//******数组操作******// </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shuzu_you</span><span class="params">()</span><span class="comment">//数组方式_右移</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">char</span> i=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)<span class="comment">//循环右移</span></span><br><span class="line">&#123;</span><br><span class="line">P1=LED_DAT[i];</span><br><span class="line">delay_ms(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shuzu_zuo</span><span class="params">()</span><span class="comment">//数组方式_左移</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">char</span> n;</span><br><span class="line"><span class="keyword">for</span>(n=<span class="number">7</span>;n&gt;=<span class="number">0</span>;n--)<span class="comment">//循环左移</span></span><br><span class="line">&#123;</span><br><span class="line">P1=LED_DAT[n];</span><br><span class="line">delay_ms(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里先将数组的左移以及右移函数提前写好，到时候在主函数种可以进行调用，但是同时也可以在主函数中进行左移、右移操作，同时也可以进行添加相关头文件，直接调用函数进行左移、右移。</p><ul><li>第六步、根据设计要求，编写主函数</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(key_scan()==<span class="number">1</span>)  <span class="comment">//按键1按下</span></span><br><span class="line">&#123;</span><br><span class="line">shuzu_you(); <span class="comment">//执行右移函数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(key_scan()==<span class="number">2</span>) <span class="comment">//按键2按下</span></span><br><span class="line">&#123;</span><br><span class="line">shuzu_zuo(); <span class="comment">//执行左移函数</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面已经梳理清楚了独立按键控制8个LED左移流水灯以及右移流水灯，那么通过while（1）{}死循环将单片机一开始就先进行按键扫描，当按键没有任何操作的时候，按键值没有任何变化为0；当按键发生变化的时候，对应的按键值返回到键盘扫描函数，再根据if（）的判断函数或者可以利用Switch（）选择函数来进行编写后来实现具体的功能。</p><h2 id="烧录程序，仿真调试-2">烧录程序，仿真调试</h2><p>这里通过Proteus仿真工具根据电路原理图进行绘制对应的单片机最小系统以及所需要的外围电路，将前面编写的单片机程序编译生成的HEX文件烧录进单片机里，查看具体效果。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210529233900482.png" alt="image-20210529233900482"></p><p>整体程序梳理；</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;reg51.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//独立按键管脚IO口定义</span></span><br><span class="line">sbit KEY1=P3^<span class="number">0</span>;</span><br><span class="line">sbit KEY2=P3^<span class="number">1</span>;</span><br><span class="line"><span class="comment">//8个LED灯端口宏定义</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LED P1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*****函数声明*****/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shuzu_zuo</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shuzu_you</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span> <span class="title">key_scan</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> ms)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*****变量定义*****/</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> LED_DAT[<span class="number">8</span>]=&#123;<span class="number">0xfe</span>,<span class="number">0xfd</span>,<span class="number">0xfb</span>,<span class="number">0xf7</span>,<span class="number">0xef</span>,<span class="number">0xdf</span>,<span class="number">0xbf</span>,<span class="number">0x7f</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*****延时函数*****/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> ms)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;ms;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">333</span>;j++);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//******数组操作******// </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shuzu_you</span><span class="params">()</span><span class="comment">//数组方式_右移</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">char</span> i=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)<span class="comment">//循环右移</span></span><br><span class="line">&#123;</span><br><span class="line">P1=LED_DAT[i];</span><br><span class="line">delay_ms(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shuzu_zuo</span><span class="params">()</span><span class="comment">//数组方式_左移</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">char</span> n;</span><br><span class="line"><span class="keyword">for</span>(n=<span class="number">7</span>;n&gt;=<span class="number">0</span>;n--)<span class="comment">//循环左移</span></span><br><span class="line">&#123;</span><br><span class="line">P1=LED_DAT[n];</span><br><span class="line">delay_ms(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span> <span class="title">key_scan</span><span class="params">()</span>    <span class="comment">//按键扫描函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> keynum;</span><br><span class="line">keynum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(KEY1==<span class="number">0</span>)<span class="comment">//按键1按下</span></span><br><span class="line">    &#123;</span><br><span class="line">        delay_ms(<span class="number">10</span>);     <span class="comment">//软件消除按键抖动</span></span><br><span class="line">        <span class="keyword">if</span>(KEY1==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(KEY1==<span class="number">1</span>);</span><br><span class="line">            keynum=<span class="number">1</span>;  <span class="comment">//按键1按下输出变量为1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(KEY2==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        delay_ms(<span class="number">10</span>);<span class="comment">//软件消除按键抖动</span></span><br><span class="line">        <span class="keyword">if</span>(KEY2==<span class="number">0</span>)<span class="comment">//按键2按下</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(KEY2==<span class="number">1</span>);</span><br><span class="line">            keynum=<span class="number">2</span>;  <span class="comment">//按键2按下输出变量为2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>(keynum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(key_scan()==<span class="number">1</span>)  <span class="comment">//按键1按下</span></span><br><span class="line">&#123;</span><br><span class="line">shuzu_you(); <span class="comment">//执行右移函数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(key_scan()==<span class="number">2</span>) <span class="comment">//按键2按下</span></span><br><span class="line">&#123;</span><br><span class="line">shuzu_zuo(); <span class="comment">//执行左移函数</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>多位输出：数码管</h1><p>数码管：由发光二极管阵列构成。用于显示数字和简单英文字符。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530103128115.png" alt="image-20210530103128115"></p><h2 id="数码管的工作原理">数码管的工作原理</h2><ul><li>数码管的结构</li></ul><p>共阳极数码管</p><p>共阴极数码管</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530104142680.png" alt="image-20210530104142680"></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530104236551.png" alt="image-20210530104236551"></p><ul><li>数码管的显示</li></ul><p>段码，数码管显示的内容：</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530104337742.png" alt="image-20210530104337742"></p><p>位码，（即com端）数码管是否点亮</p><ul><li>数码管的段码分析（以共阴极数码管为例）</li></ul><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530104500992.png" alt="image-20210530104500992"></p><p>上方图片即为共阴极数码管的段选表，通过不同段位的电平情况，显示不同的字符。<font color=#FF3030>dp为小数点位</font></p><ul><li>多个数码管的控制</li></ul><p><font color=#FF3030>静态显示</font>，每个数码管单独控制，所有数码管同时点亮</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530104847053.png" alt="image-20210530104847053"></p><p>📌📌<font color=#FF3030>动态显示</font>，动态显示，段码共用，位码分别控制，每个数码管**<font color=#FF3030>循环点亮</font>**</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530104946687.png" alt="image-20210530104946687"></p><p>I／O端口1不断送待显示字符的段选码，I／O端口2不断送出不同的位扫描码，并使每位显示字符停留显示一段时间，一般为1ms～5ms，利用眼睛的视觉暂留，从显示器上便可以见到相当稳定的数字显示。</p><h2 id="单个数码管显示">单个数码管显示</h2><h3 id="电路功能分析-3">电路功能分析</h3><p>根据前面的数码管的基础原理的分析和学习，在51单片机足校系统的基础上添加单个共阴极数码管循环显示0-9对应的编码。</p><h3 id="硬件电路设计-3">硬件电路设计</h3><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530110125640.png" alt="image-20210530110125640"></p><p>这里在51单片机最小系统的基础上添加了一个<font color=#FF3030>共阴极数码管</font>，这里注意电路的连接，同时在该基础上，在单片机连接数码管的IO口上同时连接8个LED灯，以此来查看数码管编码发生变化时对应的各端口的变化情况。</p><p>📢（<font color=#FF3030>这里注意数码管段选端口以及LED端口接在P0端口上需要接上上拉电阻，这里采用8脚排阻</font>）</p><h3 id="软件程序编写-3">软件程序编写</h3><p>在硬件电路完成的基础上，我们开始软件程序的编写，首先我们先梳理一下单片机是怎么工作的。单片机接通电源后，开始工作，单片机IO口P0输出不同字节的电平，控制数码管段选端，那么程序编写方面该如何实现呢？</p><ul><li>第一步、确定LED的端口，宏定义单片机的IO口以及确定两个独立按键的端口，位定义两个按键</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//8个LED灯、单个数码管端口宏定义</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LED P1</span></span><br></pre></td></tr></table></figure><ul><li>第二步、变量定义</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> shumaguan[<span class="number">16</span>]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,<span class="number">0x6d</span>,</span><br><span class="line">                             <span class="number">0x7d</span>,<span class="number">0x07</span>,<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0x77</span>,<span class="number">0x7c</span>,</span><br><span class="line">                             <span class="number">0x39</span>,<span class="number">0x5e</span>,<span class="number">0x79</span>,<span class="number">0x71</span>&#125;; <span class="comment">//共阴数码管代码表&quot;0-F&quot;</span></span><br></pre></td></tr></table></figure><p>这里将共阴极数码管的段选表通过数组来记录下来，那么在下面数码管显示程序中只要通过选定数组中对应的元素即可显示相对应的数值。</p><ul><li>第三步、根据要求，编写延时函数</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> ms)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;ms;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">333</span>;j++);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里延时函数已经是老生常谈了，那么后面的延时函数我就不再过多的赘述。</p><ul><li>第四步、根据设计要求，编写主函数程序</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****主函数*****/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)   <span class="comment">//0~9顺序循环</span></span><br><span class="line">&#123;</span><br><span class="line">LED=shumaguan[i];</span><br><span class="line">delay(<span class="number">50000</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面已经梳理清楚了独立按键控制8个LED左移流水灯以及右移流水灯，那么这里数码管显示不同的字符也一样通过while（1）{}死循环将单片机一开始就通过for循环，依次从数组中0-9个元素依次循环选择，并且通过端口赋值，使得数码管循环显示不同的字符。编写后来实现具体的功能。</p><h3 id="烧录程序，仿真调试-3">烧录程序，仿真调试</h3><p>这里通过Proteus仿真工具根据电路原理图进行绘制对应的单片机最小系统以及所需要的外围电路，将前面编写的单片机程序编译生成的HEX文件烧录进单片机里，查看具体效果。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530110125640.png" alt="image-20210530110125640"></p><p>整体程序梳理如下：</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;reg51.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//8个LED灯、单个数码管端口宏定义</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LED P1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*****函数声明*****/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> ms)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*****变量定义*****/</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> shumaguan[<span class="number">16</span>]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,<span class="number">0x6d</span>,</span><br><span class="line">                             <span class="number">0x7d</span>,<span class="number">0x07</span>,<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0x77</span>,<span class="number">0x7c</span>,</span><br><span class="line">                             <span class="number">0x39</span>,<span class="number">0x5e</span>,<span class="number">0x79</span>,<span class="number">0x71</span>&#125;; <span class="comment">//共阴数码管代码表&quot;0-F&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*****延时函数*****/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> ms)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;ms;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">333</span>;j++);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*****主函数*****/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)   <span class="comment">//0~9顺序循环</span></span><br><span class="line">&#123;</span><br><span class="line">LED=shumaguan[i];</span><br><span class="line">delay_ms(<span class="number">5000</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="多位数码管显示">多位数码管显示</h2><h3 id="电路功能分析-4">电路功能分析</h3><p>添加多位数码管模块电路，利用单片机输出控制实现四位共阴极数码管循环0-9999；并且按键1按下显示1234，按键2按下恢复显示循环0-9999。</p><h3 id="硬件电路设计-4">硬件电路设计</h3><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530113450824.png" alt="image-20210530113450824"></p><p>这里首先分析一下三极管的段选端，这里段选端口接到单片机的P0端口上，这里和前面的单个数码管一样在P0端口需要接上上拉电阻。这里数码管的位选端口通过NPN三极管以及几个电阻组成了数码管的驱动电路，这里拿位选端口1举例来说，当位端口输出低电平时候，Q1NPN二极管截至，位选端1为低电平；当位端口输出高电平时候，Q1NPN二极管导通，位选端1为高电平。</p><p>同时按键电路的设计：当按键1按下时，单片机P3.0检测到电平变化，进行按键对应功能操作。当按键2按下时，单片机P3.1检测到电平变化恢复数码管循环0-9999显示。</p><p>📢（<font color=#FF3030>这里注意三极管采用的是NPN三极管</font>）</p><h3 id="软件程序编写-4">软件程序编写</h3><p>在硬件电路完成的基础上，我们开始软件程序的编写，首先我们先梳理一下单片机是怎么工作的。单片机接通电源后，开始工作，两个独立按键在这里，一个按键按下时控制数码管显示1234，另一个按键按下时控制数码管进行0-9999循环显示，那么程序编写方面该如何实现呢？</p><ul><li>第一步、确定 数码管的位选端口，宏定义单片机的段选 IO 口以及确定两个独立按键的端口，位定义两个按键</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****数码管段选宏定义*****/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SEG_Port P0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*****数码管位选管脚定义*****/</span></span><br><span class="line">sbit wei1=P2^<span class="number">0</span>;</span><br><span class="line">sbit wei2=P2^<span class="number">1</span>;</span><br><span class="line">sbit wei3=P2^<span class="number">2</span>;</span><br><span class="line">sbit wei4=P2^<span class="number">3</span>;</span><br><span class="line"><span class="comment">//按键端口定义</span></span><br><span class="line">sbit KEY1=P3^<span class="number">0</span>;</span><br><span class="line">sbit KEY2=P3^<span class="number">1</span>;</span><br></pre></td></tr></table></figure><ul><li>第二步、变量定义</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****变量定义*****/</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> shumaguan[<span class="number">16</span>]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,<span class="number">0x6d</span>,</span><br><span class="line">                             <span class="number">0x7d</span>,<span class="number">0x07</span>,<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0x77</span>,<span class="number">0x7c</span>,</span><br><span class="line">                             <span class="number">0x39</span>,<span class="number">0x5e</span>,<span class="number">0x79</span>,<span class="number">0x71</span>&#125;; <span class="comment">//共阴极数码管的段选表</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> dis_dat=<span class="number">0</span>;<span class="comment">//0-65535; 5535 -&gt; 0000</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> cnt=<span class="number">0</span>,stu_flag=<span class="number">0</span>;</span><br></pre></td></tr></table></figure><ul><li>第三步、根据设计要求，编写延时函数</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> ms)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;ms;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">333</span>;j++);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>第四步、根据设计要求，编写按键扫描函数</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****按键扫描函数函数****/</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span> <span class="title">key_scan</span><span class="params">()</span>    <span class="comment">//按键扫描函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> keynum;</span><br><span class="line">keynum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(KEY1==<span class="number">0</span>)<span class="comment">//按键1按下</span></span><br><span class="line">    &#123;</span><br><span class="line">        delay_ms(<span class="number">10</span>);     <span class="comment">//软件消除按键抖动</span></span><br><span class="line">        <span class="keyword">if</span>(KEY1==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(KEY1==<span class="number">1</span>);</span><br><span class="line">            keynum=<span class="number">1</span>;  <span class="comment">//按键1按下输出变量为1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(KEY2==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        delay_ms(<span class="number">10</span>);<span class="comment">//软件消除按键抖动</span></span><br><span class="line">        <span class="keyword">if</span>(KEY2==<span class="number">0</span>)<span class="comment">//按键2按下</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(KEY2==<span class="number">1</span>);</span><br><span class="line">            keynum=<span class="number">2</span>;  <span class="comment">//按键2按下输出变量为2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>(keynum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过按键扫描函数，当没有按键按下时，输出按键变量 keynum=0；当按键 1 按下时，输出按键变量 keynum=1；当按键 2 按下时，输出按键变量 keynum=2；这里按键进行延时消抖。</p><ul><li>第五步、根据设计要求，编写数码管显示函数（四位整数）</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****数码管显示函数****/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dis_seg</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> dat)</span><span class="comment">//显示四位整型数据的函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/*****千位*****/</span></span><br><span class="line">SEG_Port=shumaguan[dat/<span class="number">1000</span>];<span class="comment">//送段码到数码管</span></span><br><span class="line">wei1=<span class="number">0</span>;<span class="comment">//控制第一位数码管公共端截止</span></span><br><span class="line">delay_ms(<span class="number">3</span>);</span><br><span class="line">wei1=<span class="number">1</span>;</span><br><span class="line">SEG_Port=<span class="number">0xff</span>;<span class="comment">//消影</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*****百位*****/</span></span><br><span class="line">SEG_Port=shumaguan[dat/<span class="number">100</span>%<span class="number">10</span>];</span><br><span class="line">wei2=<span class="number">0</span>;</span><br><span class="line">delay_ms(<span class="number">3</span>);</span><br><span class="line">wei2=<span class="number">1</span>;</span><br><span class="line">SEG_Port=<span class="number">0xff</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*****十位*****/</span></span><br><span class="line">SEG_Port=shumaguan[dat/<span class="number">10</span>%<span class="number">10</span>];</span><br><span class="line">wei3=<span class="number">0</span>;</span><br><span class="line">delay_ms(<span class="number">3</span>);</span><br><span class="line">wei3=<span class="number">1</span>;</span><br><span class="line">SEG_Port=<span class="number">0xff</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*****个位*****/</span></span><br><span class="line">SEG_Port=shumaguan[dat%<span class="number">10</span>];</span><br><span class="line">wei4=<span class="number">0</span>;</span><br><span class="line">delay_ms(<span class="number">3</span>);</span><br><span class="line">wei4=<span class="number">1</span>;</span><br><span class="line">SEG_Port=<span class="number">0xff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里将四位数码管每一位的显示都利用求余和除法来计算得到，这里需要主要的是数码管动态显示，记得每一位都需要做<font color=#FF3030>消影处理</font>。</p><ul><li>第六步、根据整体设计要求，这里编写主函数调用函数</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">switch</span>(key_scan())<span class="comment">//按键扫描函数判断</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:stu_flag=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:stu_flag=<span class="number">0</span>;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(stu_flag==<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">dis_seg(<span class="number">1234</span>);<span class="comment">//按键1按下显示1234</span></span><br><span class="line">&#125;</span><br><span class="line">        <span class="keyword">else</span>  <span class="comment">//按键2按下恢复0-9999</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(cnt=<span class="number">0</span>;cnt&lt;<span class="number">10</span>;cnt++)</span><br><span class="line">&#123;</span><br><span class="line">dis_seg(dis_dat);</span><br><span class="line">&#125;</span><br><span class="line">dis_dat++;</span><br><span class="line">dis_dat%=<span class="number">10000</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在按键扫描函数以及数码管显示函数完成的情况下，这里只需要在主函数中调用即可，这里利用Switch语句来判断选择两个按键的功能，同时给每个按键对应的功能添加上去，并且根据题目要求需要添加0-9999循环显示，这里就利用for循环语句进行编写。至此，该多位数码管程序就全都完成了。</p><h3 id="烧录程序，仿真调试-4">烧录程序，仿真调试</h3><p>这里通过 Proteus 仿真工具根据电路原理图进行绘制对应的单片机最小系统以及所需要的外围电路，将前面编写的单片机程序编译生成的 HEX 文件烧录进单片机里，查看具体效果。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530113450824.png" alt=""></p><p>整体程序梳理；</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;reg51.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*****数码管段选宏定义*****/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SEG_Port P0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*****数码管位选管脚定义*****/</span></span><br><span class="line">sbit wei1=P2^<span class="number">0</span>;</span><br><span class="line">sbit wei2=P2^<span class="number">1</span>;</span><br><span class="line">sbit wei3=P2^<span class="number">2</span>;</span><br><span class="line">sbit wei4=P2^<span class="number">3</span>;</span><br><span class="line"><span class="comment">//按键端口定义</span></span><br><span class="line">sbit KEY1=P3^<span class="number">0</span>;</span><br><span class="line">sbit KEY2=P3^<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*****变量定义*****/</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> shumaguan[<span class="number">16</span>]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,<span class="number">0x6d</span>,</span><br><span class="line">                             <span class="number">0x7d</span>,<span class="number">0x07</span>,<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0x77</span>,<span class="number">0x7c</span>,</span><br><span class="line">                             <span class="number">0x39</span>,<span class="number">0x5e</span>,<span class="number">0x79</span>,<span class="number">0x71</span>&#125;; <span class="comment">//共阴极数码管的段选表</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> dis_dat=<span class="number">0</span>;<span class="comment">//0-65535; 5535 -&gt; 0000</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> cnt=<span class="number">0</span>,stu_flag=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*****函数声明*****/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dis_seg</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> dat)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span> <span class="title">key_scan</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*****延时函数****/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> ms)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;ms;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">333</span>;j++);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*****数码管显示函数****/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dis_seg</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> dat)</span><span class="comment">//显示四位整型数据的函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/*****千位*****/</span></span><br><span class="line">SEG_Port=shumaguan[dat/<span class="number">1000</span>];<span class="comment">//送段码到数码管</span></span><br><span class="line">wei1=<span class="number">0</span>;<span class="comment">//控制第一位数码管公共端截止</span></span><br><span class="line">delay_ms(<span class="number">3</span>);</span><br><span class="line">wei1=<span class="number">1</span>;</span><br><span class="line">SEG_Port=<span class="number">0xff</span>;<span class="comment">//消影</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*****百位*****/</span></span><br><span class="line">SEG_Port=shumaguan[dat/<span class="number">100</span>%<span class="number">10</span>];</span><br><span class="line">wei2=<span class="number">0</span>;</span><br><span class="line">delay_ms(<span class="number">3</span>);</span><br><span class="line">wei2=<span class="number">1</span>;</span><br><span class="line">SEG_Port=<span class="number">0xff</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*****十位*****/</span></span><br><span class="line">SEG_Port=shumaguan[dat/<span class="number">10</span>%<span class="number">10</span>];</span><br><span class="line">wei3=<span class="number">0</span>;</span><br><span class="line">delay_ms(<span class="number">3</span>);</span><br><span class="line">wei3=<span class="number">1</span>;</span><br><span class="line">SEG_Port=<span class="number">0xff</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*****个位*****/</span></span><br><span class="line">SEG_Port=shumaguan[dat%<span class="number">10</span>];</span><br><span class="line">wei4=<span class="number">0</span>;</span><br><span class="line">delay_ms(<span class="number">3</span>);</span><br><span class="line">wei4=<span class="number">1</span>;</span><br><span class="line">SEG_Port=<span class="number">0xff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*****按键扫描函数函数****/</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span> <span class="title">key_scan</span><span class="params">()</span>    <span class="comment">//按键扫描函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> keynum;</span><br><span class="line">keynum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(KEY1==<span class="number">0</span>)<span class="comment">//按键1按下</span></span><br><span class="line">    &#123;</span><br><span class="line">        delay_ms(<span class="number">10</span>);     <span class="comment">//软件消除按键抖动</span></span><br><span class="line">        <span class="keyword">if</span>(KEY1==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(KEY1==<span class="number">1</span>);</span><br><span class="line">            keynum=<span class="number">1</span>;  <span class="comment">//按键1按下输出变量为1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(KEY2==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        delay_ms(<span class="number">10</span>);<span class="comment">//软件消除按键抖动</span></span><br><span class="line">        <span class="keyword">if</span>(KEY2==<span class="number">0</span>)<span class="comment">//按键2按下</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(KEY2==<span class="number">1</span>);</span><br><span class="line">            keynum=<span class="number">2</span>;  <span class="comment">//按键2按下输出变量为2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>(keynum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">switch</span>(key_scan())<span class="comment">//按键扫描函数判断</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:stu_flag=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:stu_flag=<span class="number">0</span>;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(stu_flag==<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">dis_seg(<span class="number">1234</span>);<span class="comment">//按键1按下显示1234</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="comment">//按键2按下恢复0-9999</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(cnt=<span class="number">0</span>;cnt&lt;<span class="number">10</span>;cnt++)</span><br><span class="line">&#123;</span><br><span class="line">dis_seg(dis_dat);</span><br><span class="line">&#125;</span><br><span class="line">dis_dat++;</span><br><span class="line">dis_dat%=<span class="number">10000</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>多位输入：矩阵按键</h1><h2 id="行列式键盘的控制原理">行列式键盘的控制原理</h2><p>当单片机系统所需的按键数量比较多时，如果继续采用一个IO引脚控制一个按键的接口方式，所需的IO引脚较多；为了节约引脚资源，一般采用行列式键盘的接口方式。</p><p>如下图，需要控制16个按键。</p><p>如果采用行列式键盘只需要8个引脚就可以了。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530182835980.png" alt="image-20210530182835980"></p><h3 id="分析电路">分析电路</h3><p>当没有按键按下时</p><p><strong>列信号P1.4~P1.5</strong>输入均为**‘1’**</p><p>当有按键按下时</p><p><strong>如果行信号</strong>P1.0~P1.3<strong>输出为</strong>‘0’<strong>，则按键对应的列信号输入为****‘0’</strong>。</p><h3 id="编程思路">编程思路</h3><ul><li>行列式键盘的控制（扫描法）</li></ul><p>1、判断是否有按键按下</p><p>2、确定按下的是哪一个按键（确定按键代码）</p><p>🎯：简要来说就是确定行，确定坐标也就得到了所按下按键的坐标。</p><p>为了识别按键，必须对键盘中的按键进行编码，每一个按键都有一个确定的按键代码。如果使用非编码键盘，按键的编码方式可以由用户自由定义。</p><p>步骤如下：</p><p>1、全扫描：</p><p><strong>四行一起扫描，以判断是否有键按下；同时采用了延迟再扫描的方法进行消抖。</strong></p><p>2、逐行扫描：</p><p><strong>四行依次扫描，判断按键的行列位置；</strong></p><p>3、生成按键代码</p><p><strong>使用不同的编程语句可以生成不同的按键代码。</strong></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530183712053.png" alt="image-20210530183712053"></p><ul><li>行列式键盘的控制(线反转法)</li></ul><p><font color=#FF3030>扫描法</font>要逐列扫描查询，有时则要<font color=#FF3030>多次扫描</font>。而线反转法则很简练，无论被按键是处于第一列或最后一列，均<font color=#FF3030>只需经过两步</font>便能获得此按键所在的行列值</p><p>(1)<font color=#FF3030>让行线编程为输入线，列线编程为输出线</font> ，并使输出线输出为全低电平，则行线中电平由高变低的所在行为按键所在行。</p><p>(2) <font color=#FF3030>再把行线编程为输出线，列线编程为输入线</font>，并使输出线输出为全低电平，则列线中电平由高变低所在列为按键所在列。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530184108898.png" alt="image-20210530184108898"></p><p>典型编程：</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt; reg51.h &gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>   uchar    unsigned char</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>   uint    unsigned int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay</span><span class="params">(uchar ucData)</span></span>;</span><br><span class="line"><span class="function">uchar <span class="title">kbscan</span><span class="params">( )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">( )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    uchar key ;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        key = kbscan( ) ;<span class="comment">//扫描按键，获取按键代码</span></span><br><span class="line">        <span class="keyword">switch</span>( key )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0x00</span> :  … … ;      <span class="comment">//如果不按键,  …</span></span><br><span class="line">                <span class="keyword">break</span> ;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0x11</span> :  … … ;      <span class="comment">//如果按下键1, …</span></span><br><span class="line">                <span class="keyword">break</span> ;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0x21</span> :  … … ;      <span class="comment">//如果按下键2, …</span></span><br><span class="line">                <span class="keyword">break</span> ;</span><br><span class="line">                … … ;</span><br><span class="line">            <span class="keyword">default</span> : <span class="keyword">break</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="电路功能分析-5">电路功能分析</h2><p>采用 4*4 键盘与6 位共阴（CC：Common Cathode）数码管模拟一电话拨号与显示；</p><p>（1）、基本功能<br>没有按键时，数码管不显示；<br>按下 1 键，最低位显示，按住还是显示1；<br>松开后再按下 2，低两位显示12（要求有移位功能）；<br>依次类推实现 6 位拨号功能。</p><p>（2）、扩展功能<br>增加退格与修改功能</p><h2 id="硬件电路设计-5">硬件电路设计</h2><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530185238835.png" alt="image-20210530185238835"></p><p>这里通过将电路模块化处理，这里将电路分为三大部分。第一部分，51单片机最小系统，这里毋庸置疑；第二部分，输入部分——矩阵键盘以及第三部分输出部分——6位共阴极数码管以及其数码管驱动电路。</p><p>通过这样的细化后，我们就可以进行软件程序对应的编写。在此之前，我们先分析一下数码管驱动电路，分析一下数码管的段选端以及位选端口.这里采用的是6位共阴极数码管，那么对应的数码管位选端口也就是6个，那么这里位选端口直接接到了<font color=#FF3030>7406（六高压输出反相缓冲器）</font>上，再由7406的管脚接到单片机的P2端口上，同时将数码管的段选端口接到了单片机的P0端口。</p><h2 id="软件程序编写-5">软件程序编写</h2><p>在硬件电路完成的基础上，我们开始软件程序的编写，首先我们先梳理一下单片机是怎么工作的。程序也可以进行分模块编写，同时在我们日常程序的编写中也要注意，将程序进行模块编程，这样不仅方便我们及时查阅程序代码，同时便于我们及时调试修改程序，后期将出一篇文博文专门介绍模块化编程。</p><p>那我们书归正传，这里我根据题目设计要求，需要我们进行矩阵按键的处理以及数码管的输出控制，那么再程序方面我们也是分这么两个大方向，我们首先确定矩阵按键采用什么方法（扫描法还是线反转法），那么接下来就开始吧。</p><ul><li>根据题目要求，编写矩阵按键程序</li></ul><p>(KEY4X4.c)</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;key4x4.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;delay.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> j=<span class="number">0</span>; <span class="comment">//按键次数</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> str[<span class="number">7</span>];<span class="comment">//定义变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//扫描键盘，判断哪行那列有键按下</span></span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">keyscan</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line"> <span class="keyword">unsigned</span> <span class="keyword">char</span> temp;</span><br><span class="line">KEY_PORT=<span class="number">0xfe</span>;<span class="comment">//开始读取第一行</span></span><br><span class="line">temp=KEY_PORT;<span class="comment">//读取KEY_PORT口</span></span><br><span class="line">temp=temp&amp;<span class="number">0xf0</span>;<span class="comment">//判断是否有键按下按位相与</span></span><br><span class="line"><span class="keyword">if</span>(temp!=<span class="number">0xf0</span>)<span class="comment">//有键按下</span></span><br><span class="line">&#123;</span><br><span class="line">delay_ms(<span class="number">10</span>); <span class="comment">//按键消抖</span></span><br><span class="line">temp=KEY_PORT;</span><br><span class="line">temp=temp&amp;<span class="number">0xf0</span>;<span class="comment">//再次判断是否有键按下</span></span><br><span class="line"><span class="keyword">if</span>(temp!=<span class="number">0xf0</span>) <span class="comment">//有键按下</span></span><br><span class="line">&#123;</span><br><span class="line">temp=KEY_PORT;<span class="comment">//按键值赋值给temp变量</span></span><br><span class="line"><span class="keyword">switch</span>(temp)<span class="comment">//判断按键值</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span>(<span class="number">0xee</span>):str[j]=<span class="number">0</span>;j++; <span class="comment">//第一行第一列为&#x27;0&#x27; 键</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span>(<span class="number">0xde</span>):str[j]=<span class="number">1</span>;j++; <span class="comment">//第一行第二列为&#x27;1&#x27; 键</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span>(<span class="number">0xbe</span>):str[j]=<span class="number">2</span>;j++; <span class="comment">// 第一行第三列为&#x27;2&#x27; 键</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span>(<span class="number">0x7e</span>):str[j]=<span class="number">3</span>;j++;  <span class="comment">// 第一行第三列为&#x27;3&#x27; 键</span></span><br><span class="line"><span class="keyword">break</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(temp!=<span class="number">0xf0</span>) <span class="comment">//判断按键是否抬起，如果按键未抬起，while语句成立，再次读取KEY_PORT的值，进行判断，直至按键抬起，退出循坏</span></span><br><span class="line">&#123;</span><br><span class="line"> temp=KEY_PORT;   <span class="comment">//按键值赋值给temp变量</span></span><br><span class="line">temp=temp&amp;<span class="number">0xf0</span>;<span class="comment">//判断是否有键按下按位相与</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">KEY_PORT=<span class="number">0xfd</span>; <span class="comment">//开始读取第二行</span></span><br><span class="line">temp=KEY_PORT; <span class="comment">//读取KEY_PORT口</span></span><br><span class="line">temp=temp&amp;<span class="number">0xf0</span>;  </span><br><span class="line"><span class="keyword">if</span>(temp!=<span class="number">0xf0</span>)<span class="comment">//有键按下</span></span><br><span class="line">&#123;</span><br><span class="line">delay_ms(<span class="number">10</span>);<span class="comment">//按键消抖</span></span><br><span class="line">temp=KEY_PORT; <span class="comment">//按键值赋值给temp变量</span></span><br><span class="line">temp=temp&amp;<span class="number">0xf0</span>;</span><br><span class="line"><span class="keyword">if</span>(temp!=<span class="number">0xf0</span>)</span><br><span class="line">&#123;</span><br><span class="line">temp=KEY_PORT;</span><br><span class="line"><span class="keyword">switch</span>(temp)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span>(<span class="number">0xed</span>):str[j]=<span class="number">4</span>;j++;  <span class="comment">//第二行第一列为&#x27;4&#x27; 键</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span>(<span class="number">0xdd</span>):str[j]=<span class="number">5</span>;j++; <span class="comment">//第二行第二列为&#x27;5&#x27; 键</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span>(<span class="number">0xbd</span>):str[j]=<span class="number">6</span>;j++;   <span class="comment">//第二行第三列为&#x27;6&#x27; 键</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span>(<span class="number">0x7d</span>):str[j]=<span class="number">7</span>;j++;   <span class="comment">//第二行第四列为&#x27;7&#x27; 键</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(temp!=<span class="number">0xf0</span>)</span><br><span class="line"><span class="comment">//判断按键是否抬起，如果按键未抬起，while语句成立，再次读取KEY_PORT的值，进行判断，直至按键抬起，退出循坏</span></span><br><span class="line">&#123;</span><br><span class="line"> temp=KEY_PORT;</span><br><span class="line">temp=temp&amp;<span class="number">0xf0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">KEY_PORT=<span class="number">0xfb</span>;</span><br><span class="line">temp=KEY_PORT;</span><br><span class="line">temp=temp&amp;<span class="number">0xf0</span>;</span><br><span class="line"><span class="keyword">if</span>(temp!=<span class="number">0xf0</span>)</span><br><span class="line">&#123;</span><br><span class="line">delay_ms(<span class="number">10</span>);</span><br><span class="line">temp=KEY_PORT;</span><br><span class="line">temp=temp&amp;<span class="number">0xf0</span>;</span><br><span class="line"><span class="keyword">if</span>(temp!=<span class="number">0xf0</span>)</span><br><span class="line">&#123;</span><br><span class="line">temp=KEY_PORT;</span><br><span class="line"><span class="keyword">switch</span>(temp)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span>(<span class="number">0xeb</span>):str[j]=<span class="number">8</span>;j++;<span class="keyword">break</span>; <span class="comment">//第三行第一列为&#x27;8&#x27; 键</span></span><br><span class="line"><span class="keyword">case</span>(<span class="number">0xdb</span>):str[j]=<span class="number">9</span>;j++;<span class="keyword">break</span>; <span class="comment">//第三行第二列为&#x27;9&#x27; 键</span></span><br><span class="line"><span class="keyword">case</span>(<span class="number">0xbb</span>): <span class="keyword">if</span>(j&gt;<span class="number">0</span>) j=j<span class="number">-1</span>;<span class="keyword">break</span>;  <span class="comment">//第三行第三列为&#x27;退格&#x27; 键</span></span><br><span class="line"><span class="keyword">case</span>(<span class="number">0x7b</span>): j=<span class="number">0</span>;<span class="keyword">break</span>; <span class="comment">//第三行第四列为&#x27;清零&#x27; 键</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(temp!=<span class="number">0xf0</span>)  <span class="comment">//等待按键释放，未释放执行此程序</span></span><br><span class="line">&#123;</span><br><span class="line"> temp=KEY_PORT;  </span><br><span class="line">temp=temp&amp;<span class="number">0xf0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>先确定哪一行的按键发生了操作，开始读取第一行，读取KEY_PORT口。判断是否有键按下按位相与（这里0xf0），这里需要注意按键的消抖的处理，这里将按键产生的数值赋值给定义的变量。同时这里需要注意按键的长按的问题。判断按键是否抬起，如果按键未抬起，while语句成立，再次读取KEY_PORT的值，进行判断，直至按键抬起，退出循坏。通过确定行和列后，得到按键扫描的返回值进行对应功能的操作。这里通过每个按键定义返回的不同的数值，确定不同的功能。</p><p>(KEY4X4.h)</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _KEY4x4_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _KEY4x4_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;reg51.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//矩阵按键管脚IO口宏定义</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> KEY_PORT P3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*****函数声明*****/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">keyscan</span><span class="params">(<span class="keyword">void</span>)</span></span>;<span class="comment">//扫描键盘，判断哪行那列有键按下</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><p>这里对.h函数进行函数声明；进行矩阵按键管脚IO口宏定义</p><ul><li>根据题目要求，编写数码管程序</li></ul><p>(SEG.c)</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;seg.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;delay.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> j; <span class="comment">//调用按键次数</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> str[<span class="number">7</span>];<span class="comment">//调用数组变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//共阴极数码管段码表</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> code seg_dat[]=&#123;</span><br><span class="line"><span class="number">0x3f</span>,<span class="comment">/*0*/</span></span><br><span class="line"><span class="number">0x06</span>,<span class="comment">/*1*/</span></span><br><span class="line"><span class="number">0x5b</span>,<span class="comment">/*2*/</span></span><br><span class="line"><span class="number">0x4f</span>,<span class="comment">/*3*/</span></span><br><span class="line"><span class="number">0x66</span>,<span class="comment">/*4*/</span></span><br><span class="line"><span class="number">0x6d</span>,<span class="comment">/*5*/</span></span><br><span class="line"><span class="number">0x7d</span>,<span class="comment">/*6*/</span></span><br><span class="line"><span class="number">0x07</span>,<span class="comment">/*7*/</span></span><br><span class="line"><span class="number">0x7f</span>,<span class="comment">/*8*/</span></span><br><span class="line"><span class="number">0x6f</span>,<span class="comment">/*9*/</span>&#125;; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">void</span>)</span> <span class="comment">//数码管显示函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> i;</span><br><span class="line">Wei_PORT = <span class="number">0x00</span>;<span class="comment">//数码管位码线端口初始化</span></span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;j;i++)</span><br><span class="line">&#123;</span><br><span class="line">Wei_PORT=<span class="number">0x01</span>&lt;&lt;i;<span class="comment">//（左移）送位码(0x01,0x02,0x04,0x08,0x10,0x20)</span></span><br><span class="line">SEG_PORT=seg_dat[str[j-i<span class="number">-1</span>]]; <span class="comment">//str[]数组用来存储按键值，j-1-i作为指针指向seg_dat数组,保证之前输入的往左移</span></span><br><span class="line">delay_ms(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(j==<span class="number">7</span>) <span class="comment">//如果按键按下超过超过6位，也是数值显示位7位以上，显示最后按下的按键的值</span></span><br><span class="line">&#123;j=<span class="number">1</span>;</span><br><span class="line">str[<span class="number">0</span>]=str[<span class="number">6</span>];&#125;  <span class="comment">//按到第七个键时，重新从最低位开始</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(SEG.h)</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _SEG_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _SEG_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;reg51.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数码管管脚宏定义</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Wei_PORT P0   <span class="comment">//定义数码管位码线端口宏定义</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SEG_PORT P2<span class="comment">//定义数码管段码线端口宏定义</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*****函数声明*****/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">void</span>)</span></span>;<span class="comment">//数码管显示函数</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><p>这里对.h函数进行函数声明；进行矩阵数码管段选管脚IO口宏定义，同时定义数码管位选端口。</p><ul><li>根据设计要求，编写按键扫描函数</li></ul><p>(DELAY.c)</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;delay.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//延时函数（1）--1ms</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> ms)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;ms;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">333</span>;j++);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(DELAY.h)</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _DELAY_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _DELAY_H_</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*****函数声明*****/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> ms)</span></span>;<span class="comment">//延时函数</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>根据整体设计要求，这里编写主函数调用函数</li></ul><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;reg51.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;key4x4.h&quot;</span></span></span><br><span class="line"><span class="comment">//#include &quot;delay.h&quot;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;seg.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">keyscan();<span class="comment">//扫描键盘，判断哪行那列有键按下，返回按键次数以及存储数组str[]</span></span><br><span class="line">display();<span class="comment">//通过按键次数j，存储数组str[]，指向LED显示的段码数组</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里单片机一开机就先检测键盘具体情况，通过扫描键盘确定是哪行哪列按键按下，记录按键次数以及存储数组中，在通过数码管显示的函数，确定数码管的显示。</p><h2 id="烧录程序，仿真调试-5">烧录程序，仿真调试</h2><p>这里通过 Proteus 仿真工具根据电路原理图进行绘制对应的单片机最小系统以及所需要的外围电路，将前面编写的单片机程序编译生成的 HEX 文件烧录进单片机里，查看具体效果。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210530193743438.png" alt="image-20210530193743438"></p><h1>总结</h1><p>这里将IO口控制应用进行了分类，首先对一位输出进行阐述：流水灯控制，在流水灯控制方面采用了三种方法：复杂的进行一位一位控制；采用数组方式；采用移位操作方式。第二部分进行一位输入控制：独立按键，具体阐述了按键操作的工作原理以及独立按键存在的抖动问题，并且通过软件硬件的控制消去按键的抖动。第三部分介绍了多位输出数码管：这里也是分成了两大部分，单个数码管显示以及多位数码管显示，以及数码管的动静态显示。在上面按键的学习基础上对实验内容也进行了整合，通过样例进行了分析解释。最后把矩阵键盘原理进行了分析，以及经典电路，样例程序进行理解分析，对于矩阵键盘两种方法都进行了介绍，同时分析出各自的优缺点。和前面一样都用了一个经典的样例程序进行分析阐述。</p><p>到这里为止，IO口控制应用就先到这里了，后续将添加多位输出：LCD1602的显示控制，如果你认为文章中有什么问题和错误，可以在下方留言或者直接与我联系，我将第一时间回复以及纠正。同时如果你认为该片文章对你有什么帮助，可以点击下方打赏，对博主一点小奖励，恰波奶茶🥂🥂，你的打赏是对我最大的鼓励，谢谢。</p>]]></content>
      
      
      <categories>
          
          <category> 个人笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>51单片机开发入门（2）-内外特性</title>
      <link href="post/9e0646dd.html"/>
      <url>post/9e0646dd.html</url>
      
        <content type="html"><![CDATA[<h1>MCS-51单片机的外特性</h1><p><code>重要说明</code>:</p><p>MCS-51系列单片机是Intel公司的注册产品;</p><p>MCS-51系列包含8051、8031、8751等型号;</p><p>AT89系列单片机是ATMEL公司的注册产品;</p><p>AT89S51是AT89系列的一个型号;</p><p>AT89S51和MCS-51单片机的主要区别仅在内部ROM引脚完全兼容,内部主要结构完全一致，下图为AT89S51的芯片原理图。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526150048024.png" alt="image-20210526150048024"></p><h2 id="引脚说明">引脚说明</h2><p>电源引脚：VCC、GND</p><p>时钟电路引脚：XTAL1、XTAL2</p><p>控制信号引脚：RST、ALE/PROG、PSEN、EA/VPP</p><p>IO端口引脚：P0、P1、P2、P3</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526150454611.png" alt="image-20210526150454611"></p><h2 id="外部总线">外部总线</h2><p>地址总线（AB）：低8位P0、高8位P2</p><p>数据总线（DB）：P0分时复用</p><p>控制总线（CB）：4条控制线和P3部分引脚</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526150732725.png" alt="image-20210526150732725"></p><h1>MCS-51单片机的内部结构</h1><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526150916028.png" alt="image-20210526150916028"></p><h2 id="CPU和时序">CPU和时序</h2><p>CPU由运算部件、控制逻辑构成，CPU的正常工作需要用到部分SFR。</p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526151328145.png" alt="image-20210526151328145" style="zoom:67%;" /><p>控制部件是单片机的神经中枢，它由定时和控制电路、程序计数器PC，指令寄存器、指令译码器、地址指针等组成。</p><p>CPU执行指令的过程:控制电路从程序存储器中取出指令送到指令寄存器IR，然后指令译码器ID进行译码，再由控制电路发出相应的控制信号，完成指令功能。</p><p>时钟是单片机内部时序控制的基础，单片机的时钟产生有两种方式：一种是内部方式；一种是外部方式。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526151730956.png" alt="image-20210526151730956"></p><p>这里的外部时钟源一般采用石英晶体和电容组成<code>并联谐振回路</code>。</p><p>晶振：1.2MHz~12MHz之间选择（典型：6M、12M、11.0592M）</p><p>电容：50~30PF</p><p>在调试单片机系统时，可用示波器观察晶振引脚上的波形（正弦信号)来判断晶振电路是否正常起振。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526152109114.png" alt="image-20210526152109114"></p><p>机器周期是反映单片机执行速度的重要指标。</p><h2 id="存储器和存储地址空间">存储器和存储地址空间</h2><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526155153539.png" alt="image-20210526155153539"></p><p>这里存储器类型分为两种：<font color=#FF3030>程序存储器和数据存储器  </font>。</p><p>程序存储器：用来存放程序代码或常量等只需读取的程序或数据。常见ROM、EPROM、FlashROM。</p><p>数据存储器：用来可以存放需要读写的数据，常见SRAM。</p><p>8051单片机可以使用的存储空间在物理上分为4个部分：<font color=#FF3030>片内程序存储器、片内数据存储器以及片外程序存储器、片外数据存储器  </font>。</p><p>这里片内存储容量一般不大，尤其是RAM容量比较小；片外需要外接芯片，分别提供最大64KB的存储空间。</p><p>8051单片机可以使用的存储器在逻辑上分为3个逻辑地址空间进行管理:</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526153330498.png" alt="image-20210526153330498"></p><p><font color=#FF3030>通过设置EA引脚的电平来选择是使用片内ROM还是使用片外ROM  </font></p><h3 id="font-color-FF3030-片内外ROM-font"><font color=#FF3030>片内外ROM  </font></h3><p>ROM的部分地址保留给系统使用(C用户程序不应进入该区域)</p><p>000H-O002H是程序入口地址。复位后，CPU从O000H单元开始执行程序，这里一般存放一条跳转指令，跳转到用户编写的程序上。</p><p>0003H-002AH均匀地分为五段(8n+3)，用作中断服务程序的入口（一般用来存放跳转指令）。</p><h3 id="font-color-FF3030-片内外AM-font"><font color=#FF3030>片内外AM  </font></h3><p>片内RAM地址空间主要起两个作用:</p><p>映射内部资源所用的寄存器；存放程序运行所需要用的变量。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526154922827.png" alt="image-20210526154922827"></p><p>普通RAM区：供用户程序使用的普通RAM,大部分用户自定义变量都存放在这个地址范围。</p><p>按字节寻址:20H -2FH<br>按位寻址:00H -7FH</p><p>工作寄存器：4组x8字节，每组8个字节记为RO-R7，由PSW中的RSO和RS1来确定当前使用哪一组。</p><p>特殊功能寄存器区（SFR区）：</p><p>单片机所有片内资源的控制和访问寄存器均被称为SFR</p><p>为了方便访问和管理，单片机内部把SFR映射在片内RAM地址空间中的80H~FFH的地址范围内，用户程序中可以使用相应的地址通过内部总线对SFR进行访问，从而对单片机的片内资源进行控制。</p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526154404047.png" alt="image-20210526154404047" style="zoom:67%;" /><p><font color=#FF3030>位寻址空间  </font></p><p>针对单片机RAM空间较小的特点,单片机提供了位寻址空间供用户程序使用，该空间可以用来存放标志位等可以以位为单位进行寻址的数据。</p><p>位寻址空间位地址范围:00H~FFH</p><p>位寻址存储单元的分布:<br>字节地址为20H~2FH的存储单元位地址:00H~ 7FH<br>SFR中字节地址以0或8结尾的存储单元<br>位地址:80H ~FFH</p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526154808820.png" alt="image-20210526154808820" style="zoom:80%;" /><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526154829275.png" alt="image-20210526154829275" style="zoom:80%;" /><h3 id="font-color-FF3030-片外RAM-font"><font color=#FF3030>片外RAM  </font></h3><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526155027868.png" alt="image-20210526155027868"></p><p><font color=#FF3030>强调  </font>：这三个地址空间都是通过并行总线进行访问的</p><h2 id="I-O接口">I/O接口</h2><p>单片机的输入输出都是通过IO端口实现的。</p><p>AT89S51单片机有4组通用I/O端口,每组端口都是8位准双向口,共占32根引脚。每个端口都包括一个锁存器、一个输出驱动器和输入缓冲器。通常这4组端口表示为PO～P3。</p><h3 id="P0口的结构">P0口的结构</h3><p>PO口是一个双功能口:</p><p>普通I/O口（准双向口)</p><p>外部总线接口（数据/地址复用口)</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526155515876.png" alt="image-20210526155515876"></p><p>(一)功能一：作为<font color=#FF3030>普通I/O口  </font></p><p>输出时：CPU发出控制电平“0”封锁“与门”，将输出上拉场效应管T1截止，同时使多路开关MUX把锁存器与输出驱动场效应管T2栅极接通。故内部总线与PO口同相。由于输出驱动级是漏极开路电路若驱动NMOS或其它拉流负载时,需要外接上拉电阻。'PO的输出级可驱动8个LSTTL负载。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526155723682.png" alt="image-20210526155723682"></p><p>输入时：P0作为<font color=#FF3030>引脚和读锁存器 </font></p><p><font color=#FF3030>读引脚 </font>:由传送指令(MOV)实现;下面一个缓冲器用于读端口引脚数据,当执行一条由端口输入的指令时，读脉冲把该三态缓冲器打开，这样端口引脚上的数据经过缓冲器读入到内部总线。</p><p><font color=#FF3030>读锁存器 </font>:有些指令如:ANL PO，A称为“读-修改-写”指令，需要读锁存器。s上面一个缓冲器用于读端口锁存器数据。</p><p><font color=#FF3030>准双向口 </font>：在读入端口数据时,由于输出驱动FET并接在引脚上,如果T2导通,就会将输入的高电平拉成低电平,产生误读。所以在端口进行输入操作前,应先向端口锁存器写‘1’，使T2截止，引脚处于悬空状态,变为高阻抗输入。在输入操作前需要附加一个准备动作，这就是所谓的准双向口。</p><p>(二)功能二：作为<font color=#FF3030>地址/数据总线</font></p><p>这时多路开关‘控制’信号为‘1’，‘与门’解锁，‘与门’输出信号电平由“地址/数据”线信号决定;多路开关与反相器的输出端相连，地址信号经“地址/数据”线→反相器→T2场效应管栅极→T2漏极输出。</p><h3 id="P2口的结构">P2口的结构</h3><p>P2口是一个双功能口:普通IO口（准双向口)和外部总线接口(地址高8位)</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526161257568.png" alt="image-20210526161257568"></p><p>(一)功能一：作为<font color=#FF3030>普通I/O口  </font></p><p>CPU发出控制电平“O”，使多路开关MUX倒向锁存器输出Q端，构成一个准双向口。其功能与P1相同。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526161429243.png" alt="image-20210526161429243"></p><p>(二)功能二：作为<font color=#FF3030>地址总线高8位 </font></p><p>在系统扩展片外程序存储器扩展数据存储器且容量超过256B(用MOVX@DPTR指令)时，CPU发出控制电平“1”，使多路开关切换到内部地址线。P2输出高8位地址。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526161534154.png" alt="image-20210526161534154"></p><h3 id="P1口的结构">P1口的结构</h3><p>普通I/O口（准双向口）</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526161637620.png" alt="image-20210526161637620"></p><h3 id="P3口的结构">P3口的结构</h3><p>P3口是一个双功能口:普通I/O口（准双向口）以及第二功能</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526161736962.png" alt="image-20210526161736962"></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526161750082.png" alt="image-20210526161750082"></p><p>当对应内部资源使能时，P3端口相应引脚起第二功能作用，否则起普通IO作用</p><h3 id="端口总结">端口总结</h3><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526161931715.png" alt="image-20210526161931715"></p><h2 id="复位电路">复位电路</h2><h3 id="复位与复位电路">复位与复位电路</h3><p>所有单片机在启动运行前都需要进行复位。</p><p>复位的作用：</p><p>1、<font color=#FF3030>启动前复位</font>,使CPU和单片机中的其他资源处于一个确定的初始状态,并从这个状态开始工作。</p><p>2、<font color=#FF3030>运行过程中复位</font>,在单片机运行过程中，可能会由于种种原因如外界的干扰而进入死循环状态（跑飞）,这时也要求复位，从而使单片机重新开始正常工作。</p><h3 id="硬件复位和软件复位">硬件复位和软件复位</h3><p>硬件复位：通过外部复位引脚实现的复位功能。</p><p>软件复位：有些型号的单片机可以通过设置SFR中相应的标志位实现“受软件控制的复位”功能。</p><h1>总结</h1><p>到这里位置把MCS-51单片机的内部结构大概做了记录，内容还是有些死板空洞，接下来通过软件程序的编写以及硬件电路仿真来完善这一块的理解。这里IO口的第二功能尤其需要牢记以及定时器中断等功能使用仍需要进一步的完善。</p>]]></content>
      
      
      <categories>
          
          <category> 个人笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>51单片机开发入门（1）-单片机简介</title>
      <link href="post/8cb3e933.html"/>
      <url>post/8cb3e933.html</url>
      
        <content type="html"><![CDATA[<h1>单片机技术概括</h1><h2 id="何为单片机？单片机什么样子？">何为单片机？单片机什么样子？</h2><p>“单片机是是一种集成电路芯片，是采用超大规模集成电路技术把具有数据处理能力的中央处理器CPU、随机存储器RAM、只读存储器ROM、多种I/O口和中断系统、定时器/计数器等功能集成到一块硅片上构成的一个小而完善的微型计算机系统。具体封装外型如下：</p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526142259019.png" alt="image-20210526142259019" style="zoom:67%;" /><p>单片机是<code>单片微型计算机</code>的简称,最基本的单片机内核，包含微型计算机的基本功能模块。</p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526142703413.png" alt="image-20210526142703413" style="zoom: 50%;" /><img src="C:/Users/72803/AppData/Roaming/Typora/typora-user-images/image-20210526142748931.png" alt="image-20210526142748931" style="zoom:67%;" /><p>单片机主要用于测控系统中，突出的是<code>控制功能</code>，单片机内部往往还集成了许多的面向测控对象的接口电路，如下图所示：</p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526143127724.png" alt="image-20210526143127724" style="zoom:67%;" /><p>它和微型处理器有着很大的区别，具体对比用表格列举如下：</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526143158307.png" alt="image-20210526143158307"></p><h2 id="常用单片机介绍">常用单片机介绍</h2><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526143300036.png" alt="image-20210526143300036"></p><h2 id="8051单片机（目前国内应用的比较广泛的8位单片机）">8051单片机（目前国内应用的比较广泛的8位单片机）</h2><p>8051是一种8位元的<a href="https://baike.baidu.com/item/%E5%8D%95%E8%8A%AF%E7%89%87/12717589">单芯片</a><a href="https://baike.baidu.com/item/%E5%BE%AE%E6%8E%A7%E5%88%B6%E5%99%A8/6688343">微控制器</a>，属于MCS-51单芯片的一种，由<a href="https://baike.baidu.com/item/%E8%8B%B1%E7%89%B9%E5%B0%94">英特尔</a>公司于1981年制造。INTEL公司将MCS51的核心技术授权给了很多其它公司，所以有很多公司在做以8051为核心的单片机，如<a href="https://baike.baidu.com/item/Atmel">Atmel</a>、<a href="https://baike.baidu.com/item/%E9%A3%9E%E5%88%A9%E6%B5%A6/14316">飞利浦</a>、深联华等公司，相继开发了功能更多、更强大的兼容产品。</p><p>8051单芯片是同步式的顺序逻辑系统，整个系统的工作完全是依赖系统内部的时脉信号，用以来产生各种动作周期及同步信号。在<a href="https://baike.baidu.com/item/8051%E5%8D%95%E7%89%87%E6%9C%BA/10816098">8051单片机</a>中已内建时钟产生器，在使用时只需接上<a href="https://baike.baidu.com/item/%E7%9F%B3%E8%8B%B1%E6%99%B6%E4%BD%93%E8%B0%90%E6%8C%AF%E5%99%A8/4737418">石英晶体谐振器</a>（或其它振荡子）及<a href="https://baike.baidu.com/item/%E7%94%B5%E5%AE%B9/12031635">电容</a>，就可以让系统产生正确的时钟信号。</p><p>其他厂商也是依托于51内核进行研发拓展，其内部示意图如下：</p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210526143539348.png" alt="image-20210526143539348" style="zoom: 67%;" /><h1>单片机系统的开发流程</h1><h2 id="系统方案论证（系统设计）">系统方案论证（系统设计）</h2><ul><li>项目的可行性</li></ul><p>这个项目做的出来吗﹖有实用价值吗﹖预算是多少?</p><ul><li>系统实现方案的确定</li></ul><p>该系统的各个功能如何实现﹖是使用单片机呢、还是纯模拟电路呢、还是FPGA来实现﹖画出相应的系统框图。</p><ul><li>主要电路的确定和核心器件的选型</li></ul><p>这个测量功能适用什么样具体电路来实现呢﹖或者这个控制要求用什么样的驱动电路来实现呢﹖该电路对器件有什么要求﹖确定最重要的芯片的型号。</p><h2 id="硬件电路设计">硬件电路设计</h2><ul><li>设计目标</li></ul><p>印刷电路版图(PCB版图)</p><ul><li>工具软件</li></ul><p>Altium Designer、Protel DXPCandence PSD、Protel 99se、Protel DXPCandence PSD</p><ul><li>设计步骤</li></ul><p>电路模块设计，模块功能验证、原理图设计绘制、PCB设计</p><h1>软件设计</h1><ul><li>设计目标</li></ul><p>通过编写适当的代码，控制单片机实现指定的功能</p><ul><li>编程语言</li></ul><p>C语言</p><ul><li>编程环境</li></ul><p>Keil C51 uVision ( 8051单片机常用)</p><p>CodeWarrior IDE</p><p>IAR Systems</p><h1>系统调试</h1><ul><li>硬件调试</li></ul><p>判断硬件电路是否正常工作,是否达到预先设计的参数要求。</p><ul><li>软件调试</li></ul><p>寻找并修正软件BUG，使软件可以控制单片机实现预先设计的功能。这里可以采用将对应的程序烧录进单片机进行具体操作调试，也可以使用相关仿真软件进行仿真调试，这里通常采用<code>Proteus</code>。</p><h1>总结</h1><p>这里对以上单片机简单阐述后，就开始了单片机学习之旅的正式开始，在正式开始之前，确定自己学习的主要目的：</p><p>掌握8051单片机的内部结构；</p><p>掌握8051单片机基本内部资源（存储器、I/O、定时/计数器、外部中断、串行口等）的功能和控制方法；</p><p>掌握51单片机常用外部资源（键盘、显示、A/D、D/A等）的扩展方法；</p><p>熟悉单片机系统的开发流程</p>]]></content>
      
      
      <categories>
          
          <category> 个人笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>哥斯拉大战金刚1080p高清资源</title>
      <link href="post/5a35eda1.html"/>
      <url>post/5a35eda1.html</url>
      
        <content type="html"><![CDATA[<p>正在上映的影片，WEBDL版本，应该是哪里的在线点播泄露了，有电脑版就不会去影院看了，票房影响还是挺大的。</p><p>豆瓣评分6.7，看个画面吧，<a href="https://movie.douban.com/subject/26613692/">豆瓣链接</a></p><p>RARBG原版，7G，无中字：</p><p>magnet:?xt=urn:btih:8bfb9b2dcafe9efced9fca3232f3c25c5e989e43</p><p>4K，14.9G左右，无中字：</p><p>magnet:?xt=urn:btih:45138BF8561B9D892F99CD81B0C9B84699F97CC1</p><p>字幕：<a href="http://zmk.pw/subs/56662.html">http://zmk.pw/subs/56662.html</a></p><p>在线播放链接：<a href="https://xiaosp.ml/index.php?s=/vod-play-id-95405-sid-1-pid-1">https://xiaosp.ml/index.php?s=/vod-play-id-95405-sid-1-pid-1</a></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210402194912.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 影视推荐 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 哥斯拉VS金刚 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Protoues 8.7安装绿化</title>
      <link href="post/e2fde651.html"/>
      <url>post/e2fde651.html</url>
      
        <content type="html"><![CDATA[<h1>软件介绍</h1><p><strong>proteus8.7</strong>是一款EDA工具软件，由英国Lab Center Electronics公司出品。该软件的主要功能是PCB的仿真和设计。当然不仅仅如此，该软件还可以仿真单片机及外围器件，在这方面该软件有着非常不错的表现。从原理图布图、代码调试到单片机与外围电路协同仿真，一键切换到PCB设计，真正实现了从概念到产品的完整设计。是一款非常不错的EDA工具软件。今天带来的是<strong>proteus 8.7pro 汉化破解版</strong>，需要的朋友可以下载使用。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210402183751.png" alt=""></p><h1>准备工作</h1><p>系统环境：Windows操作系统<br>工具：软件安装包<a href="https://pan.baidu.com/s/1gZYYZTir8f2tizCEbqJmig">点击此处即可进行下载</a>提取码：6666</p><h1>安装破解教程</h1><ul><li><p>1、下载好数据包，解压压缩包，将会得到<code>汉化补丁文件夹、</code>破解文件文件夹<code>以及</code> P8.7.Sp3.exe`安装程序</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402184341870.png" alt="image-20210402184341870"></p></li><li><p>2、首先点击软件的安装程序——源文件<code>P8.7.Sp3.exe</code>.</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402184632195.png" alt="image-20210402184632195"></p></li><li><p>3、进入安装界面，点下一步继续</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402184810824.png" alt="image-20210402184810824"></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402184825278.png" alt="image-20210402184825278"></p></li><li><p>4、接受协议，点next</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402184933382.png" alt="image-20210402184933382"></p></li><li><p>5、选择我有一个 license key，也就是默认第一项</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402185005873.png" alt="image-20210402185005873"></p></li><li><p>6、继续点next</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402185034381.png" alt="image-20210402185034381"></p></li><li><p>7、进入key激活界面，我们选择下载的数据包接下来的<code>Proteus8.7</code>文件夹中的<code>Crack</code>文件夹内的 license key文件（建议将此文件保存到一个不易被删除的地方）</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402185228968.png" alt="image-20210402185228968"></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402185312352.png" alt="image-20210402185312352"></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402185341920.png" alt="image-20210402185341920"></p></li><li><p>8、添加进来后，点击<code>Install</code>进行破解补丁的安装，根据以下步骤，在弹出对话框时点击<code>是</code>，同时在Licence 管理器添加完成后，点击Close关闭以继续接下来的安装</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402185504993.png" alt="image-20210402185504993"></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402185524609.png" alt="image-20210402185524609"></p><p>这里注册文件添加完后，右边添加成功后，点击close</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402185616216.png" alt="image-20210402185616216"></p></li><li><p>9、默认，继续点next</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402185729353.png" alt="image-20210402185729353"></p></li><li><p>10、 这里选择<code>Custom</code>安装</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402185825763.png" alt="image-20210402185825763"></p></li><li><p>11、这里选择软件的安装目录以及软件数据的安装目录，这里我以我的E盘为例，现在你所想要安装的磁盘分区内新建一个<code>英文名文件夹(Proteus8.7)</code>,具体操作如下：</p><p><font color=###FF0000>!!!（这里一定要注意安装目录以及数据存放的目录选择一个目录即可，同时所有的安装路径，文件存放路径都不能采用中文来命名文件夹，切记） </font></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402190041839.png" alt="image-20210402190041839"></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402190055122.png" alt="image-20210402190055122"></p></li><li><p>12、安装目录和数据目录选择完后点击Next，这里保持默认，一直Next即可</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402190154283.png" alt="image-20210402190154283"></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402190217047.png" alt="image-20210402190217047"></p></li><li><p>13、点击<code>Install</code>安装等待即可</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402190259177.png" alt="image-20210402190259177"></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402190319337.png" alt="image-20210402190319337"></p></li><li><p>14、到这里软件已经安装完成，暂时不要点击启动软件，我们先将下载的数据包解压下来的<code>Crack</code>文件夹内的<code>Proteus 8 Professional</code>文件夹内的两个文件夹全选复制黏贴到软件的安装目录里 ，进行替换原来的数据文件</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402190631725.png" alt="image-20210402190631725"></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402190705291.png" alt="image-20210402190705291"></p></li><li><p>15、至此，proteus8.7破解版成功激活，用户可以无限制免费使用。，在About一栏可以查看到软件的注册成功。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402190757379.png" alt="image-20210402190757379"></p><h1>软件汉化</h1><p>但软件并不是中文界面，这里将软件包中的汉化补丁复制到软件安装目录下替换</p></li><li><p>1、找到汉化补丁包进行复制</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402191432538.png" alt="image-20210402191432538"></p></li><li><p>2、粘贴到安装目录里替换原先数据（如果之后还想切换为原本英文这里需要将安装目录下的文件夹进行备份）</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402191500581.png" alt="image-20210402191500581"></p></li><li><p>3、软件汉化成功，主界面如下：</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210402191605460.png" alt="image-20210402191605460"></p><h1>软件快捷键</h1><p><code>F8</code>：全部显示 当前工作区全部显示<br><code>F6</code>：放大以鼠标为中心放大<br><code>F7</code>：缩小以鼠标为中心缩小<br><code>G</code>：栅格开关栅格网格<br><code>Ctrl+F1</code>：栅格宽度0.1mm 显示栅格为0.1mm，在pcb的时候很有用<br><code>F2</code>：显示栅格为0.5mm，在pcb的时候很有用<br><code>F3</code>：显示栅格为1mm，在pcb的时候很有用<br><code>F4</code>： 显示栅格为2.5mm，在pcb的时候很有用<br><code>Ctrl+s</code>：打开关闭磁吸 磁吸用于对准一些点的，如引脚等等<br><code>x</code>：打开关闭定位坐标 显示一个大十字射线<br><code>m</code>：显示单位切换 mm和th之间的单位切换，在右下角显示<br><code>o</code>：重新设置原点 将鼠标指向的点设为原点<br><code>u</code>：撤销键<br><code>Pgdn</code>：改变图层<br><code>Pgup</code>：改变图层<br><code>Ctrl+Pgdn</code>：最底层<br><code>Ctrl+pgup</code>：最顶层<br><code>Ctrl+画线</code>：可以划曲线<br><code>R</code>：刷新<br><code>+ -</code>：旋转<br><code>F5</code>：重定位中心</p><h1>后记</h1><p>到这里你所需要的Protoues 8.7的安装绿化以及汉化的整体过程就都已经完成了，从现在开始你就可以开始你的电路设计以及电路的仿真，这里可以直接将单片机程序烧录给仿真软件中的单片机模拟实现对应功能，如果单片机编程以及电路绘制软件还有安装破解需求可以在本文下方推荐中打开或者在网页顶端进行关键词的搜索。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 嵌入式开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 电子产品设计开发 </tag>
            
            <tag> EDA工具 </tag>
            
            <tag> 单片机仿真 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>https网站无法正常访问，显示hsts相关协议</title>
      <link href="post/cf32848a.html"/>
      <url>post/cf32848a.html</url>
      
        <content type="html"><![CDATA[<h1>前言</h1><p>今天更新博客文章，一如往常的更新好推送部署访问https://www.little-demon.cn 的时候出现了相关hsts错误导致了无法正常网站，而且清理浏览器缓存后也无法正常访问。经过百度的搜索查找后，找到了解决方案，这里感谢大佬们的教程以及帮助支持，本文引用<a href="https://blog.csdn.net/qq_33633013/article/details/90438809">csdn-二黒黑黑技术</a>文章。</p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210321101346167.png" alt="image-20210321101346167" style="zoom:67%;" /><h1>步骤</h1><ul><li>1、这里我用的Micsoft Edge浏览器，在地址栏输入：edge://net-internals/#hsts</li></ul><p>百度上的教程都是针对Chrome浏览器，同样也是在地址栏输入：chrome://net-internals/#hsts</p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210321100743852.png" alt="image-20210321100743852" style="zoom: 67%;" /><ul><li><p>2、这里显然我的域名是有问题的，这里我们在下面Delete domain security policies 栏，在下面Domain对话框输入访问不正常的域名，点击Delete</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210321101042585.png" alt="image-20210321101042585"></p></li><li><p>3、 重新访问网站，网站访问正常</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210321101442392.png" alt="image-20210321101442392"></p><h1>问题总结</h1><p>HSTS is HTTP Strict Transport Security: a way for sites to elect to always use HTTPS. See <a href="https://www.chromium.org/hsts">https://www.chromium.org/hsts</a>, 是国际互联网工程组织IETF正在推行一种新的Web安全协议，HSTS的作用是强制客户端（如浏览器）使用HTTPS与服务器创建连接。<br>采用HSTS协议的网站将保证浏览器始终连接到该网站的HTTPS加密版本，不需要用户手动在URL地址栏中输入加密地址。<br>该协议将帮助网站采用全局加密，用户看到的就是该网站的安全版本。<br>HSTS的作用是强制客户端（如浏览器）使用HTTPS与服务器创建连接。服务器开启HSTS的方法是，当客户端通过HTTPS发出请求时，在服务器返回的超文本传输协议响应头中包含Strict-Transport-Security字段。非加密传输时设置的HSTS字段无效。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 个人笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HSTS协议 </tag>
            
            <tag> https报错 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly基础美化</title>
      <link href="post/f9e71d59.html"/>
      <url>post/f9e71d59.html</url>
      
        <content type="html"><![CDATA[<h1>前言</h1><p><strong>首先提示，本文量特别大哦！基本上有所有的美化，还在持续更新ing，谨慎入坑…</strong></p><h1>主题配置文件修改</h1><h2 id="基础配置">基础配置</h2><p>最最最开始的，好不容易搭建了自己的个人博客，当然要写上自己的名字、签名…，证明身份。而且身为一个Chinese，还是中文舒服，所以主目<code>_config.yml</code>的配置文件：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Little-Demon&#x27;s</span> <span class="string">Blog</span>   <span class="comment">#标题名字</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&#x27;一切都是最好的安排&#x27;</span>       <span class="comment">#签名</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">Little-Demon</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>主题支持以下三种语言：</p><ul><li>default(en)</li><li>zh-CN (简体中文)</li><li>zh-TW (繁体中文)</li></ul><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320080915621.png" alt="image-20210320080915621"></p><h2 id="导航栏修改">导航栏修改</h2><p>打开并修改根目录下的<code> _config.butterfly.yml</code>文件中的<code>menu:</code>中内容</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">首页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">归档:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="string">标签:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="string">分类:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-folder-open</span></span><br><span class="line">  <span class="string">留言板:</span> <span class="string">/messageboard/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-paper-plane</span></span><br><span class="line">  <span class="string">友链:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="string">日志:</span> <span class="string">/upadte/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-bell</span>  </span><br><span class="line">  <span class="attr">Myself:</span> <span class="string">/myself/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-id-card</span></span><br><span class="line">  <span class="string">菜单</span> <span class="string">||</span> <span class="attr">fa fa-list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">关于</span> <span class="string">||</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-sitemap</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">butterfly主题</span> <span class="string">||</span> <span class="string">https://github.com/jerryc127/hexo-theme-butterfly/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-heart</span>  </span><br></pre></td></tr></table></figure><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320081520896.png" alt="image-20210320081520896"></p><h2 id="代码块样式">代码块样式</h2><p>同样打开并修改根目录下的<code> _config.butterfly.yml</code>文件中的<code>highlight_theme</code>等内容</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">## 代码块样式</span></span><br><span class="line"><span class="attr">highlight_theme:</span> <span class="string">mac</span> <span class="comment">#  darker / pale night / light / ocean / mac / mac light / false</span></span><br><span class="line"><span class="attr">highlight_copy:</span> <span class="literal">true</span> <span class="comment"># copy button  是否显示复制按钮</span></span><br><span class="line"><span class="attr">highlight_lang:</span> <span class="literal">true</span> <span class="comment"># show the code language 是否显示代码块语言</span></span><br><span class="line"><span class="attr">highlight_shrink:</span> <span class="literal">false</span> <span class="comment"># true:打开文章默认折叠代码块内容/false:打开文章默认展开代码块/none:关闭代码折叠按钮</span></span><br><span class="line"><span class="attr">highlight_height_limit:</span> <span class="literal">false</span> <span class="comment"># unit: px</span></span><br><span class="line"><span class="attr">code_word_wrap:</span> <span class="literal">false</span> <span class="comment"># 关闭滚动条</span></span><br></pre></td></tr></table></figure><p>同时根目录下找到<code>Hexo</code> 的站点配置文件<code>_config.yml</code>，将<code>line_number</code>改成<code>false</code>:</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span>   <span class="comment">#改为false</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>效果预览<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320083324838.png" alt="image-20210320083324838"></p><h2 id="本地搜索">本地搜索</h2><p>这里需要安装插件，不然<code>hexo g</code>直接报错：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Local search 本地搜索</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">input_placeholder:</span> <span class="string">Search</span> <span class="string">for</span> <span class="string">Posts</span></span><br><span class="line">    <span class="attr">hits_empty:</span> <span class="string">&quot;We didn&#x27;t find any results for the search: $&#123;query&#125;&quot;</span> <span class="comment"># 如果没有查到内容相关内容显示</span></span><br></pre></td></tr></table></figure><p>效果预览<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320083431873.png" alt="image-20210320083431873"></p><h2 id="分割线图标更换">分割线图标更换</h2><p>本次修改基于Butterfly主题 3.7.0 ！</p><p>将图标更换为“太空飞船”。</p><p>修改rm ：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">hr_icon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">&#x27;\f197&#x27;</span> <span class="comment"># the unicode value of Font Awesome icon</span></span><br><span class="line">  <span class="attr">icon-top:</span> <span class="string">-10px</span></span><br></pre></td></tr></table></figure><p><code>icon-top</code>常用数值：</p><p>-20px：图标位于分割线上方</p><p>-10px：图标位于分割线中间</p><p>-0px：  图标位于分割线下方</p><p>效果预览</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320083655825.png" alt="image-20210320083655825"></p><h2 id="创建标签文件夹">创建标签文件夹</h2><p>会在<code>\source</code>中创建对应的<code>文件夹</code>和<code>index.md</code></p><h3 id="归档">归档</h3><p>这个页面<code>不用创建</code>，自动已经带了</p><h3 id="标签">标签</h3><p>命令行输入：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> page tags</span><br></pre></td></tr></table></figure><p>出现<code>source/tags/index.md</code>文件：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 标签</span><br><span class="line">date: 2021-02-18 13:47:05 </span><br><span class="line">type: tags </span><br><span class="line">comments: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>以后上传文章的md文件中，可以在标题头中加入<code>tags</code>，包含 <code>标签</code> 文章的例子：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 标签测试</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">  -</span> test1                 （这个就是文章的标签了）</span><br><span class="line"><span class="bullet">  -</span> test2              （这个就是文章的标签了）</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h3 id="分类">分类</h3><p>命令行输入：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> page categories</span><br></pre></td></tr></table></figure><p>出现<code>source/categories/index.md</code>文件：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 分类</span><br><span class="line">date: 2021-02-18 13:52:11  </span><br><span class="line">type: categories </span><br><span class="line">comments: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>以后上传文章的md文件中，可以在标题头中加入<code>categories</code>，包含 <code>分类</code> 文章的例子：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 分类测试</span><br><span class="line">categories:</span><br><span class="line"><span class="bullet">  -</span> 分类1                   （这个就是文章的分类了）</span><br><span class="line"><span class="bullet">  -</span> 分类2                   （这个就是文章的分类了）</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h3 id="留言板">留言板</h3><p>命令行输入：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> page messageboard</span><br></pre></td></tr></table></figure><p>出现<code>source/messageboard/index.md</code>文件：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">---</span><br><span class="line">title: 留言板</span><br><span class="line">date: 2021-02-18 13:53:33  </span><br><span class="line">type: messageboard</span><br><span class="line">--- </span><br><span class="line"><span class="section"># 留言板：</span></span><br><span class="line"><span class="section">## <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span> 有什么想说的？ <span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span></span><br><span class="line"><span class="section">## <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span> 有什么想问的？ <span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span></span><br><span class="line"><span class="section">## <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span> 有什么想吐槽的？ <span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span></span><br><span class="line"><span class="section">## <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span> 可以在下面留言... <span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span></span><br></pre></td></tr></table></figure><h3 id="5友链">5友链</h3><h4 id="创建友情链接页面">创建友情链接页面</h4><p>命令行输入：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> page link</span><br></pre></td></tr></table></figure><p>出现<code>source/link/index.md</code>文件：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 友链</span><br><span class="line">date: 2021-02-18 13:54:26</span><br><span class="line">type: link </span><br><span class="line">comments: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h4 id="友情链接添加">友情链接添加</h4><p>在Hexo目录中的<code>source/_data</code>，创建一个文件<code>link.yml</code>，内容如下：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">class:</span></span><br><span class="line">  <span class="attr">class_name:</span> <span class="string">友情链接</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="attr">1:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">姓名</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">链接</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">图片</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">签名</span></span><br><span class="line">    <span class="attr">2:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">姓名</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">链接</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">图片</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">签名</span></span><br></pre></td></tr></table></figure><h3 id="更新日志">更新日志</h3><p>命令行输入：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> page timeline</span><br></pre></td></tr></table></figure><p>出现<code>source/timeline/index.md</code>文件：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: Update</span><br><span class="line">date: 2021-02-18 13:56:57</span><br><span class="line">type: timeline</span><br><span class="line">comments: false </span><br><span class="line">---</span><br></pre></td></tr></table></figure><h3 id="关于">关于</h3><p>命令行输入：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> page about</span><br></pre></td></tr></table></figure><p>出现<code>source/about/index.md</code>文件：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 关于</span><br><span class="line">date: 2021-02-18 13:58:07</span><br><span class="line">type: about </span><br><span class="line">comments: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h3 id="myself">myself</h3><p>命令行输入：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> page myself</span><br></pre></td></tr></table></figure><p>出现<code>source/myself/index.md</code>文件：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: This is me</span><br><span class="line">date: 2021-02-18 13:59:09</span><br><span class="line">type: myself </span><br><span class="line">comments: false</span><br><span class="line">aside: false </span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="副标题修改">副标题修改</h2><h3 id="副标题设置">副标题设置</h3><p>如果没设置<code>副标题</code>，上面的<code>description：</code>签名，就是显示在主页面。而设置的话，<code>签名</code>自动不显示，<code>副标题</code>出现。</p><p>在根目录下的<code> _config.butterfly.yml</code>:</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"> <span class="attr">sub:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">何其荣幸</span> <span class="string">何德何能</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">所有的不平凡都来自平凡</span></span><br></pre></td></tr></table></figure><p>这个他们可以设置以下，<code>打字效果</code>可以开启，个人感觉不错，但是需要注意：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 如果有英文逗号&#39; , &#39;,使用转义字元 &amp;#44;</span><br><span class="line"># 如果有英文双引号&#39; &quot; &#39;,使用转义字元 &quot;</span><br><span class="line"># 开头不允許转义字元，如需要，請把整个句子用双引号包住</span><br><span class="line"># 如果关闭打字效果，subtitle只会显示sub的第一行文字</span><br></pre></td></tr></table></figure><p>我的配置预览</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># the subtitle on homepage (主頁subtitle)</span></span><br><span class="line"><span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>    </span><br><span class="line">  <span class="comment"># Typewriter Effect (打字效果)</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># loop (循環打字)</span></span><br><span class="line">  <span class="attr">loop:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># source調用第三方服務</span></span><br><span class="line">  <span class="comment"># source: false 關閉調用</span></span><br><span class="line">  <span class="comment"># source: 1  調用搏天api的隨機語錄（簡體）</span></span><br><span class="line">  <span class="comment"># source: 2  調用一言網的一句話（簡體）</span></span><br><span class="line">  <span class="comment"># source: 3  調用一句網（簡體）</span></span><br><span class="line">  <span class="comment"># source: 4  調用今日詩詞（簡體）</span></span><br><span class="line">  <span class="comment"># subtitle 會先顯示 source , 再顯示 sub 的內容</span></span><br><span class="line">  <span class="attr">source:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># 如果有英文逗號&#x27; , &#x27;,請使用轉義字元 &amp;#44;</span></span><br><span class="line">  <span class="comment"># 如果有英文雙引號&#x27; &quot; &#x27;,請使用轉義字元 &amp;quot;</span></span><br><span class="line">  <span class="comment"># 開頭不允許轉義字元，如需要，請把整個句子用雙引號包住</span></span><br><span class="line">  <span class="comment"># 如果關閉打字效果，subtitle只會顯示sub的第一行文字</span></span><br><span class="line">  <span class="attr">sub:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">何其荣幸</span> <span class="string">何德何能</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">所有的不平凡都来自平凡</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">人生不能太圆满</span>  <span class="string">求而不得也未必是遗憾</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">除了死亡</span> <span class="string">一切都是擦伤</span></span><br></pre></td></tr></table></figure><h3 id="副标题字体大小颜色">副标题字体大小颜色</h3><p>在<code>\themes\butterfly\source\css\_layout</code>中的<code>head.styl</code>:</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">#site-subtitle</span><br><span class="line">    <span class="attribute">color</span>: var(--white)   //此处修改为白色</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.05em</span>     // 字体大小</span><br><span class="line"></span><br><span class="line">    +minWidth768()</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">1.40em</span>   // 字体大小</span><br></pre></td></tr></table></figure><h2 id="图片设置">图片设置</h2><p>图片可以使用<code>网上的图片</code>(即使用该<code>图片链接</code>)，也可以使用<code>\themes\butterfly\source\img</code>下的图片，打开<code>Hexo</code>根目录中主题配置文件<code> _config.butterfly.yml</code></p><h3 id="网站图标">网站图标</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Favicon（网站图标）</span></span><br><span class="line"><span class="attr">favicon:</span> <span class="string">/img/favicon.jpg</span></span><br></pre></td></tr></table></figure><h3 id="头像">头像</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Avatar (头像)</span></span><br><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">/img/tit.png</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="主页面图片">主页面图片</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># The banner image of home page (主页的横幅图像)</span></span><br><span class="line"><span class="attr">index_img:</span> <span class="string">/img/index_img.jpg</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="子标签页图片">子标签页图片</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># The banner image of archive page</span></span><br><span class="line"><span class="attr">archive_img:</span> <span class="string">/img/tag.jpgg</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="推荐">推荐</h3><ol><li><p>主页的顶部图可以在<code>butterfly.yml</code>设置<code>index_img</code></p></li><li><p>``archives<code>页的顶部图可以在</code>Butterfly.yml<code>设置</code>archive_img`</p></li><li><p>其他<code>page页</code>的顶部图可以在各自的md页面设置<code>front-matter</code>中的<code>top_img</code></p></li></ol><h3 id="效果预览">效果预览</h3><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320092846194.png" alt="image-20210320092846194"></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320092912959.png" alt="image-20210320092912959"></p><h3 id="图片查看大图">图片查看大图</h3><p>修改主题配置文件<code> _config.butterfly.yml</code></p><p>这是两种<code>方式</code>，<code>只能选择一个</code> 或者 <code>两个都不选</code></p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Lightbox (圖片大圖查看模式)</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"><span class="comment"># You can only choose one, or neither (只能選擇一個 或者 兩個都不選)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># medium-zoom</span></span><br><span class="line"><span class="comment"># https://github.com/francoischalifour/medium-zoom</span></span><br><span class="line"><span class="attr">medium_zoom:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># fancybox</span></span><br><span class="line"><span class="comment"># http://fancyapps.com/fancybox/3/</span></span><br><span class="line"><span class="attr">fancybox:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="图片懒加载">图片懒加载</h3><p>1.新增<code>hexo-lazyload-image</code>模块</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm install hexo-lazyload-image --save</span><br></pre></td></tr></table></figure><p>2.在主目录配置文件<code>_config.yml</code>增加配置</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">lazyload:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">loadingImg:</span> <span class="string">/img/loading.gif</span></span><br></pre></td></tr></table></figure><p>这个就是图片没加载出来的时候，出现一个动图转转转。</p><h2 id="文章页样式">文章页样式</h2><p>修改主题配置文件<code> _config.butterfly.yml</code></p><h3 id="复制的内容后面加上版权信息">复制的内容后面加上版权信息</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># copy settings</span></span><br><span class="line"><span class="comment"># copyright: Add the copyright information after copied content (复制的内容后面加上版权信息)</span></span><br><span class="line"><span class="attr">copy:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">copyright:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">limit_count:</span> <span class="number">50</span></span><br></pre></td></tr></table></figure><h3 id="文章版权信息">文章版权信息</h3><p>在底部会出现对应的作者、链接、声明</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_copyright:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">decode:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">CC</span> <span class="string">BY-NC-SA</span> <span class="number">4.0</span></span><br><span class="line">  <span class="attr">license_url:</span> <span class="string">https://creativecommons.org/licenses/by-nc-sa/4.0/</span></span><br></pre></td></tr></table></figure><p>效果预览</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320093945402.png" alt="image-20210320093945402"></p><h3 id="Toc目录">Toc目录</h3><p>在文章页，会有一个目录，用于显示TOC。</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># toc (目錄)</span></span><br><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_open:</span> <span class="literal">true</span> <span class="comment"># auto open the sidebar</span></span><br></pre></td></tr></table></figure><h3 id="相关文章">相关文章</h3><p>在文章最下面，会出现<code>相关信息文章</code>的推送。</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Related Articles</span></span><br><span class="line"><span class="attr">related_post:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span> <span class="comment"># Number of posts displayed  显示的文章数</span></span><br><span class="line">  <span class="attr">date_type:</span> <span class="string">created</span> <span class="comment"># or created or updated 文章日期顯示創建日或者更新日</span></span><br></pre></td></tr></table></figure><h3 id="打赏">打赏</h3><p>在你每篇文章的結尾，可以添加打赏按鈕。对应二維碼可以自行配置。</p><p>没有提供二维码的，可配置icon图片，然后在link上添加相应的打赏链接。用户点击图片就会跳转到对应链接去。</p><p>link可以不写，会默认为图片的链接。</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Sponsor/reward</span></span><br><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">QR_code:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/img/wechat.png</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">微信</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/img/alipay.jpg</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">支付宝</span></span><br></pre></td></tr></table></figure><p>效果预览</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320094541040.png" alt="image-20210320094541040"></p><h2 id="侧边框样式">侧边框样式</h2><h3 id="侧边框出现位置">侧边框出现位置</h3><p>修改主题配置文件<code> _config.butterfly.yml</code>：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># aside (側邊欄)</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span> <span class="comment"># display on mobile</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">left</span> <span class="comment"># left or right </span></span><br></pre></td></tr></table></figure><p>left<code>：侧边框出现在</code>左侧<br>right<code>：侧边框出现在</code>右侧</p><h3 id="Follow-me信息修改">Follow me信息修改</h3><p>对于图标具体可以参考Hexo-如何优雅的使用iconfont图标</p><h3 id="公告栏">公告栏</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">card_announcement:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">This</span> <span class="string">is</span> <span class="string">my</span> <span class="string">Blog</span>  <span class="comment">#修改此处</span></span><br></pre></td></tr></table></figure><p>修改参考：</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320095938674.png" alt="image-20210320095938674"></p><h3 id="访问人數和运行时间">访问人數和运行时间</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 訪問人數</span></span><br><span class="line"><span class="attr">busuanzi:</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 網頁運行時間</span></span><br><span class="line"><span class="attr">runtimeshow:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">publish_date:</span> <span class="number">02</span><span class="string">/17/2021/</span> <span class="number">00</span><span class="string">:00:00</span></span><br><span class="line">  <span class="comment">#格式: 月/日/年 時間</span></span><br><span class="line">  <span class="comment">#也可以 年/月/日 時間</span></span><br></pre></td></tr></table></figure><p>效果预览：</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320100257243.png" alt="image-20210320100257243"></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320100346183.png" alt="image-20210320100346183"></p><h2 id="特效部分">特效部分</h2><h3 id="鼠标点击效果">鼠标点击效果</h3><p>修改主题配置文件<code> _config.butterfly.yml</code>：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Mouse click effects: fireworks (鼠標點擊效果: 煙火特效)</span></span><br><span class="line"><span class="attr">fireworks:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">9999</span> <span class="comment"># -1 or 9999</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Mouse click effects: Heart symbol (鼠標點擊效果: 愛心)</span></span><br><span class="line"><span class="attr">click_heart:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Mouse click effects: words (鼠標點擊效果: 文字)</span></span><br><span class="line"><span class="attr">ClickShowText:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">text:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">富强</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">民主</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">文明</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">和谐</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">平等</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">公正</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">法治</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">爱国</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">敬业</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">诚信</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="string">友善</span></span><br><span class="line">  <span class="attr">fontSize:</span> <span class="string">15px</span></span><br><span class="line">  <span class="attr">random:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="打字特效">打字特效</h3><p>修改主题配置文件<code> _config.butterfly.yml</code>：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Typewriter Effect (打字效果)</span></span><br><span class="line"><span class="comment"># https://github.com/disjukr/activate-power-mode</span></span><br><span class="line"><span class="attr">activate_power_mode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">colorful:</span> <span class="literal">true</span> <span class="comment"># open particle animation (冒光特效)</span></span><br><span class="line">  <span class="attr">shake:</span> <span class="literal">false</span> <span class="comment">#  open shake (抖動特效)</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="页面效果（canvas-net）">页面效果（canvas_net）</h3><p>修改主题配置文件<code> _config.butterfly.yml</code>：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># canvas_nest</span></span><br><span class="line"><span class="comment"># https://github.com/hustcc/canvas-nest.js</span></span><br><span class="line"><span class="attr">canvas_nest:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&#x27;0,0,255&#x27;</span> <span class="comment">#color of lines, default: &#x27;0,0,0&#x27;; RGB values: (R,G,B).(<span class="doctag">note:</span> use &#x27;,&#x27; to separate.)</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">0.7</span> <span class="comment"># the opacity of line (0~1), default: 0.5.</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># z-index property of the background, default: -1.</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">99</span> <span class="comment"># the number of lines, default: 99.</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>这个可以鼠标<code>自动吸附</code>。</p><h3 id="Snackbar-弹窗">Snackbar 弹窗</h3><p>修改主题配置文件<code> _config.butterfly.yml</code>：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Snackbar (Toast Notification 彈窗)</span></span><br><span class="line"><span class="comment"># https://github.com/polonel/SnackBar</span></span><br><span class="line"><span class="comment"># position 彈窗位置</span></span><br><span class="line"><span class="comment"># 可選 top-left / top-center / top-right / bottom-left / bottom-center / bottom-right</span></span><br><span class="line"><span class="attr">snackbar:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">top-right</span>  <span class="comment">#弹窗位置</span></span><br><span class="line">  <span class="attr">bg_light:</span> <span class="string">&#x27;#49b1f5&#x27;</span> <span class="comment"># The background color of Toast Notification in light mode</span></span><br><span class="line">  <span class="attr">bg_dark:</span> <span class="string">&#x27;#121212&#x27;</span> <span class="comment"># The background color of Toast Notification in dark mode</span></span><br></pre></td></tr></table></figure><p><code>开启后</code>，在你设置的位置会有<code>可爱的小弹窗</code>出现，按<code>个人爱好</code>开启。</p><p>效果预览：</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320102437443.png" alt="image-20210320102437443"></p><h2 id="底部设置">底部设置</h2><p>修改主题配置文件<code> _config.butterfly.yml</code>：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Footer Settings</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">since:</span> <span class="number">2020</span></span><br><span class="line">  <span class="attr">custom_text1:</span> <span class="string">&lt;div</span> <span class="string">class=&quot;icp&quot;&gt;&lt;img</span> <span class="string">src=&quot;https://gitee.com/little-demon1/BlogImages/raw/master/icp.png&quot;</span> <span class="string">href=&quot;https://beian.miit.gov.cn&quot;&gt;苏ICP备2021009120号&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;</span></span><br><span class="line">  <span class="attr">custom_text:</span> <span class="string">&lt;a</span> <span class="string">href=&quot;https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral&quot;&gt;&lt;img</span> <span class="string">src=&quot;https://cdn.jsdelivr.net/gh/xingjiahui/CDN/又拍云_logo.png&quot;align=&quot;absmiddle&quot;</span> <span class="string">width=&quot;55px&quot;</span> <span class="string">height=&quot;30px&quot;</span> <span class="string">/&gt;&lt;/a&gt;&lt;span&gt;提供加速服务&lt;/span&gt;</span> </span><br><span class="line">  <span class="attr">copyright:</span> <span class="literal">false</span> <span class="comment"># Copyright of theme and framework    </span></span><br><span class="line">  <span class="comment"># ICP: </span></span><br><span class="line">  <span class="comment">#   enable: true</span></span><br><span class="line">  <span class="comment">#   url: https://beian.miit.gov.cn   </span></span><br><span class="line">  <span class="comment">#   text: 苏ICP备2021009120号   </span></span><br><span class="line">  <span class="comment">#   icon: /img/icp.png  </span></span><br></pre></td></tr></table></figure><p>这里因为后期又拍云联盟标签图标的custom_text，这里在<code>/themes/butterfly/layout/includes/widget/footer.pug/</code>中添加：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if theme.footer.custom_text1</span><br><span class="line">    .footer_custom_text1!&#x3D;&#96;$&#123;theme.footer.custom_text1&#125;&#96;</span><br></pre></td></tr></table></figure><h2 id="修改滚动条">修改滚动条</h2><p>1.创建一个css文件移动到<code>\themes\butterfly\source\css</code>目录下。</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320104546621.png" alt="image-20210320104546621"></p><p>将以下代码复制到你所创建的<code>css文件</code>。</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 滚动条 */</span></span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">  width: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">::-webkit-scrollbar-track &#123;</span><br><span class="line">  background-color: <span class="built_in">rgba</span>(<span class="number">73</span>, <span class="number">177</span>, <span class="number">245</span>, <span class="number">0.2</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">2em</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">  background-color: <span class="number">#49b1f5</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">-webkit-linear-gradient</span>(</span><br><span class="line">    <span class="number">45deg</span>,</span><br><span class="line">    <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.4</span>) <span class="number">25%</span>,</span><br><span class="line">    transparent <span class="number">25%</span>,</span><br><span class="line">    transparent <span class="number">50%</span>,</span><br><span class="line">    <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.4</span>) <span class="number">50%</span>,</span><br><span class="line">    <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.4</span>) <span class="number">75%</span>,</span><br><span class="line">    transparent <span class="number">75%</span>,</span><br><span class="line">    transparent</span><br><span class="line">  );</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">2em</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">::-webkit-scrollbar-corner &#123;</span><br><span class="line">  background-color: transparent;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">::-moz-selection &#123;</span><br><span class="line">  color: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#49b1f5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.引入方式</p><p>在主题配置文件<code> _config.butterfly.yml</code>中引入:</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="comment"># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/mycss.css&quot;&gt;</span> <span class="comment">#引入自建的页面滚动条 </span></span><br></pre></td></tr></table></figure><h2 id="页脚渐变">页脚渐变</h2><p>将以下代码复制到所创建的<code>css文件</code>,引入即可。</p><p>可参考：<code>修改滚动条</code>部分中的<code>引入方式</code></p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 页脚footer */</span></span><br><span class="line"><span class="comment">/* 渐变色滚动动画 */</span></span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> Gradient &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">@-moz-keyframes</span> Gradient &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">@keyframes</span> Gradient &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-<span class="number">45deg</span>, <span class="number">#ee7752</span>, <span class="number">#ce3e75</span>, <span class="number">#23a6d5</span>, <span class="number">#23d5ab</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">400%</span> <span class="number">400%</span>;</span><br><span class="line">    -webkit-<span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite;</span><br><span class="line">    -moz-<span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite;</span><br><span class="line">    <span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite;</span><br><span class="line">    -o-user-select: none;</span><br><span class="line">    -ms-user-select: none;</span><br><span class="line">    -webkit-user-select: none;</span><br><span class="line">    -moz-user-select: none;</span><br><span class="line">    user-select: none;</span><br><span class="line">    <span class="attribute">border-top-left-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-top-right-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span>:before &#123;</span><br><span class="line">    background-color: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="更换背景及透明度">更换背景及透明度</h2><h3 id="透明度">透明度</h3><p>将以下代码复制到你所创建的<code>css文件</code>,引入即可。</p><p>可参考：<code>修改滚动条</code>部分中的<code>引入方式</code></p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 文章页背景 */</span></span><br><span class="line"><span class="selector-class">.layout_post</span>&gt;<span class="selector-id">#post</span> &#123;</span><br><span class="line">    <span class="comment">/* 以下代表白色透明度为0.3 */</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,.<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 所有背景（包括首页卡片、文章页、页面页等） */</span></span><br><span class="line"><span class="selector-id">#aside_content</span> <span class="selector-class">.card-widget</span>, <span class="selector-id">#recent-posts</span>&gt;<span class="selector-class">.recent-post-item</span>, <span class="selector-class">.layout_page</span>&gt;<span class="selector-tag">div</span><span class="selector-pseudo">:first</span>-child<span class="selector-pseudo">:not</span>(<span class="selector-class">.recent-posts</span>), <span class="selector-class">.layout_post</span>&gt;<span class="selector-id">#page</span>, <span class="selector-class">.layout_post</span>&gt;<span class="selector-id">#post</span>, <span class="selector-class">.read-mode</span> <span class="selector-class">.layout_post</span>&gt;<span class="selector-id">#post</span>&#123;</span><br><span class="line">    <span class="comment">/* 以下代表白色透明度为0.3 */</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,.<span class="number">3</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="更换背景">更换背景</h3><p>老规矩，复制到所创建的<code>css文件</code>,引入即可</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#web_bg &#123;</span></span><br><span class="line"><span class="attr">background-image:</span> <span class="string">linear-gradient(to</span> <span class="string">top,</span> <span class="comment">#fff1eb 0%, #ace0f9 100%);</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p>当然这是我的博客<code>背景</code>。</p><h2 id="移动端优化">移动端优化</h2><p><code>\themes\butterfly\source\css\_third-party\normalize.min.css</code>添加如下css代码：</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*移动端优化：去除归档、标签、最新文章、公告、、只保留网站统计*/</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">800px</span>) &#123;</span><br><span class="line">    <span class="selector-id">#aside_content</span></span><br><span class="line">    <span class="selector-tag">div</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:last-child</span>) &#123;</span><br><span class="line">        <span class="attribute">display</span>: none;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="查看网页RSS">查看网页RSS</h2><p>本次修改基于Butterfly主题 3.7.0 ！</p><p>实现：增加社交图标RSS，点击可查看网页RSS。</p><p>1.下载插件hexo-generator-feed</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><p>2.在hexo的站点主配置文件<code>_config.yml</code>中任意位置添加以下代码：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">atom</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">atom.xml</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">20</span></span><br><span class="line">  <span class="attr">hub:</span></span><br><span class="line">  <span class="attr">content:</span></span><br><span class="line">  <span class="attr">content_limit:</span> <span class="number">140</span></span><br><span class="line">  <span class="attr">content_limit_delim:</span> <span class="string">&#x27; &#x27;</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">icon.png</span></span><br><span class="line">  <span class="attr">autodiscovery:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">template:</span></span><br></pre></td></tr></table></figure><p>3.修改butterfly主题配置文件_config.yml ，添加RSS的图标：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">fa fa-rss:</span> <span class="string">/atom.xml</span> <span class="string">||</span> <span class="string">RSS链接</span></span><br></pre></td></tr></table></figure><h2 id="社交信息设置">社交信息设置</h2><p>在博客根目录下<code> _config.butterfly.yml</code>中修改<code>social</code>：</p><p>(可以选择使用<code>fa fa-xxx</code>图标，也可以选择使用<code>阿里iconfont</code>图标)</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># social settings (社交圖標設置)</span></span><br><span class="line"><span class="comment"># formal:</span></span><br><span class="line"><span class="comment">#   icon: link || the description</span></span><br><span class="line"><span class="attr">social:</span> </span><br><span class="line">  <span class="attr">fab fa-qq:</span>  <span class="string">tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=728036382&amp;website=www.oicqzone.com</span> </span><br><span class="line">  <span class="attr">fas fa-envelope-open-text:</span> <span class="string">mailto:728036382@qq.com</span> <span class="string">||</span> <span class="string">Email</span></span><br><span class="line">  <span class="attr">fa fa-rss:</span> <span class="string">/atom.xml</span> <span class="string">||</span> <span class="string">RSS链接</span>   </span><br></pre></td></tr></table></figure><p>效果预览</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320131916678.png" alt="image-20210320131916678"></p><h2 id="分享功能">分享功能</h2><p>在博客根目录下<code> _config.butterfly.yml</code>中修改:</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">sharejs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sites:</span> <span class="string">facebook,twitter,wechat,weibo,qq</span>  <span class="comment">#想要显示的內容</span></span><br></pre></td></tr></table></figure><p>效果预览</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320133423672.png" alt="image-20210320133423672"></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterfly </tag>
            
            <tag> 主题美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo本地安装、主题部署</title>
      <link href="post/d685e256.html"/>
      <url>post/d685e256.html</url>
      
        <content type="html"><![CDATA[<h1>1、安装Hexo</h1><p>准备工作完成后（<font color=###FF0000>git  </font>和<font color=###FF0000>node.js  </font> ）,就可以进行安装<font color=###FF0000>Hexo  </font>了，先建立一个文件夹<font color=###FF0000>My-Blog</font>，用来存放博客文件，然后可以直接在这个分区里找到这个文件夹内找到这个文件夹，打开进入文件夹内，鼠标直接点击空白处右击选择<font color=###FF0000>git bash </font> 打开。</p><p>这里以我自己的为例，我把文件都存放在<font color=###FF0000>E:\My-Blog </font>目录下。</p><p>在这个目录下点击<font color=###FF0000>Git Bash Here </font>，打开<font color=###FF0000>git</font>的控制台窗口，以后基本上所有的操作都 可以在<font color=###FF0000>git </font>控制台里面进行，这样就不用系统自带的<font color=###FF0000>CMD </font>命令窗口了，也可以避免不必要的错误。<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210319181924184.png" alt="image-20210319181924184"></p><p>在命令窗口内输入以下的命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p><font color=###FF0000>git</font>的控制台窗口出现如下即表示安装完成<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210319182508670.png" alt="image-20210319182508670"><br>安装完后输入<code>hexo -v</code>验证是否安装成功。<br>至此<code>hexo</code>就安装完了<br>接下来初始化一下<code>hexo</code>,即初始化我们的网站，输入<code>hexo init</code>初始化文件夹,文件夹内具体内容如下：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210319231242649.png" alt="image-20210319231242649"></p><p><font color=###FF0000>git</font>的控制台窗口内容如下：</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210319231357748.png" alt="image-20210319231357748"></p><p>之后就可以进行hexo 三连运行<font color=###FF0000>Hexo</font>原始页面</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo clean(or hexo cl)#清空已有的Hexo文件</span><br><span class="line">hexo generate(or hexo g) #依据网页文本与新的css样式生成新的网站文件</span><br><span class="line">hexo server(or hexo s) #启动本地服务器，可以在localhost:4000查看网站修改效果</span><br></pre></td></tr></table></figure><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210319232506276.png" alt="image-20210319232506276"></p><p>打开浏览器(建议使用无痕模式打开访问网站)，输入网址: <a href="http://localhost:4000/">http://localhost:4000</a> 即可看到hexo生成的静态页面。</p><h1>2、更换Hexo主题</h1><h2 id="2-1主题推荐">2.1主题推荐</h2><p>官网主题：<a href="https://hexo.io/themes/">https://hexo.io/themes/</a><br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210319233142643.png" alt="image-20210319233142643"><br>这里推荐两款主题</p><ul><li><p>Sakura 非常炫，缺点加载慢 <a href="https://github.com/honjun/hexo-theme-sakura">https://github.com/honjun/hexo-theme-sakura</a></p></li><li><p>Next 功能集成多，简洁，界面一般 <a href="https://github.com/theme-next/hexo-theme-next">https://github.com/theme-next/hexo-theme-next</a></p></li></ul><h2 id="2-2Butterfly主题">2.2Butterfly主题</h2><p>此次我选择的主题是Butterfly,这款主题非常好看，好用，功能十分齐全，那么接下来就赶紧下载安装体验吧</p><h3 id="2-2-1主题下载">2.2.1主题下载</h3><p>进入github点击下载zip：<a href="https://github.com/jerryc127/hexo-theme-butterfly/">https://github.com/jerryc127/hexo-theme-butterfly/</a><br>或者进入gitee点击下载zip：<a href="https://gitee.com/iamjerryw/hexo-theme-butterfly">https://gitee.com/iamjerryw/hexo-theme-butterfly</a><br>解压文件夹，将中的主题样式复制<font color=###FF0000>My-Blog\themes </font>目录下(注意下载下来需要将文件夹名改为<code>butterfly</code>)：<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210319234449569.png" alt="image-20210319234449569"></p><h3 id="2-2-2主题修改">2.2.2主题修改</h3><p>打开<code>My-Blog</code>文件夹根目录下面的站点配置文件<code>_config.yml</code>，这里建议使用visual Studio Code或者sublime Text3程序查看编辑软件，把主题修改为<code>butterfly</code>，可以查找<code>theme</code>定位到在配置文件的位置，并且进行修改</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210319235224719.png" alt="image-20210319235224719"></p><p>这里为了后期<code>butterfly</code>主题的更新方便以及后期插件的安装与替换，这里建议将<font color=###FF0000>My-Blog\themes\butterfly </font>目录下的<font color=###FF0000>_config.yml </font>文件进行复制并且修改名称为<code> _config.butterfly.yml</code>，然后将这个文件剪切到<font color=###FF0000>My-Blog\themes </font>目录下，后面直接对<code> _config.butterfly.yml</code>修改即可。</p><h3 id="2-2-3-安装插件">2.2.3 安装插件</h3><p>如果沒有 pug 以及 stylus 的渲染器，还需要下载，否则在项目运行时会报错：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><h3 id="2-2-4-主题预览">2.2.4 主题预览</h3><p>这里还是一样hexo 三连即可，复习一下</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo clean(or hexo cl)#清空已有的Hexo文件</span><br><span class="line">hexo generate(or hexo g) #依据网页文本与新的css样式生成新的网站文件</span><br><span class="line">hexo server(or hexo s) #启动本地服务器，可以在localhost:4000查看网站修改效果</span><br></pre></td></tr></table></figure><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210320001219456.png" alt="image-20210320001219456"></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo安装 </tag>
            
            <tag> 主题安装 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客初建(安装准备)</title>
      <link href="post/b0c1e2c7.html"/>
      <url>post/b0c1e2c7.html</url>
      
        <content type="html"><![CDATA[<h1>1、node.js</h1><h2 id="1-1下载nodejs">1.1下载nodejs</h2><p>到nodejs环境官网下载需要的版本，一直next就可以成功安装到设备上。</p><p>下载地址：<a href="http://nodejs.cn/download/">http://nodejs.cn/download/</a></p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210319174137.png" style="zoom:67%;" /><h2 id="1-2安装nodejs">1.2安装nodejs</h2><p>打开下载好的文夹，点击安装（这里我是Windows x64系统），除了自己定义安装的目录外，其余一直Next</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210319174423639.png" alt="image-20210319174423639"></p><h2 id="1-3查看node版本">1.3查看node版本</h2><p>node安装完成后打开CMD输入：<font color=###FF0000>  node --version  </font></p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210319174921997.png" alt="image-20210319174921997"></p><h2 id="1-4查看安装环境">1.4查看安装环境</h2><p>在cmd中输入：<font color=###FF0000>  path  </font> 查看环境变量，安装node时以及自动添加了我们的node环境</p><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210319175231257.png" alt="image-20210319175231257"></p><h1>2、配置淘宝镜像cnpm</h1><h2 id="2-1下载安装">2.1下载安装</h2><p>由于npm是国外的仓库位置，所以出于网速原因，建议配置：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210319175729040.png" alt="image-20210319175729040"></p><h2 id="2-2查看是否安装成功">2.2查看是否安装成功</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cnpm -v</span><br></pre></td></tr></table></figure><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210319180139006.png" alt="image-20210319180139006"></p><h1>3.安装vue和脚手架vue-cli</h1><h2 id="3-1安装vue">3.1安装vue</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cnpm install vue</span><br></pre></td></tr></table></figure><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210319180348345.png" alt="image-20210319180348345"></p><h2 id="3-2安装vue-cli">3.2安装vue-cli</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cnpm install --global vue-cli</span><br></pre></td></tr></table></figure><p><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/image-20210319180631329.png" alt="image-20210319180631329"></p><p>以上的步骤完成了的话<font color=###FF0000>  博客搭建  </font>的前提条件了</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nodejs </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Win10系统安装激活（一）系统安装</title>
      <link href="post/18303.html"/>
      <url>post/18303.html</url>
      
        <content type="html"><![CDATA[<h1>前言</h1><p>对于很多的小白用户，电脑C盘爆满，电脑运行比较卡顿，广告满屏飞，系统崩溃等在对系统已经进行优化后并且检查电脑硬件电路完好后还是不能解决问题的情况下，我们就可以对电脑进行系统的重新安装，但是大家到电脑城或者电脑店里咨询会发现重新安装系统的价格十分高昂，而且可能安装的系统还不是纯净的系统（自带广告，第三方魔改版）。这里我写一个简单易懂的装系统教程。使用微软官方提供的工具制作U盘启动盘，操作简单，系统纯净，可以帮大家省去这部分“智商税”以及消去外面安装电脑系统不纯净的后顾之忧。强烈建议小白用户使用。但是说了那么多优点后，它也存在一定的缺点那就是该工具功能单一，并且官方只为win10和win8提供了该工具。</p><p><strong>注意：系统安装会清空C盘也就是系统盘，所以对C盘内的重要内容在重新安装系统前做好相关的备份（桌面以及文档等日常使用的文件夹也属于C盘这里很容易忽视）</strong></p><hr><h1>安装准备</h1><ol><li><p>一台能够联网正常使用的电脑（这里如果条件允许可以直接在原电脑上操作）</p></li><li><p>准备一个8GB以上的空闲U盘</p></li></ol><p><strong>注意：后面在将U盘注入系统安装时会对U盘进行格式化处理，如果U盘内有重要内容，请做好相关备份</strong></p><h1>U盘启动盘的制作</h1><ol><li><p>找一台可以正常上网的电脑打开微软官网对应的Windows下载地址<a href="https://www.microsoft.com/zh-cn/software-download/windows10">点击此处即可直达</a>下载该工具，然后准备一个8G以上的空白U盘。(注意:该工具会格式化U盘，所以准备一个空白U盘)</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309154300988.png" alt="image-20210309154300988" style="zoom: 50%;" />  </li><li><p>下载完成后找到工具的下载位置，打开该工具。</p><p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309154446548.png" alt="image-20210309154446548"></p></li><li><p>工具第一次打开会进行初始化，具体窗口样式如下图所示，这里等待片刻即可。</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309154606092.png" alt="image-20210309154606092" style="zoom:80%;" /> </li><li><p>这里点击接受同意微软的用户协议</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309154711061.png" alt="image-20210309154711061" style="zoom:80%;" />  </li><li><p>这里在一段软件准备加载后，进入如下对话框，我们这里选择“为另一台电脑创建安装介质”</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309154939407.png" alt="image-20210309154939407" style="zoom:80%;" />   </li><li><p>这里一般选择<strong>Windows 10 64位 中文（简体）<strong>如果你有其他的一些个人个性化需求也可以依次对其进行查看更改。如果你制作启动盘和准备装机的是同一台电脑，直接可以勾选</strong>“对这台电脑使用推荐的选项就行”</strong>。在选择好后，我们选择下一步进行后续操作。</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309155314636.png" alt="image-20210309155314636" style="zoom:80%;" />  </li><li><p>这里我们选择<strong>U盘</strong></p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309155522663.png" alt="image-20210309155522663" style="zoom:80%;" />  </li><li><p>选择你插入的U盘，一般会自动识别的</p></li></ol><p><strong>注意：确保你的电脑上没有外接其他的存储设备，以防选择错误清空其他存储设备内的数据，造成数据丢失</strong>。</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309155738517.png" alt="image-20210309155738517" style="zoom: 80%;" />   <ul><li>接下来你只需要静静的等待，系统下载完成后会自动创建介质，当提示**“你的U盘已经准备就绪”**后，点击完成即可。</li></ul><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309155939437.png" alt="image-20210309155939437" style="zoom: 80%;" />  <img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309160420674.png" alt="image-20210309160420674" style="zoom:80%;" />  <img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309160938510.png" alt="image-20210309160938510" style="zoom:80%;" />  <ul><li>这里打开U盘就可以发现U盘启动盘已经制作完成了，那么接下来就可以对你的电脑进行安装系统了。</li></ul><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309161343821.png" alt="image-20210309161343821" style="zoom:67%;" />   <hr><h1>系统安装教程</h1><ul><li>1、关闭电脑，插上刚刚的U盘启动盘，开机的时候按快捷启动键，下面为常用品牌电脑快捷键大全</li></ul><table><thead><tr><th style="text-align:left">组装机</th><th></th><th style="text-align:left">品牌笔记本电脑</th><th></th><th>品牌台式机</th><th></th></tr></thead><tbody><tr><td style="text-align:left">主板品牌</td><td>启动按键</td><td style="text-align:left">主板品牌</td><td>启动按键</td><td>主板品牌</td><td>启动按键</td></tr><tr><td style="text-align:left">华硕</td><td>F8</td><td style="text-align:left">联想</td><td>F12</td><td>联想</td><td>F12</td></tr><tr><td style="text-align:left">技嘉</td><td>F12</td><td style="text-align:left">宏基</td><td>F12</td><td>惠普</td><td>F12</td></tr><tr><td style="text-align:left">微星</td><td>F11</td><td style="text-align:left">华硕</td><td>ESC</td><td>宏基</td><td>F12</td></tr><tr><td style="text-align:left">映泰</td><td>F9</td><td style="text-align:left">惠普</td><td>F9</td><td>戴尔</td><td>ESC</td></tr><tr><td style="text-align:left">挴捷</td><td>ESC或F12</td><td style="text-align:left">联想</td><td>F12</td><td>神舟</td><td>F12</td></tr><tr><td style="text-align:left">七彩虹</td><td>ESC或F11</td><td style="text-align:left">戴尔</td><td>F12</td><td>华硕</td><td>F8</td></tr><tr><td style="text-align:left">华擎</td><td>F11</td><td style="text-align:left">神舟</td><td>F12</td><td>方正</td><td>F12</td></tr><tr><td style="text-align:left">斯巴达克</td><td>ESC</td><td style="text-align:left">东芝</td><td>F12</td><td>清华同方</td><td>F12</td></tr><tr><td style="text-align:left">昂达</td><td>F11</td><td style="text-align:left">三星</td><td>F12</td><td>海尔</td><td>F12</td></tr><tr><td style="text-align:left">双敏</td><td>ESC</td><td style="text-align:left">IBM</td><td>F12</td><td>明基</td><td>F8</td></tr><tr><td style="text-align:left">翔升</td><td>F10</td><td style="text-align:left">富士通</td><td>F12</td><td></td><td></td></tr><tr><td style="text-align:left">精英</td><td>ESC或F11</td><td style="text-align:left">海尔</td><td>F12</td><td></td><td></td></tr><tr><td style="text-align:left">冠盟</td><td>ESC或F12</td><td style="text-align:left">方正</td><td>F12</td><td></td><td></td></tr><tr><td style="text-align:left">富士康</td><td>ESC或F12</td><td style="text-align:left">清华同方</td><td>F12</td><td></td><td></td></tr><tr><td style="text-align:left">顶星</td><td>ESC或F12</td><td style="text-align:left">微星</td><td>F11</td><td></td><td></td></tr><tr><td style="text-align:left">铭瑾</td><td>ESC</td><td style="text-align:left">明基</td><td>F9</td><td></td><td></td></tr><tr><td style="text-align:left">盈通</td><td>F8</td><td style="text-align:left">技嘉</td><td>F12</td><td></td><td></td></tr><tr><td style="text-align:left">捷波</td><td>ESC</td><td style="text-align:left">Gateway</td><td>F12</td><td></td><td></td></tr><tr><td style="text-align:left">Intel</td><td>F12</td><td style="text-align:left">eMachines</td><td>F12</td><td></td><td></td></tr><tr><td style="text-align:left">杰微</td><td>ESC</td><td style="text-align:left">索尼</td><td>ESC</td><td></td><td></td></tr><tr><td style="text-align:left">致铭</td><td>F12</td><td style="text-align:left">苹果</td><td>长按option键</td><td></td><td></td></tr></tbody></table><ul><li><p>2、这里我以华硕游戏本飞行堡垒为例，按下开机键后，按下ESC键，出现下图所示时，按键盘上下键选择U盘后回车，这里我用的U盘品牌为三星，很明显就可以看到下面<strong>UEFI:Samsung Flash Drive 1100</strong>红框标记有字样。（每个电脑出现的界面可能稍微有些不同，但是大同小异）</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309195045659.png" alt="image-20210309195045659" style="zoom: 67%;" />  </li><li><p>3、这里在点击进入系统安装程序，下面就是首界面的具体图片 ,这里选择安装的语言：<strong>中文（简体，中国）</strong>，时间和货币格式：<strong>中文（简体，中国）</strong>，键盘和输入方法：<strong>微软拼音</strong>，在选择好后，点击下一步；这里推荐的配置选择，也可以自己选择想要的具体配置。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309213137778.png" alt="image-20210309213137778" style="zoom:67%;" /></p></li><li><p>4、在刚刚下一步的操作后，进入到安装界面，选择<strong>现在安装</strong> ，安装程序启动进行，具体如下：<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309213957190.png" alt="image-20210309213957190" style="zoom:67%;" /><br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210309214058872.png" alt="image-20210309214058872" style="zoom:67%;" /></p></li><li><p>5、这里在一段加载后，进入<strong>激活Windows</strong>界面，这里我推荐大家点击<strong>我没有产品密钥</strong>（这里可以配合我给大家提供windows10激活工具），进入下一步操作，具体如下：<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313220852.png" style="zoom: 80%;" /></p></li><li><p>6、这里选择需要安装的操作系统（这里推荐<strong>Windows 10专业版</strong>），点击选中后，点击下一步<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313220908.png" style="zoom: 80%;" /></p></li><li><p>7、点击勾选同意许可条款，勾选后点击下一步<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313220919.png" style="zoom:80%;" /></p></li><li><p>8、这里点击自定义安装<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313220931.png" style="zoom:80%;" /></p></li><li><p>9、在这里要特别注意一下，选择自己的C盘，安装前最好格式化一下C盘（<strong>注意重要文件备份</strong>）。有固态硬盘的话一定要选择固态硬盘，这里是以一块刚买的固态盘为例，具体操作如下：<br>（1）、选中需要格式化的磁盘<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313220944.png" style="zoom:80%;" /><br>（2）、磁盘进行格式化，可以对其进行分区，也可以默认（1GB=1024MB）<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313220957.png" style="zoom:80%;" /><br>（3）、确认后弹出以下对话框点击<strong>确定</strong>即可<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313221006.png" style="zoom:80%;" /><br>（4）、确定格式化后，选定需要安装系统的磁盘分区，如果固态默认空间值最大的即可，具体如下：<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313221017.png" style="zoom:80%;" /></p></li><li><p>10、点击下一步后，进入安装界面，这里等待即可，对话框实例如下：<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313221025.png" style="zoom:80%;" /></p></li><li><p>11、安装完成之后会出现自动重新启动的界面，这里我们可以将插在电脑上的USB装机U盘拔下（<strong>避免再次进入装机页面</strong>），开机logo出现静静等待即可。<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313221033.png" style="zoom:80%;" /><br>一段时间的加载后，进入系统初始化安装界面：<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313221041.png" style="zoom:80%;" /></p></li><li><p>12、这里我们选择区域<strong>中国</strong><br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313221047.png" style="zoom:80%;" /></p></li><li><p>13、键盘布局默认为<strong>微软拼音</strong>，不过根据个人使用习惯也可以选择微软五笔<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313221056.png"  /><br>这里第二种键盘布局可以点击<strong>跳过</strong><br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313221103.png" alt=""></p></li><li><p>14、<strong>注意：网络暂时不要连接</strong>,省去联网加载的时间以及其他广告的加入，这里点击<strong>我没有网络连接</strong><br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313221112.png" alt=""></p></li><li><p>15、由于刚刚我们暂时没有连接网络，这里我继续点击<strong>继续执行有限设置</strong><br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313221146.png" alt=""></p></li><li><p>16、我们在设置电脑账户名的时候<strong>一定要设定英文</strong>，避免后面装好系统后你安装专业软件的时候出现意想不到的问题，这里我以ASUS为例：<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313221216.png" alt=""><br>密码可以设，也可暂时不设（后面可以进入系统后自行设置），不设的话开机直接进入你的系统，不用输入开机密码<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313221226.png" alt=""></p></li><li><p>17、为了避免后期广告弹窗的出现，这里设备隐私设置可以和我一样这样设置<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313221236.png" alt=""></p></li><li><p>18、对与Cortana助手我们直接点击<strong>以后再说</strong>，对于我们中国大陆来说Cortana助手也是无法使用的<br><img src="https://blog-images-1304155699.cos.ap-nanjing.myqcloud.com/20210313221244.png" alt=""></p></li></ul><hr><h1>后记</h1><p>很高兴你可以阅读到这儿，到这儿为止你就已经掌握了Windows10系统安装的技巧了，可以帮你的身边有需要家人、朋友重装系统了，听说隔壁的小孩儿都被你秀哭了😂<br>至此Windows10的安装步骤就已经全部完成，对于刚刚没有联网的，我们这会儿就可以联网了，那么联网后会对电脑部分驱动进行自动下载以及安装，但是对于独立显卡（英伟达显卡等）来说我们需要单独的到官网去下载驱动安装器，尽量不要去使用360以及电脑管家之类的第三方提供的驱动进行下载，选择官方渠道，稳定而且可以获取最新版本。对于电脑杀毒软件来说，最好以Windows自带的杀毒工具以及防火墙，也基本够用，如果实在想装，这里我大力推荐火绒杀毒软件，软件轻量化没有第三方广告的介入以及可以帮助我们屏蔽弹窗广告。这里你的PC电脑的Windows10系统就已经相当于重生了，但是平常还是要养成良好的使用习惯，避免软件安装在系统盘里，以及擦亮眼睛避开网络上的钓鱼广告的大坑，软件到官方渠道下载获取。<br>后面我有时间就上传Windows常用软件以及分享一些关闭广告以及电脑美化的小技巧，欢迎关注,有问题欢迎评论区评论留言。<br>假如你对于系统激活还有疑问的可以<a href="https://www.little-demon.cn/2021/02/25/Win10%E6%B0%B8%E4%B9%85%E6%BF%80%E6%B4%BB/">这里点击直达</a><br>如果觉得博主的保姆级教程写的还不错，对你起到帮助可以到文章下面点击打赏，请博主喝杯奶茶😛。</p>]]></content>
      
      
      <categories>
          
          <category> 经验分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 官方纯净 </tag>
            
            <tag> Windows 10安装 </tag>
            
            <tag> 保姆级教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Alitum Desginer 20安装绿化</title>
      <link href="post/44208.html"/>
      <url>post/44208.html</url>
      
        <content type="html"><![CDATA[<h1>前言</h1><p>之前给大家介绍了Alitum Designer 16的安装以及绿化的相关步骤和操作，那这里把Alitum Designer 20的安装以及绿化也做一下介绍（PS：我个人比较喜欢Alitum Designer 20，界面更加舒服以及菜单栏也进行了修改，但是随着二版本更新，所需要电脑的基础配置也随着提高，电脑配置不是很高的话，这里需要慎重）,那么废话不多说我们直接来干货。</p><h1>软件介绍</h1><p>在AD 16版本的时候，Altium 与知名的三维电磁仿真软件公司CST 合作，将CST的场解器整合到AD设计软件中，AD也拥有了信号完整性/电源完整性仿真功能，已经在向高端EDA软件看齐。</p><p>从AD 17版本开始，AD加入了64位系统的支持，当然，像XP这样的系统就无法享用了。增强型交互式布线工具、先进的层堆管理、新的元件件搜索面板、ActiveBOM等等新特性都非常好用。也许增加过多新的高级功能，AD也引入了很多BUG，运行速度也比较耗计算机的资源，这也是新的AD版本被人诟病的地方 。不过，在使用了而一段时间的AD 20后，对比AD 16来说，布线和修线效率明显提高了许多.</p><p><strong>交互式布线的改进</strong>：新的“推挤”功能的改进可对复杂的高密度互连板进行走线，即使是简单的PCB，相对过往，设计时间也可缩短20％以上。</p><p><strong>新的针对高速PCB优化的布线功能</strong>：加入 DDR3 / 4 / 5、100 GBit以太网和SerDes PCIe 4.0 / 5.0的高密度和高速板的设计支持，优秀 。</p><p><strong>多板组件设计</strong>：最新版本利用ActiveBOM功能，包括BOM搜索，BOM规则检查和在线元件选择，还能导出3D PDF 文档。</p><p><strong>全新的高压设计功能</strong>：对于需要进行高压设计的应用场景，AD20提供了新的爬电设计规则，有助于在整个PCB表面保持高压间隙，以防止电源和混合信号设计的电弧隐患。</p><h1>准备工作</h1><p>系统环境：Windows操作系统<br>工具：软件安装包<a href="https://pan.baidu.com/s/1l4tzvYD-1GxTqLYzOSsxGg">点击此处即可进行下载</a>提取码：6666</p><h1>安装教程</h1><p>1.将软件压缩包下载完毕后，将压缩包进行解压，然后打开安装包所在的文件夹,文件夹内具体内容如下：</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/101.png" alt="101" style="zoom:80%;" /><p>2.进入Alitum Designer v20.0.2.26文件夹，右击以管理员身份运行AltiumDesigner20Setup.exe安装程序：</p> <img src="https://gitee.com/little-demon1/BlogImages/raw/master/102.png" alt="102" style="zoom:80%;" /><p>进入软件安装程序中，具体安装程序界面如下：</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/103.png" alt="103" style="zoom:80%;" /><p>3.在上一个菜单界面点击Next后，在这里<strong>1选项</strong>可以将语言改成中文或者其他你所需要的语言，并且<strong>2处勾选</strong>接受协议，点击Next继续安装</p><p>​                                 <img src="https://gitee.com/little-demon1/BlogImages/raw/master/104.png" alt="104" style="zoom:80%;" /></p><p>4.这里菜单以默认即可 ，继续点击Next</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/105.png" alt="105" style="zoom:80%;" /><p>6.设计软件的安装目录以及软件的元件库的安装目录，这里推荐到系统C盘以外的磁盘空间，这里要特别注意安装目录路径里不能有中文字符，记住自己的安装路径 。这里我以在D盘里新建的Altium Designer 20为例。</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/106.png" alt="106" style="zoom:80%;" /><p>7.在设定选择完后，单击Next继续下一步，安装过程如下，等待安装完成即可</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/107.png" alt="107" style="zoom:80%;" /><p>8.取消勾选“Run Altium Designer”，点击Finish，安装结束后不要立即启动 软件</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/108.png" alt="108" style="zoom:80%;" /><p>到这里为止软件Alitum Desginer 20的安装完成，接下来进行软件的绿化。</p><p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/109.png" alt="109"></p><h1>软件绿化</h1><p>1.打开下载软件包解压出来的<strong>补丁文件</strong>文件夹，复制其中的<strong>shfolder.dll</strong>文件复制粘贴到刚刚软件程序的安装目录中。</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/110.png" alt="110" style="zoom:80%;" /><img src="https://gitee.com/little-demon1/BlogImages/raw/master/111.png" alt="111" style="zoom:80%;" /><p>2.找到软件快捷图标进行启动，这里也是用<strong>管理员身份运行</strong>，这里我以我自己的开始屏幕上的Alitum Designer 20图标为例，具体操作如下所示：</p><p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/112.png" alt="112"></p><p>3.第一次打开软件可能需要等待一会儿软件首次运行需要加载</p><p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/113.png" alt="113"></p><p>4.这里第一次启动可能会有下图所示的对话框，这里直接点击取消<strong>Cancel</strong></p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/114.png" alt="114" style="zoom:80%;" /><p>5.点击“Add standalone license file”， 在软件包的文件夹下点击补丁文件以及点击进入Licenses文件夹内，任意选择文件，点击“打开”。</p><p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/115.png" alt="115"></p><p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/116.png" alt="116"></p><p>6.在以上操作后，出现下面界面即表明绿化注册成功</p><p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/117.png" alt="117"></p><h1>软件汉化</h1><p>1.点击软件右上角上角的**“小齿轮儿”**，再点击“Preferences”，勾选“Use localized resources”，确定以后重启软件，即可将其切换到中文状态。</p><p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/118.png" alt="118"></p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/119.png" alt="119" style="zoom:80%;" /><p>2.汉化成功</p><p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/120.png" alt="120"></p><p>如果想要用回原先的英文模式，重复上述动作并且进行将使用本地资源勾选取消掉</p><h1>后记</h1><p>在这里Alitum Designer 20以及Alitun Designer 16的安装绿化教程已经陆续更新了，现在软件还在不断的更新，这些提供的软件仅供学习交流，强烈建议入正版，后续我也将上传分享我本人的Alitum Designer 的学习笔记（PS：之前用的纸质的笔记本进行记录的），国内的PCB绘图软件——“立创EDA”也是十分的不错，等有机会和大家进行分享。</p>]]></content>
      
      
      <categories>
          
          <category> 嵌入式开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 电子产品设计开发 </tag>
            
            <tag> PCB设计 </tag>
            
            <tag> 电路原理图设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown语法梳理</title>
      <link href="post/31679.html"/>
      <url>post/31679.html</url>
      
        <content type="html"><![CDATA[<h1>Typora是什么？</h1><p>Typora 是一款<strong>支持实时预览的 Markdown 文本编辑器</strong>。它有 OS X、Windows、Linux 三个平台的版本，并且是<strong>完全免费</strong>的。typora有着简约、优雅、实用，它与Office相比更加的简洁，虽然我之前一直用的VSCODE来安装markdown的相关插件，但事实Typora独有的及时渲染以及Typora可以直接配合PicGo等软件可以直接进行文章中黏贴图片达到同时上传图床的效果，这些功能都令我爱不释手。文字爱好者尤其程序员比较偏爱这款编辑器，现在我主要用它来记笔记，日常写作，因为层级关系条理，看起来干净纯粹，没有office那么繁琐，可以提高工作效率，而且基于自己本是理科专业，代码方面的功能也是经常使用，“丝滑”二字来形容一点不为过。</p><h1>软件获取</h1><p>官网：<a href="https://typora.io/">https://typora.io/</a></p><p>软件下载链接：<a href="https://typora.io/windows/typora-setup-x64.exe?">https://typora.io/windows/typora-setup-x64.exe?</a></p><h1>语法快速入门（Typora）</h1><h2 id="代码块：">代码块：</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//代码块语法：</span></span><br><span class="line">​```C   </span><br><span class="line">    </span><br><span class="line">​```shell</span><br></pre></td></tr></table></figure><h3 id="范例："><strong>范例</strong>：</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># <span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Welcome to my blog&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="标题：">标题：</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//标题语法</span></span><br><span class="line"># 一级标题</span><br><span class="line">## 二级标题</span><br><span class="line">### 三级标题</span><br><span class="line">#### 四级标题</span><br><span class="line">##### 五级标题</span><br><span class="line">###### 六级标题</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>最多可支持6级标题</p><h3 id="范例：-2">范例：</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 一级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 二级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 三级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">#### 四级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">##### 五级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">###### 六级标题  </span></span><br></pre></td></tr></table></figure><h2 id="字体：">字体：</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 加粗</span></span><br><span class="line">**加油**</span><br><span class="line"><span class="comment">// 代码高亮 </span></span><br><span class="line">==Little-Demon==</span><br><span class="line"><span class="comment">// 删除线  </span></span><br><span class="line">~~被删除的文字~~</span><br><span class="line"><span class="comment">// 斜体</span></span><br><span class="line">*斜体内容*</span><br></pre></td></tr></table></figure><h3 id="范例：-3">范例：</h3><p>//加粗</p><p><strong>加油</strong><br>// 代码高亮<br>==Little-Demon==<br>// 删除线<br><s>被删除的文字</s><br>// 斜体<br><em>斜体内容</em></p><h2 id="引用">引用:</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//引用语法  </span></span><br><span class="line">&gt;一级引用</span><br><span class="line">&gt;&gt;二级引用 </span><br><span class="line">&gt;&gt;&gt;三级引用</span><br></pre></td></tr></table></figure><h3 id="范例：-4">范例：</h3><blockquote><p>作者：Little-Demon</p><blockquote><p>作者：Little-Demon</p><blockquote><p>作者：Little-Demon</p></blockquote></blockquote></blockquote><h2 id="分割线">分割线</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//分割线  </span></span><br><span class="line">--- </span><br><span class="line"><span class="comment">//分割线2</span></span><br><span class="line">*** </span><br><span class="line">    </span><br></pre></td></tr></table></figure><h3 id="范例：-5">范例：</h3><hr><hr><h2 id="图片插入">图片插入</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//在线图片 </span></span><br><span class="line">![图片名称](图片url地址)</span><br><span class="line"><span class="comment">//本地图片  </span></span><br><span class="line">![图片名称](图片本地路径)</span><br></pre></td></tr></table></figure><h3 id="范例：-6">范例：</h3><p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/typora.jpg" alt=""></p><h2 id="超链接">超链接</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//超链接语法 </span></span><br><span class="line">[链接名称](链接地址)</span><br></pre></td></tr></table></figure><h3 id="范例：-7">范例：</h3><p><a href="https://space.bilibili.com/352335501">我的B站首页</a></p><h2 id="列表">列表</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//无序列表 </span></span><br><span class="line">- 目录<span class="number">1</span></span><br><span class="line">- 目录<span class="number">2</span></span><br><span class="line">- 目录<span class="number">3</span>  </span><br><span class="line"><span class="comment">//有序列表 </span></span><br><span class="line"><span class="number">1.</span>/<span class="number">1</span>+</span><br><span class="line">    </span><br></pre></td></tr></table></figure><h3 id="范例：-8">范例：</h3><ul><li>目录1</li><li>目录2</li><li>目录3</li></ul><ol><li>首页</li><li>分类</li><li>标签</li></ol><h2 id="表格">表格</h2><table><thead><tr><th>姓名</th><th>学号</th><th>性别</th></tr></thead><tbody><tr><td>张三</td><td>0000001</td><td>男</td></tr></tbody></table><h3 id="具体步骤：">具体步骤：</h3><p>鼠标点击文本编辑器空白处，鼠标右击选择插入—表格 ，具体截图如下</p><p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/%E8%A1%A8%E6%A0%BC1.png" alt=""></p><p>设置表格大小</p><p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/%E8%A1%A8%E6%A0%BC2.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 个人笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Keil MDK与Keil C51共存的方法（成功）</title>
      <link href="post/6a7a340c.html"/>
      <url>post/6a7a340c.html</url>
      
        <content type="html"><![CDATA[<h1>前言</h1><p>Keil5比Keil4功能更加丰富，想要同时开发两款芯片一块是51内核一块是STM32单片机该怎么做能，怎么样让KEil可以同时建立并且可以并且可以编译两种工程呢，那么这里我将给大家出Keil5+Keil4共存的方法。在网上搜的资料MDK与KeilC51安装顺序都搞反了，但是用此安装方法可以成功解决了MDK与KeilC51的共存问题。所有功能完美运行。</p><h1>注意事项</h1><p><font face="宋体" color=Red  size=4>因为MDK功能比KeilC51多，所以要先安装KeilC51<br></font></p><h1>教程总览</h1><ul><li><a href="https://pan.baidu.com/s/1ht0h5bUbmAJnJkceNQ_0nQ">软件包获取</a>提取码：6666</li><li><a href="https://little-demon1.github.io/2021/02/27/Keil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E7%BB%BF%E5%8C%96%EF%BC%88%E4%B8%80%EF%BC%89Keil4/">Keil C51（keil4）安装教程</a></li><li><a href="https://little-demon1.github.io/2021/03/01/Keil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E7%BB%BF%E5%8C%96%EF%BC%88%E4%BA%8C%EF%BC%89Keil5%20MDk/">Keil5 MDK 安装教程</a></li><li>对安装教程还有不熟悉和软件包还未获取可以点击上面链接获取</li></ul><h1>具体步骤</h1><ul><li>1、先安装KeilC51到自定义目录如：D:/Soft/KeilC51（先不破解）；</li><li>2、安装MDK到自定义目录如：D:/Soft/MDK（先不破解）；</li><li>3、复制KeilC51目录下C51文件夹到D:/Soft/MDK；</li><li>4、复制KeilC51目录下UV4文件夹下所有文件到D:/Soft/MDK/UV4（重复文件不覆盖）<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/010.jpg" alt=""></li><li>5、复制KeilC51目录下TOOLS.INI文件内容到MDK的TOOLS.INI内容下方；</li><li>6、把TOOLS.INI中”KeilC51”关键字该为”MDK”(可以利用查找命令进行查找)<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/011.jpg" alt=""></li><li>7、用管理员权限打开D:\Soft\MDK\UV4\UV4.exe<br>File----License Management 分别进行ARM与C51的破解 其中CID码相同(具体可以参考之前的Keil C51和Keil MDK的绿化教程)</li></ul><h1>后记</h1><p>这里的话Keil系列KeilC51和Keil Mdk共存教程已经完成，你可以在你的电脑进行C51单片机和STM32的程序编写运行，你的点灯大师之旅正式开始</p>]]></content>
      
      
      <categories>
          
          <category> 嵌入式开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 电子产品设计开发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Keil系列软件安装绿化（二）Keil5 MDk</title>
      <link href="post/51328.html"/>
      <url>post/51328.html</url>
      
        <content type="html"><![CDATA[<h1>前言</h1><p>在之前给大家介绍安装KEIL4软件的安装，那么紧接着通过本篇文章的学习，我们可以在电脑上安装一个KEIL5软件，为后面学习STM32单片机程序的开发做好铺垫。</p><h1>Keil5软件介绍</h1><p>Keil C51是51系列兼容单片机C语言软件开发系统，与汇编相比，C语言在功能上、结构性、可读性、可维护性上有明显的优势，因而易学易用。Keil提供了包括C编译器、宏汇编、链接器、库管理和一个功能强大的仿真调试器等在内的完整开发方案，通过一个集成开发环境(μVision)将这些部分组合在一起。如果你使用C语言编程，那么Keil几乎就是你的不二之选，即使不使用C语言而仅用汇编语言编程，其方便易用的集成环境、强大的软件仿真调试工具也会令你事半功倍。</p><h1>Keil5功能特点</h1><ul><li>完美支持Cortex-M、Cortex-R4、ARM7和ARM9系列器件。</li><li>业行领先的ARM C/C++编译工具链</li><li>确定的Keil RTX ，小封装实时操作系统(带源码)</li><li>μVision5 IDE集成开发环境，调试器和仿真环境</li><li>TCP/IP网络套件提供多种的协议和各种应用</li><li>提供带标准驱动类的USB 设备和USB 主机栈</li><li>为带图形用户接口的嵌入式系统提供了完善的GUI库支持</li><li>ULINKpro可实时分析运行中的应用程序，且能记录Cortex-M指令的每一次执行</li><li>关于程序运行的完整代码覆盖率信息</li><li>执行分析工具和性能分析器可使程序得到最优化</li><li>大量的项目例程帮助你快速熟悉MDK-ARM强大的内置特征</li><li>符合CMSIS (Cortex微控制器软件接口标准)</li></ul><h1>Keil5安装总览</h1><ul><li>KEIL5软件获取</li><li>KEIL5软件安装</li><li>安装STM32芯片包</li><li>KEIL5软件绿化</li></ul><h1>KEIL5软件获取</h1><p>要在电脑上成功安装KEIL5，首先必须要有安装包，我们可以通过万能的百度，搜索关键字“KEIL5下载”，上面会有很多下载渠道，也可以在KEIL的官网上下载：<a href="https://www.keil.com/download/product/">点击此处直到官网下载页面</a><br>不过我已经给大家提供了下载链接，大家直接下载即可，省去了查找下载的时间。我使用KEIL5是5.14版本，如果后面出了更高的版本选择性升级即可，不过也没有必要什么都追求最新的，用习惯了一个软件就行<br><font face="黑体" color=Red  size=3><br>(我给大家提供的KEIL5版本是5.31具体安装教程本篇文章同样适用，官网最新版本也是，该篇文章适用于大部分版本，如果后续版本原因教程变化我会进行及时更新)</font><br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/1-1.png"  /><br>使用们提供的下载链接下载的软件包，软件包<a href="https://pan.baidu.com/s/1GxBzMGbOKmaO8bh6INF_2g">点击此处链接直达</a> 提取码：6666 其内部含有如下图所示文件。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210227212110.png" alt=""></p><h1>KEIL5软件安装</h1><p>软件包下载完成之后，我们双击mdk534.exe这个应用程序（教程以mdk514.exe为例），弹出如下所示对话框。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301190120.png" alt=""><br>点击Next按钮。弹出如下对话框。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301190208.png" alt=""><br>在红框2中勾选上，点击Next按钮。弹出如下对话框。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301190251.png" alt=""><br>点击红框4选择软件安装的code路径和pack路径，一般选择好code路径，pack路径自动就会出现。<font face="宋体" color=Red  size=3> 特别要注意：（1）软件安装保存路径不能出现中文，否则会出现很多奇怪的错误，到时候很难找问题。（2）不要将KEIL5软件和KEIL4或者51的KEIL安装在一个文件夹内。</font> 然后点击Next。弹出如下对话框<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301190437.png" alt=""><br>在红色框7和8中我们随便输入一些东西，我们这里输入数字11，当然也可以输入空格，但是一定要输入，否则红色框9就一直是灰色状态，输入完成后点击Next，弹出如下对话框。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301190523.png" alt=""><br>说明KEIL5软件正在安装，只要等一段时间即可，安装完成以后会出现如下界面。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301190610.png" alt=""><br>点击Finsh按钮弹出如下对话框，此对话框是说安装STM32芯片包。我们后面就会手动安装，所以这步直接关掉。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301190636.png" alt=""></p><h1>安装STM32芯片包</h1><p>上一步安装完成并不是真正安装好，和安装KEIL4等软件不同的是，KEIL5需要单独安装芯片包，否则无法选择芯片类型。STM32芯片包需要去KEIL的官网下载，有F0/1/2/6/4/7这几个系列，具体下载和安装哪个系列的包，要看你的芯片型号。我们给大家的KEIL5软件内提供了STM32F1和F4的芯片包。如下所示。大家直接双击红色框内文件，安装和KEIL5同一目录即可。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301190817.png" alt=""><br>KEIL5安装到这里电脑桌面上会有一个快捷方式，如下所示。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301190917.png" alt=""><br>我们直接双击此快捷图标，打开KEIL5软件，看看刚才的芯片包是否安装成功。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301190959.png" alt=""><br>从上图可以看到，已经出现了我们安装的STM32F1和F4的芯片系列。后面我们就能够选择使用的STM32芯片型号来创建工程模板了。</p><h1>KEIL5软件绿化</h1><p>安装完KEIL5以及STM32芯片包之后，我们还需要对其破解，首先打开KEIL5软件，点击File-License Management…,复制红色框3中的CID。操作步骤如下：<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301191228.png" alt=""><br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301191251.png" alt=""><br>然后我们打开之前下载的KEIL5软件包，里面还有一个2020版keil最新注册机.zip压缩包，此压缩包内文件用于绿化，直接双击它，将刚才从KEIL5中复制的CID码粘贴到下面红色框4中，并且在红色框5选择ARM，然后点击红色框6，生成破解码，将此破解码即红色框7内容复制到KEIL5软件内LIC框中，点击Add LIC即可破解，如果破解成功则会显示。操作步骤如下<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301191811.png" alt=""><br>通过添加License后对话框出现成功标志以及软件到期时间即表示软件绿化成功<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301192133.png" alt=""></p><p>如果破解出现下面对话框内容则表明失败，在打开KEIL的时候,点击快捷方式图标，选择右键： Run As Administrator ,中文系统应该是“以管理员权限运行”，然后就可以正常加licence了。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301191938.png" alt=""></p><h1>后记</h1><p>Keil5比Keil4功能更加丰富，但是如若想要同时开发两款芯片一块是51内核一块是STM32单片机该怎么做能，怎么样让KEil可以同时建立并且可以并且可以编译两种工程呢，那么后面我将给大家出Keil5+Keil4共存的方法。</p>]]></content>
      
      
      <categories>
          
          <category> 嵌入式开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 电子产品设计开发 </tag>
            
            <tag> ARM </tag>
            
            <tag> STM32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Keil 系列软件安装绿化（一）Keil C51（Keil4）</title>
      <link href="post/580aae9.html"/>
      <url>post/580aae9.html</url>
      
        <content type="html"><![CDATA[<h1>前言</h1><p>本章将向大家介绍 Keil C51（Keil4）软件的安装，通过本篇文章的学习，我们可以在电脑上安装一个Keil C51（Keil4）软件，为后面学习C51单片机等芯片的下位机程序的开发做好铺垫。</p><h1>Keil4软件介绍</h1><p>2009年2月发布Keil uVision4，Keil uVision4引入灵活的窗口管理系统，使开发人员能够使用多台监视器，并提供了视觉上的表面对窗口位置的完全控制的任何地方。新的用户界面可以更好地利用屏幕空间和更有效地组织多个窗口，提供一个整洁，高效的环境来开发应用程序。新版本支持更多最新的ARM芯片，还添加了一些其他新功能。2011年3月ARM公司发布最新集成开发环境RealView MDK开发工具中集成了最新版本的Keil uVision4，其编译器、调试工具实现与ARM器件的最完美匹配。</p><h1>Keil4功能特点</h1><ul><li>最新的Keil uVision4 IDE，旨在提高开发人员的生产力，实现更快，更有效的程序开发。</li><li>uVision4引入了灵活的窗口管理系统，能够拖放到视图内的任何地方，包括支持多显示器窗口。</li><li>uVision4在μVision3 IDE的基础上，增加了更多大众化的功能。</li><li>多显示器和灵活的窗口管理系统</li><li>系统浏览器窗口的显示设备外设寄存器信息</li><li>调试还原视图创建并保存多个调试窗口布局</li><li>多项目工作区简化与众多的项目</li></ul><h1>Keil4安装总览</h1><ul><li>KEIL4软件获取</li><li>KEIL4软件安装</li><li>KEIL4软件绿化</li></ul><h1>KEIL4软件获取</h1><p>这里我给大家提供了9.56版本的Keil4版本以及最新版的注册机绿化软件，软件包获取链接<a href="https://pan.baidu.com/s/1f6DZ-uokQKs2b-JPtMOudQ">点击此处链接直达</a> 提取码：6666 ,具体软件包内容如下：<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301201915.png" alt=""><br>但是如果大家对版本有更多要求想要下载其他版本的话可以在万能的百度上进行搜索关键词“Keil4”，上面会有很多渠道进行提供下载，但是大家要注意真假的辨别，如果想要下载最新的Keil4版本的话可以到官网进行下载，这里我给大家提供了官网直链<a href="https://www.keil.com/download/product/">点击此处直到官网下载页面</a>，这里到达官网页面我们点击C51即可对Keil 4进行下载，具体官网页面截图如下：<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/0009.png" alt=""></p><h1>KEIL4软件安装</h1><p>软件包下载完成之后，我们双击c51v956.exe这个应用程序，弹出如下所示对话框<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301202701.png" alt=""><br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/0001.png"  /><br>点击Next按钮。弹出如下对话框<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/0002.png"  /><br>这里勾选同意协议，然后继续点击Next按钮，弹出如下对话框<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/0003.png" alt=""><br>这里进行选择软件的安装目录，这里我以E盘新建Keil4文件为目录为例，点击Browse按钮找到我们所新建的目录文件夹（注意目录中所有文件夹均要以英文命名）完成后点击Next按钮，弹出对话框：<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/0004.png" alt=""><br>这里我们随便填写，大家可以和我一样填写（填什么都无妨）填写完成后，继续点击Next在一番安装加载后，弹出下面所示对话框：<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/0005.png" alt=""><br>这里我们把这两个勾选框的勾选去除掉，点击Finish按钮，至此Keil4的安装步骤完成</p><h1>KEIL4软件绿化</h1><p>安装完KEIL5以及STM32芯片包之后，我们还需要对其破解，首先打开KEIL5软件，点击File-License Management…,复制红色框3中的CID。操作步骤如下：<br>安装完KEIL4之后，我们还需要对其破解，首先打开KEIL<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301191228.png" alt=""><br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301191251.png" alt=""><br>然后我们打开之前下载的KEIL5软件包，里面还有一个2020版keil最新注册机.zip压缩包，此压缩包内文件用于绿化，直接双击它，将刚才从KEIL5中复制的CID码粘贴到下面红色框1中，并且在红色框2选择C51，然后点击红色框3，生成破解码，将此破解码即红色框4内容复制到KEIL4软件内LIC框中，点击Add LIC即可破解，如果破解成功则会显示。操作步骤如下:<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/0007.png" alt=""><br>通过添加License后对话框出现成功标志以及软件到期时间即表示软件绿化成功<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/0008.png" alt=""><br>如果破解出现下面对话框内容则表明失败，在打开KEIL的时候,点击快捷方式图标，选择右键： Run As Administrator ,中文系统应该是“以管理员权限运行”，然后就可以正常加licence了。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/20210301191938.png" alt=""></p><h1>后记</h1><p>至此你的Keil4软件就已经安装好了，你可以对51内核的单片机芯片进行开发程序进行编写,如若你想要对STM32单片机进行编程，那么需要利用Keil5 Mdk来进行编写，那么接下来我将进行Keil5的安装以及绿化进行具体的讲解。</p>]]></content>
      
      
      <categories>
          
          <category> 嵌入式开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 电子产品设计开发 </tag>
            
            <tag> C51 </tag>
            
            <tag> ARM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Alitum Designer 16安装绿化</title>
      <link href="post/44985.html"/>
      <url>post/44985.html</url>
      
        <content type="html"><![CDATA[<h1>软件介绍</h1><p>Alitum Designer是原Protel软件开发商Altium公司推出的一体化的电子产品开发系统，主要是在Windows操作系统运行。这套软件通过把电路原理图设计、仿真以及PCB绘制编辑、自动布线、信号完整性分析和产品设计输出等技术的完美融合，为电子设计开发者提供了全新的设计解决方案，使设计者可以轻松地进行电路的设计，通过熟练的使用这一软件必将使电路设计的质量和效率大大提高。</p><h1>准备工作</h1><p>系统环境：Windows操作系统<br>工具：软件安装包（<a href="https://pan.baidu.com/s/1lZ_G36UmU8wLUg2ph29c1Q">点击此处即可进行下载</a>提取码：6666）</p><h1>安装教程</h1><ul><li><p>1、将软件压缩包下载完毕后，将压缩包进行解压，然后打开安装包所在的文件夹，双击AltiumDesignerSetup_16_1_11.exe安装程序<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/1.png" style="zoom:67%;" /></p></li><li><p>2、进入软件安装程序中，具体安装程序界面如下：<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/2.png" style="zoom: 80%;" /></p></li><li><p>3、在上一个菜单界面点击Next后，在这里可以将语言改成中文或者其他你所需要的语言，并且接受协议，点击Next继续安装<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/3.png" style="zoom:80%;" /></p></li><li><p>4、这里菜单以默认即可 ，继续点击Next<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/4.png" style="zoom:80%;" /></p></li><li><p>5、设计软件的安装目录以及软件的元件库的安装目录，这里推荐到系统C盘以外的磁盘空间，这里要特别注意安装目录路径里不能有中文字符，记住自己的安装路径 。这里我以在D盘里新建的Altium Designer 16为例。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/5.png" style="zoom:80%;" /></p></li><li><p>6、单击Next继续下一步，安装过程如下，等待安装完成即可<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/6.png" style="zoom:80%;" /></p></li><li><p>7、取消勾选“Run Altium Designer”，点击Finish，安装结束后不要立即启动<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/7.png" style="zoom:80%;" /></p></li></ul><h1>软件绿化</h1><ul><li><p>1、打开下载软件包解压出来的AD License文件夹，复制其中的文件粘贴到刚刚软件程序的安装目录中。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/8.png" style="zoom:67%;" /><br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/9.png" style="zoom:67%;" /></p></li><li><p>2、在开始菜单中打开需要的软件程序<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/10.png" style="zoom:67%;" /></p></li><li><p>3、软件主界面如下，发现软件未注册<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/11.png" style="zoom: 33%;" /></p></li><li><p>4、点击“Add standalone license file”， 在软件的安装目录下找到“NB201601.alf”文件，选择文件，点击“打开”。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/12.png" style="zoom: 67%;" /><br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/13.png" style="zoom:67%;" /></p></li><li><p>5、出现下面界面即表明绿化注册成功<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/14.png" style="zoom:50%;" /></p></li></ul><h1>软件汉化（可选建议使用英语）</h1><ul><li>1、点击软件左上角的“DXP”，再点击“Preferences”，勾选“Use localized resources”，确定以后重启软件，即可将其切换到中文状态。<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/15.png" style="zoom:67%;" /><br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/16.png" style="zoom:67%;" /></li><li>2、汉化成功<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/17.png" style="zoom: 33%;" /><br>如果想回到英文状态重复上面步骤将 “Use localized resources”可选框取消勾选</li></ul>]]></content>
      
      
      <categories>
          
          <category> 嵌入式开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 电子产品设计开发 </tag>
            
            <tag> PCB设计 </tag>
            
            <tag> 电路原理图设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Win10系统安装激活（二）系统激活</title>
      <link href="post/28107.html"/>
      <url>post/28107.html</url>
      
        <content type="html"><![CDATA[<h1>前言</h1><p>win10的花费不低，所以很多电脑用户选择搜索激活，但是大部分用的激活工具激活的基本上都是假激活（或许本来就是），试用账号临时激活都是有时间限制的，虽然到时都可以继续，但是系统还是明确此激活为假激活，并没有真正激活，下面给大家讲解真正永久激活教程<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/Snipaste_2021-02-25_20-16-48.png" alt=""></p><h1>检查电脑系统状态</h1><p>现在的激活工具层出不断，但并不是所有工具都能激活某个系统，还需要不断尝试，当我们费经心思假激活时（还是有时间限制【微软随时都可以全部封杀】），何不来正版激活（永久）。看系统属性并不能真正看出到底有没有激活</p><h2 id="系统属性查看系统状态">系统属性查看系统状态</h2><p>在电脑桌面上点击图标（此电脑），在图标选中后鼠标右击打开菜单栏，点击进入计算机属性查看电脑信息<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/Snipaste_2021-02-25_20-22-21.png" style="zoom: 80%;" /><br>通过查看关于中Windows规格检查电脑系统是否已经正常激活<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/Snipaste_2021-02-25_20-26-45.png" style="zoom: 50%;" /></p><h2 id="通过命令查看系统状态（推荐）">通过命令查看系统状态（推荐）</h2><p>有的时候看系统属性并不能真正看出到底有没有激活，这里我推荐采用win+r打开运行，输入slmgr.vbs -xpr，回车若提示图示提示，则为kms假激活，只有6个月<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/Snipaste_2021-02-25_20-31-38.png" style="zoom:80%;" />  <img src="https://gitee.com/little-demon1/BlogImages/raw/master/Snipaste_2021-02-25_20-29-35.png"  /><br>如果不信再输入slmgr.vbs -dlv，回车查看详细信息<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/Snipaste_2021-02-25_20-16-48.png" style="zoom:80%;" /><img src="https://gitee.com/little-demon1/BlogImages/raw/master/Snipaste_2021-02-25_20-34-13.png" style="zoom:80%;" /><br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/Snipaste_2021-02-25_20-33-09.png" style="zoom: 80%;" /></p><h1>密钥激活</h1><h2 id="获取密钥">获取密钥</h2><p>首先要有一个对应产品的密钥，如果没有，搜索key一般不易过期（技巧为限定搜索时间为一周内）<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/Snipaste_2021-02-25_20-37-33.png" alt=""></p><h2 id="密钥安装">密钥安装</h2><p>右击开始，打开Windows powershall（管理员）输入slmgr /ipk P9C2R-NM3BW-JR7DG-2R38J-D9MPF<br>回车提示成功安装了产品密钥<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/Snipaste_2021-02-25_20-39-52.png" style="zoom:80%;" /><br>Windows powershall 密钥安装界面<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/QQ%E6%88%AA%E5%9B%BE20210225204106.png" style="zoom:67%;" /><br>产品密钥安装成功<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/Snipaste_2021-02-25_20-42-53.png" alt=""><br>输入slmgr /skms kms.xspace.in设置激活名称回车<br>提示……<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/Snipaste_2021-02-25_20-44-26.png" style="zoom:67%;" /><br>输入slmgr /ato激活命令提示激活成功再次输入slmgr.vbs -xpr查看是否永久激活<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/Snipaste_2021-02-25_20-45-54.png" style="zoom:67%;" /><br>激活成功<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/Snipaste_2021-02-25_20-46-36.png" style="zoom:67%;" /></p><h1>数字激活</h1><p>上面的密钥不一定有用，安装笔者第二步提示的技巧寻找如果实在不行，博主另外给打击提供一种方法——数字权利激活（此为微软在win10中新提供的激活方式）软件界面如下，软件可以<a href="https://pan.baidu.com/s/1iin303x1s1_W6LuUbTEtFQ">点击此链接获取</a> 提取码：6666</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/QQ%E6%88%AA%E5%9B%BE20210225204947.png" style="zoom:80%;" />  <h2 id="软件功能">软件功能</h2><p>可以选择你所想要的任务<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/QQ%E6%88%AA%E5%9B%BE20210225205107.png" style="zoom:80%;" /></p><h2 id="激活过程">激活过程</h2><p>对于已经安装选择过系统版本进行系统安装后，可以直接选择按下数字1进行当前版本系统激活，激活过程如下：<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/QQ%E6%88%AA%E5%9B%BE20210225205409.png" style="zoom:80%;" /></p><h2 id="系统状态查看">系统状态查看</h2><p>激活成功后你可以通过上面的系统状态查看方法查看系统激活状态或者在这款软件中选择查看当前系统激活状态，激活成功的话，会有下面的提示，这里放上我成功激活后的软件提示<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/QQ%E6%88%AA%E5%9B%BE20210225205734.png" style="zoom:80%;" /></p><h1>后记</h1><p>阅读文章到这，基本的系统安装和激活教程已经通过两篇文章进行发布，希望以上的文字教程能够对您起到帮助，如果你在系统安装或者系统激活过程中遇到了一些困难和疑问可以在下面评论区进行留言，我将在看到评论信息后第一时间对你的疑问进行解答，如果您觉得文章对您起到了很大的帮助可以在下方进行文章打赏，请博主喝杯奶茶————奶茶一杯，快乐起飞。</p>]]></content>
      
      
      <categories>
          
          <category> 经验分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 永久激活 </tag>
            
            <tag> Windows 10 激活 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>便携应用 PortableApps</title>
      <link href="post/58930.html"/>
      <url>post/58930.html</url>
      
        <content type="html"><![CDATA[<h1>前言</h1><p>电脑不在身边，没法使用常用的软件，对于这样的问题我们应当如何去解决呢？ 远程连接？掌上电脑？NO！NO！NO！我们仅仅需要一个移动U盘或者移动硬盘就可以实现，那具体是如何实现的呢，这就是今天我们所要介绍的主人公——PortableApps。<br>在PC端（电脑端）有些软件厂商已经将自己家的软件开发成网页版例如石墨文档、Asana、嘉立创EDA等都可以直接通过网页的方式使用软件，省去了下载安装过程，简单便捷。同时在手机端微信和支付宝小程序也解决了同样的问题，释放了手机用户的手机内存。如果还有更多的需求可以试试PortableApps。</p><h1>软件下载</h1><h2 id="登录PortableApps官网">登录PortableApps官网</h2><p><a href="https://portableapps.com">点击此处即可到达</a></p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224145851549.png" alt="image-20210224145851549" style="zoom: 50%;" /><h2 id="点击网站上下载即可进行下载">点击网站上下载即可进行下载</h2><p>软件本身十分小巧，建议可以将程序安装到移动硬盘或U盘之类的移动存储设备中，可以做到即插即用，而且断开设备后基本不会在本地电脑上留下任何信息和数据，非常适用于在不同电脑上办公的用户。</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224150432452.png" alt="image-20210224150432452" style="zoom: 67%;" /><h1>进行软件安装程序</h1><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224151005339.png" alt="image-20210224151005339" style="zoom: 67%;" /><h2 id="进入软件安装界面">进入软件安装界面</h2><p>跟随安装提示点击下一步</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224151136920.png" alt="image-20210224151136920" style="zoom: 80%;" /><h2 id="点击我接受">点击我接受</h2><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224151539297.png" alt="image-20210224151539297" style="zoom:80%;" /><h2 id="选择全新安装（安装类型）">选择全新安装（安装类型）</h2><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224151623053.png" alt="image-20210224151623053" style="zoom:80%;" /><h2 id="选择便携式-安装到便携式设备">选择便携式-安装到便携式设备</h2><p>接下来一直下一步直到选择点击安装即可进行安装</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224151903944.png" alt="image-20210224151903944" style="zoom:80%;" /><p>软件开始安装</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224152122269.png" alt="image-20210224152122269" style="zoom:80%;" /><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224152154674.png" alt="image-20210224152154674" style="zoom:80%;" /><h1>软件初始化完毕进入软件</h1><p>PortableApps默认提供了安全工具以及办公工具、编程开发等十余项分类，基本满足我们的日常办公需求</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224152711421.png" alt="image-20210224152711421" style="zoom: 67%;" /><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224152732233.png" alt="image-20210224152732233" style="zoom: 67%;" /><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224152759209.png" alt="image-20210224152759209" style="zoom: 67%;" /><h2 id="安装所需软件">安装所需软件</h2><p>通过鼠标滚轮上下滚动在默认软件里勾选你所需要的软件，点击下一步即可进行安装</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224153121975.png" alt="image-20210224153121975" style="zoom:67%;" /><h2 id="查看安装的软件">查看安装的软件</h2><p>安装完成后再电脑右下角底部菜单栏找到PortableApps图标，面板里就可以看到已经安装的便携应用了，点击就可以快速启动</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224154414044.png" alt="image-20210224154414044" style="zoom: 80%;" /><p>PortableApps涵盖了我们可能经常用到的各类便携应用（这里以qbittorrent打开为例）可以和往常一样正常一样</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224154556024.png" alt="image-20210224154556024" style="zoom:67%;" /><h2 id="文件查看你及备份、还原">文件查看你及备份、还原</h2><p>右侧可以进行浏览安装目录并且查看各类文件，点击备份可以对目前已经下载的软件进行备份或者还原</p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224155102074.png" alt="image-20210224155102074" style="zoom: 80%;" /><p>我们还可以再应用管理中进行检查更新，同时可以在应用市场类查找各类软件</p><p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224155249745.png" alt="image-20210224155249745"></p><h2 id="用户自选软件安装">用户自选软件安装</h2><p>除了官方推荐的软件，PortableApps还允许用户在论坛中进行下载所需要的应用，用户也可以直接在<a href="https://portableapps.com">PortableApps官网</a>进行搜索（下面以VSCODE为例）<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224155744485.png" alt="image-20210224155744485"></p><h3 id="搜索结果">搜索结果</h3><p>点击所需要的版本以及类型<br><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224155809791.png" alt="image-20210224155809791" style="zoom: 67%;" /></p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224160058114.png" alt="image-20210224160058114" style="zoom:67%;" /><h3 id="下载文件软件安装">下载文件软件安装</h3><p>在下载好后可以点击应用管理，选择安装新的便携应用，找到新下载文件即可进行安装</p><p><img src="https://gitee.com/little-demon1/BlogImages/raw/master/image-20210224160428432.png" alt="image-20210224160428432"></p><h1>后记</h1><p>我们把PortableApps安装的U盘里插入新的电脑，就可以无缝切换工作环境了，大大的减少了频繁更换设备所带来的麻烦。</p>]]></content>
      
      
      <categories>
          
          <category> 实用软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 实用工具 </tag>
            
            <tag> 智能移动应用管家 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
